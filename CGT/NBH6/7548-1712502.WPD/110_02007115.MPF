N1 ;detal 7548-1712502 korpus mehanizma
N2 ;OPER 070
N3 ;STANOK nbh-6 INV. N12506
N4 ;KOPTYAEV S.G  28.06.10
N5 ;1)zenker D=31.6 2320-6108 ;2)razvert d=32
N6 ;TC=25_MIN(NA 1_DETAL) ITOGO 135_MIN
N7 ;prisposobl(7274-6346)
N8 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B90,X_B90,Z_B90,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N9 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N10 DEFINE SMENA_Z AS g0 g53 z930 d0 M9 m5 
N11 $AC_TIMER[1]=0  ;cikl starta time/min
N12 ;--------DLA PRILADI-------------
N13 R50=147         ;OS_Y 
N14 R51=360.163     ;OS_X(RAZM.DET.13+/-0.2
N15 R52=75.0965     ;OS_Z(RAZM.DET.27+/-0.25
N16 ;_____________ZDES NASTROY!!!!!!!!!!___________________
N17 R10=1  ;1=DA OBRABOT.NA B270(G55),0=NET OBRABOT.NA B270(G55)
N18 R20=1  ;1=DA OBRABOT.NA B90(G56),0=NET OBRABOT.NA B90(G56)
N19 ;______________________________________________________
N20 GOTOF _proverka
N21 START_1:
N22 ; ********rabota*********G54* 
N23 ST1: WORK_STEP(1)
N24 SMENA_Z
N25 G0 G54 G17 G40 G90 G94          ;g54!!!!
N26 T="7.2" M6
N27 MSG("T7.2(2/7) Sverlo centr.D=16<90_gr,WORK_STEP(1) ")
N28 ;***************************************** T...
N29 G0 g54 B180
N30 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N31 REGIME(18,16,2,0.09)
N32 ;_______4_otv. na d=11+0.43_______
N33 SKOK_1:G0 G54 X13 Y-27 D1
N34 Z40 M3 M8
N35 MCALL CYCLE82(40,0,zbez,,11.2/2,1)
N36 x13 y-27                ;1_otv
N37 x=13+54 y-27            ;2_otv
N38 x=13+52 y=60-27         ;3_otv
N39 x=13    y=60-27         ;4_otv
N40 MCALL
N41 G0 Z150
N42 ATRANS Y=POM_Y
N43 REPEAT SKOK_1 P=1
N44 SMENA_Z
N45 ;____B90_2+2_otv.+B270_2+2_otv.___na d=32+0.052____
N46 G0 g54 B90
N47 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N48 BOL_SKOK_2:
N49 SKOK_2:G0 G54 X0 Y0 D1
N50 Z40 M3 M8
N51 MCALL CYCLE82(40,0,zbez,,16/2,1)
N52 x0 y0             ;1_otv
N53 x0 y66            ;2_otv
N54 MCALL
N55 G0 Z150
N56 ATRANS Y=POM_Y
N57 REPEAT SKOK_2 P=1
N58 SMENA_Z
N59 g0 g54 B270
N60 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N61 AMIRROR X0
N62 REPEAT BOL_SKOK_2 P=1
N63 SMENA_Z
N64 gbTOCheckAtTC = TRUE 
N65 gbErrMsgOnToCheck = TRUE
N66 ST2: WORK_STEP(2)
N67 SMENA_Z
N68 T="9.1" M6
N69 MSG("T9.1-Sverlo centr.D=8.7<90_gr,WORK_STEP(2) ")
N70 ;**************************************** T4.1
N71 ;____B270_4+4_otv.+B90_4+4_otv.___na d=6.7+0.2____
N72 G0 g54 B270
N73 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N74 REGIME(18,8.7,2,0.1)
N75 WAIT_TO_CHECK
N76 BOL_SKOK_3:
N77 SKOK_3:G0 G54 X16 Y17 D1
N78 Z40 M3 M8
N79 MCALL CYCLE82(40,0,zbez,,8.8/2,1)  ;6.8+1.6*2=10
N80 x16  y17            ;1_otv
N81 x-16 y17            ;2_otv
N82 x-16 y=17+32        ;3_otv
N83 x16  y=17+32        ;4_otv
N84 MCALL
N85 G0 Z150
N86 ATRANS Y=POM_Y
N87 REPEAT SKOK_3 P=1
N88 SMENA_Z
N89 g0 g54 B90
N90 TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N91 AMIRROR X0
N92 REPEAT BOL_SKOK_3 P=1
N93 SMENA_Z
N94 G0 g54 B180
N95 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N96 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)_
N97 SKOK_4:G0 G54 X=13+54 Y=-(27-18) D1
N98 Z40 M3 M8
N99 MCALL CYCLE82(40,0,zbez,,8.5/2,1)
N100 x=13+54 y=-(27-18)     ;1_otv
N101 x=13+30 y=60-27        ;2_otv
N102 MCALL
N103 ;_______2_otv. na d=6+0.3_______
N104 G0 G54 X=13+11 Y=34-27 D1
N105 Z40 M3 M8
N106 MCALL CYCLE82(40,0,zbez,,6.2/2,1)
N107 x=13+11 y=34-27      ;1_otv
N108 x=13+11 y=86-27      ;2_otv
N109 MCALL
N110 G0 Z150
N111 ATRANS Y=POM_Y
N112 REPEAT SKOK_4 P=1
N113 SMENA_Z
N114 gbTOCheckAtTC = TRUE 
N115 gbErrMsgOnToCheck = TRUE
N116 ST3: WORK_STEP(3)
N117 T="15.1" M6
N118 MSG("T15.1 Sverlo D=11+0.43,WORK_STEP(3) ")
N119 ;*******************************************************T4.2
N120 G0 g54 B180
N121 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N122 REGIME(15,11,2,0.1)
N123 WAIT_TO_CHECK
N124 ;_______4_otv. d=11+0.43_______
N125 SKOK_5:G0 G54 X13 Y-27 D1
N126 Z50 M3 M8
N127 MCALL CYCLE83(40,0,zbez,,53,,8,4,,,1,1) 
N128 x13 y-27                ;1_otv
N129 x=13+54 y-27            ;2_otv
N130 x=13+52 y=60-27         ;3_otv
N131 x=13    y=60-27         ;4_otv
N132 MCALL
N133 G0 Z150
N134 ATRANS Y=POM_Y
N135 REPEAT SKOK_5 P=1
N136 SMENA_Z
N137 ST4: WORK_STEP(4)
N138 T="14.1" M6
N139 MSG("T14.1 Sverlo D=8.7+0.36,WORK_STEP(4) ")
N140 ;**************************************************** T2.1
N141 G0 g54 B180
N142 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N143 REGIME(15,8.7,2,0.1)
N144 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)
N145 SKOK_6:G0 G54 X=13+54 Y=-(27-18) D1
N146 Z40 M3 M8
N147 CYCLE83(40,0,zbez*1.5,,25,,8,5,,,1,1)
N148 x=13+30 y=60-27   ;2_ot
N149 CYCLE83(40,0,zbez*1.5,,32.25,,8,5,,,1,1)
N150 G0 Z150
N151 ATRANS Y=POM_Y
N152 REPEAT SKOK_6 P=1
N153 SMENA_Z
N154 ST5: WORK_STEP(5)
N155 T="12.2" M6
N156 MSG("T12.2 Sverlo D=6+0.3,WORK_STEP(5) ")
N157 ;**************************************************** T2.2
N158 G0 g54 B180
N159 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N160 REGIME(15,6,2,0.08)
N161 WAIT_TO_CHECK
N162 ;_______2_otv. na d=6+0.3_(2_otv_L=5+2mm)
N163 SKOK_7:G0 G54 X=13+11 Y=34-27 D1
N164 Z40 M3 M8
N165 MCALL CYCLE82(10,0,zbez,,6,0.5)
N166 x=13+11 y=34-27      ;1_otv
N167 x=13+11 y=86-27      ;2_otv
N168 MCALL
N169 G0 Z150
N170 ATRANS Y=POM_Y
N171 REPEAT SKOK_7 P=1
N172 SMENA_Z
N173 ST6: WORK_STEP(6)
N174 T="23.1" M6
N175 MSG("T23.1 Sverlo D=30+0.52,WORK_STEP(6) ")
N176 ;************************************************** T11.1
N177 G0 g54 B90
N178 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N179 REGIME(15,30,2,0.12)
N180 WAIT_TO_CHECK
N181 ;___D=30____2_otv.B90(L=50);2_otv.B270(L=45)_______
N182 R150=50
N183 BOL_SKOK_8:
N184 SKOK_8:G0 G54 X0 Y0 D1
N185 Z50 M3 M8
N186 MCALL CYCLE83(50,0,zbez*2,,r150,,8,5,,,1,1)
N187 x0 y0             ;1_otv
N188 x0 y66            ;2_otv
N189 MCALL
N190 G0 Z150
N191 ATRANS Y=POM_Y
N192 REPEAT SKOK_8 P=1
N193 SMENA_Z
N194 g0 g54 B270
N195 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N196 AMIRROR X0
N197 R150=45
N198 REPEAT BOL_SKOK_8 P=1
N199 SMENA_Z
N200 ST7: WORK_STEP(7)
N201 T="10.2" M6
N202 MSG("T10.2 Zenker D=31.71,WORK_STEP(7) ")
N203 ;************************************************** T14.2
N204 G0 g54 B270
N205 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N206 REGIME(15,31.7,3,0.11)
N207 ;___D=27____2_otv.B270(L=100)_na skvoz
N208 SKOK_111:G0 G54 X0 Y0 D1
N209 Z50 M3 M8
N210 MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*10)
N211 x0 y0             ;1_otv
N212 x0 y66            ;2_otv
N213 MCALL
N214 G0 Z350
N215 ATRANS Y=POM_Y
N216 REPEAT SKOK_111 P=1
N217 SMENA_Z
N218 gbTOCheckAtTC = TRUE 
N219 gbErrMsgOnToCheck = TRUE
N220 ;GOTOF REZEC_1
N221 ;ST8: WORK_STEP(8)
N222 ;T="11.2" M6
N223 ;MSG(" T11.2-REZEC D=31.6+0.15,WORK_STEP(8) ")
N224 ;************************************************** T11.2
N225 ;G0 g54 B270
N226 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N227 ;REGIME(85,31,1,0.12)
N228 ;WAIT_TO_CHECK
N229 ;___D=27____2_otv.B270(L=50);2_otv.B90(L=45)_______
N230 ;R150=50
N231 ;BOL_SKOK_9:
N232 ;SKOK_9:G0 G54 X0 Y0 D1
N233 ;Z40 M3 M8
N234 ;MCALL CYCLE81(40,0,zbez,,r150)
N235 ;x0 y0             ;1_otv
N236 ;x0 y66            ;2_otv
N237 ;MCALL
N238 ;G0 Z150
N239 ;ATRANS Y=POM_Y
N240 ;REPEAT SKOK_9 P=1
N241 ;SMENA_Z
N242 ;g0 g54 B90
N243 ;TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N244 ;AMIRROR X0
N245 ;R150=45
N246 ;REPEAT BOL_SKOK_9 P=1
N247 ;SMENA_Z
N248 ;REZEC_1:
N249 ST9: WORK_STEP(9)
N250 T="9.2" M6
N251 MSG("T9.2 SVERLO D=6.7+0.2,WORK_STEP(9) ")
N252 ;************************************************** T14.1
N253 G0 g54 B90
N254 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N255 REGIME(15,6.7,2,0.1)
N256 BOL_SKOK_10:
N257 SKOK_10:G0 G54 X16 Y17 D1
N258 Z40 M3 M8
N259 MCALL CYCLE81(40,0,zbez,,24.5)  ;6.8+1.6*2=10
N260 x16  y17            ;1_otv
N261 x-16 y17            ;2_otv
N262 x-16 y=17+32        ;3_otv
N263 x16  y=17+32        ;4_otv
N264 MCALL
N265 G0 Z150
N266 ATRANS Y=POM_Y
N267 REPEAT SKOK_10 P=1
N268 SMENA_Z
N269 g0 g54 B270
N270 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N271 AMIRROR X0
N272 REPEAT BOL_SKOK_10 P=1
N273 SMENA_Z
N274 ;ST10: WORK_STEP(10)
N275 ;T="25.2" M6
N276 ;MSG(" T25.2-Razvertka D=32+0.052,WORK_STEP(10) ")
N277 ;************************************************** T25.2
N278 ;G0 g54 B270
N279 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N280 ;REGIME(12,32,10,0.062)
N281 ;___D=27____2_otv.B270(L=100)_na skvoz
N282 ;SKOK_11:G0 G54 X0 Y0 D1
N283 ;Z40 M3 M8
N284 ;MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*3)
N285 ;x0 y0             ;1_otv
N286 ;x0 y66            ;2_otv
N287 ;MCALL
N288 ;G0 Z350
N289 ;ATRANS Y=POM_Y
N290 ;REPEAT SKOK_11 P=1
N291 ;SMENA_Z
N292 gbTOCheckAtTC = TRUE 
N293 gbErrMsgOnToCheck = TRUE
N294 ;----------------- RABOTA B270____G55------
N295 IF R10==0 GOTOF END_B270 
N296 ST11: WORK_STEP(11)
N297 SMENA_Z
N298 G0 G55 G17 G40 G90 G94          ;g55!!!!
N299 T="7.2" M6
N300 MSG("T7.2(2/7) Sverlo centr.D=16<90_gr,WORK_STEP(11) ")
N301 ;***************************************** T17.1
N302 G0 g55 B180
N303 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N304 REGIME(18,20,2,0.09)
N305 ;_______4_otv. na d=11+0.43_______
N306 SKOK_12:G0 G55 X13 Y-27 D1
N307 Z40 M3 M8
N308 MCALL CYCLE82(40,0,zbez,,11.2/2,1)
N309 x13 y-27                ;1_otv
N310 x=13+54 y-27            ;2_otv
N311 x=13+52 y=60-27         ;3_otv
N312 x=13    y=60-27         ;4_otv
N313 MCALL
N314 G0 Z150
N315 ATRANS Y=POM_Y
N316 REPEAT SKOK_12 P=1
N317 SMENA_Z
N318 ;____B90_2+2_otv.+B270_2+2_otv.___na d=32+0.052____
N319 G0 g55 B90
N320 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N321 BOL_SKOK_13:
N322 SKOK_13:G0 G55 X0 Y0 D1
N323 Z40 M3 M8
N324 MCALL CYCLE82(40,0,zbez,,15/2,1)
N325 x0 y0             ;1_otv
N326 x0 y66            ;2_otv
N327 MCALL
N328 G0 Z150
N329 ATRANS Y=POM_Y
N330 REPEAT SKOK_13 P=1
N331 SMENA_Z
N332 g0 g55 B270
N333 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N334 AMIRROR X0
N335 REPEAT BOL_SKOK_13 P=1
N336 SMENA_Z
N337 gbTOCheckAtTC = TRUE 
N338 gbErrMsgOnToCheck = TRUE
N339 ST12: WORK_STEP(12)
N340 SMENA_Z
N341 T="9.1" M6
N342 MSG("T9.1 Sverlo centr.D=8.7<90_gr,WORK_STEP(12) ")
N343 ;**************************************** T4.1
N344 ;____B270_4+4_otv.+B90_4+4_otv.___na d=6.7+0.2____
N345 G0 g55 B270
N346 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N347 REGIME(18,8.7,2,0.1)
N348 WAIT_TO_CHECK
N349 BOL_SKOK_14:
N350 SKOK_14:G0 G55 X16 Y17 D1
N351 Z40 M3 M8
N352 MCALL CYCLE82(40,0,zbez,,8.8/2,1)  ;6.8+1.6*2=10
N353 x16  y17            ;1_otv
N354 x-16 y17            ;2_otv
N355 x-16 y=17+32        ;3_otv
N356 x16  y=17+32        ;4_otv
N357 MCALL
N358 G0 Z150
N359 ATRANS Y=POM_Y
N360 REPEAT SKOK_14 P=1
N361 SMENA_Z
N362 g0 g55 B90
N363 TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N364 AMIRROR X0
N365 REPEAT BOL_SKOK_14 P=1
N366 SMENA_Z
N367 G0 g55 B180
N368 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N369 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)_
N370 SKOK_15:G0 G55 X=13+54 Y=-(27-18) D1
N371 Z40 M3 M8
N372 MCALL CYCLE82(40,0,zbez,,8.5/2,1)
N373 x=13+54 y=-(27-18)     ;1_otv
N374 x=13+30 y=60-27        ;2_otv
N375 MCALL
N376 ;_______2_otv. na d=6+0.3_______
N377 G0 G55 X=13+11 Y=34-27 D1
N378 Z40 M3 M8
N379 MCALL CYCLE82(40,0,zbez,,6.2/2,1)
N380 x=13+11 y=34-27      ;1_otv
N381 x=13+11 y=86-27      ;2_otv
N382 MCALL
N383 G0 Z150
N384 ATRANS Y=POM_Y
N385 REPEAT SKOK_15 P=1
N386 SMENA_Z
N387 gbTOCheckAtTC = TRUE 
N388 gbErrMsgOnToCheck = TRUE
N389 ST13: WORK_STEP(13)
N390 T="15.1" M6
N391 MSG("T15.1 Sverlo D=11+0.43,WORK_STEP(13) ")
N392 ;*******************************************************T4.2
N393 G0 g55 B180
N394 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N395 REGIME(15,11,2,0.1)
N396 WAIT_TO_CHECK
N397 ;_______4_otv. d=11+0.43_______
N398 SKOK_16:G0 G55 X13 Y-27 D1
N399 Z50 M3 M8
N400 MCALL CYCLE83(40,0,zbez,,53,,8,4,,,1,1) 
N401 x13 y-27                ;1_otv
N402 x=13+54 y-27            ;2_otv
N403 x=13+52 y=60-27         ;3_otv
N404 x=13    y=60-27         ;4_otv
N405 MCALL
N406 G0 Z150
N407 ATRANS Y=POM_Y
N408 REPEAT SKOK_16 P=1
N409 SMENA_Z
N410 ST14: WORK_STEP(14)
N411 T="14.1" M6
N412 MSG("T14.1 Sverlo D=8.7+0.36,WORK_STEP(14) ")
N413 ;**************************************************** T2.1
N414 G0 g55 B180
N415 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N416 REGIME(15,8.7,2,0.1)
N417 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)
N418 SKOK_17:G0 G55 X=13+54 Y=-(27-18) D1
N419 Z40 M3 M8
N420 CYCLE83(40,0,zbez*1.5,,25,,8,5,,,1,1)
N421 x=13+30 y=60-27   ;2_ot
N422 CYCLE83(40,0,zbez*1.5,,32.25,,8,5,,,1,1)
N423 G0 Z150
N424 ATRANS Y=POM_Y
N425 REPEAT SKOK_17 P=1
N426 SMENA_Z
N427 ST15: WORK_STEP(15)
N428 T="12.2" M6
N429 MSG("T12.2 Sverlo D=6+0.3,WORK_STEP(15) ")
N430 ;**************************************************** T2.2
N431 G0 g55 B180
N432 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N433 REGIME(15,6,2,0.08)
N434 WAIT_TO_CHECK
N435 ;_______2_otv. na d=6+0.3_(2_otv_L=5+2mm)
N436 SKOK_18:G0 G55 X=13+11 Y=34-27 D1
N437 Z40 M3 M8
N438 MCALL CYCLE82(10,0,zbez,,6,0.5)
N439 x=13+11 y=34-27      ;1_otv
N440 x=13+11 y=86-27      ;2_otv
N441 MCALL
N442 G0 Z150
N443 ATRANS Y=POM_Y
N444 REPEAT SKOK_18 P=1
N445 SMENA_Z
N446 ST16: WORK_STEP(16)
N447 T="23.1" M6
N448 MSG("T23.1 Sverlo D=30+0.52,WORK_STEP(16) ")
N449 ;************************************************** T11.1
N450 G0 g55 B90
N451 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N452 REGIME(15,30,2,0.12)
N453 WAIT_TO_CHECK
N454 ;___D=30____2_otv.B90(L=50);2_otv.B270(L=45)_______
N455 R150=50
N456 BOL_SKOK_19:
N457 SKOK_19:G0 G55 X0 Y0 D1
N458 Z40 M3 M8
N459 MCALL CYCLE83(40,0,zbez*2,,r150,,8,5,,,1,1)
N460 x0 y0             ;1_otv
N461 x0 y66            ;2_otv
N462 MCALL
N463 G0 Z150
N464 ATRANS Y=POM_Y
N465 REPEAT SKOK_19 P=1
N466 SMENA_Z
N467 g0 g55 B270
N468 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N469 AMIRROR X0
N470 R150=45
N471 REPEAT BOL_SKOK_19 P=1
N472 SMENA_Z
N473 ST17: WORK_STEP(17)
N474 T="10.2" M6
N475 MSG("T10.2 Zenker D=31.71,WORK_STEP(17) ")
N476 ;************************************************** T14.2
N477 G0 g55 B270
N478 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N479 REGIME(15,31.7,3,0.11)
N480 ;___D=27____2_otv.B270(L=100)_na skvoz
N481 SKOK_112:G0 G55 X0 Y0 D1
N482 Z50 M3 M8
N483 MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*10)
N484 x0 y0             ;1_otv
N485 x0 y66            ;2_otv
N486 MCALL
N487 G0 Z350
N488 ATRANS Y=POM_Y
N489 REPEAT SKOK_112 P=1
N490 SMENA_Z
N491 gbTOCheckAtTC = TRUE 
N492 gbErrMsgOnToCheck = TRUE
N493 ;GOTOF REZEC_2
N494 ;ST18: WORK_STEP(18)
N495 ;T="11.2" M6
N496 ;MSG(" T11.2-REZEC D=31.6+0.15,WORK_STEP(18) ")
N497 ;************************************************** T11.2
N498 ;G0 g55 B270
N499 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N500 ;REGIME(85,31,1,0.12)
N501 ;WAIT_TO_CHECK
N502 ;___D=27____2_otv.B270(L=50);2_otv.B90(L=45)_______
N503 ;R150=50
N504 ;BOL_SKOK_20:
N505 ;SKOK_20:G0 G55 X0 Y0 D1
N506 ;Z40 M3 M8
N507 ;MCALL CYCLE83(40,0,zbez*1.5,,r150,,8,5,,,1,1)
N508 ;x0 y0             ;1_otv
N509 ;x0 y66            ;2_otv
N510 ;MCALL
N511 ;G0 Z150
N512 ;ATRANS Y=POM_Y
N513 ;REPEAT SKOK_20 P=1
N514 ;SMENA_Z
N515 ;g0 g55 B90
N516 ;TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N517 ;AMIRROR X0
N518 ;R150=45
N519 ;REPEAT BOL_SKOK_20 P=1
N520 ;SMENA_Z
N521 ;REZEC_2:
N522 ST19: WORK_STEP(19)
N523 T="9.2" M6
N524 MSG("T9.2 SVERLO D=6.7+0.2,WORK_STEP(19) ")
N525 ;************************************************** T14.1
N526 G0 g55 B90
N527 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N528 REGIME(15,6.7,2,0.1)
N529 BOL_SKOK_21:
N530 SKOK_21:G0 G55 X16 Y17 D1
N531 Z40 M3 M8
N532 MCALL CYCLE81(40,0,zbez,,24.5)  ;6.8+1.6*2=10
N533 x16  y17            ;1_otv
N534 x-16 y17            ;2_otv
N535 x-16 y=17+32        ;3_otv
N536 x16  y=17+32        ;4_otv
N537 MCALL
N538 G0 Z150
N539 ATRANS Y=POM_Y
N540 REPEAT SKOK_21 P=1
N541 SMENA_Z
N542 g0 g55 B270
N543 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N544 AMIRROR X0
N545 REPEAT BOL_SKOK_21 P=1
N546 SMENA_Z
N547 ;ST20: WORK_STEP(20)
N548 ;T="25.2" M6
N549 ;MSG(" T25.2-Razvertka D=32+0.052,WORK_STEP(20) ")
N550 ;************************************************** T25.2
N551 ;G0 g55 B270
N552 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N553 ;REGIME(12,32,10,0.062)
N554 ;___D=27____2_otv.B270(L=100)_na skvoz
N555 ;SKOK_22:G0 G55 X0 Y0 D1
N556 ;Z40 M3 M8
N557 ;MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*3)
N558 ;x0 y0             ;1_otv
N559 ;x0 y66            ;2_otv
N560 ;MCALL
N561 ;G0 Z350
N562 ;ATRANS Y=POM_Y
N563 ;REPEAT SKOK_22 P=1
N564 ;SMENA_Z
N565 END_B270:
N566 SMENA_Z
N567 ; ----------------- RABOTA B90____G56--------
N568 IF R20==0 GOTOF END_B90 
N569 ST21: WORK_STEP(21)
N570 SMENA_Z
N571 G0 G56 G17 G40 G90 G94          ;g56!!!!
N572 T="7.2" M6
N573 MSG("T7.2(2/7) Sverlo centr.D=16<90_gr,WORK_STEP(21) ")
N574 ;***************************************** T17.1
N575 G0 g56 B180
N576 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N577 REGIME(18,20,2,0.09)
N578 ;_______4_otv. na d=11+0.43_______
N579 SKOK_23:G0 G56 X13 Y-27 D1
N580 Z40 M3 M8
N581 MCALL CYCLE82(40,0,zbez,,11.2/2,1)
N582 x13 y-27                ;1_otv
N583 x=13+54 y-27            ;2_otv
N584 x=13+52 y=60-27         ;3_otv
N585 x=13    y=60-27         ;4_otv
N586 MCALL
N587 G0 Z150
N588 ATRANS Y=POM_Y
N589 REPEAT SKOK_23 P=1
N590 SMENA_Z
N591 ;____B90_2+2_otv.+B270_2+2_otv.___na d=32+0.052____
N592 G0 g56 B90
N593 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N594 BOL_SKOK_24:
N595 SKOK_24:G0 G56 X0 Y0 D1
N596 Z40 M3 M8
N597 MCALL CYCLE82(40,0,zbez,,15/2,1)
N598 x0 y0             ;1_otv
N599 x0 y66            ;2_otv
N600 MCALL
N601 G0 Z150
N602 ATRANS Y=POM_Y
N603 REPEAT SKOK_24 P=1
N604 SMENA_Z
N605 g0 g56 B270
N606 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N607 AMIRROR X0
N608 REPEAT BOL_SKOK_24 P=1
N609 SMENA_Z
N610 gbTOCheckAtTC = TRUE 
N611 gbErrMsgOnToCheck = TRUE
N612 ST22: WORK_STEP(22)
N613 SMENA_Z
N614 T="9.1" M6
N615 MSG("T9.1 Sverlo centr.D=8.7<90_gr,WORK_STEP(22) ")
N616 ;**************************************** T4.1
N617 ;____B270_4+4_otv.+B90_4+4_otv.___na d=6.7+0.2____
N618 G0 g56 B270
N619 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N620 REGIME(18,8.7,2,0.1)
N621 WAIT_TO_CHECK
N622 BOL_SKOK_25:
N623 SKOK_25:G0 G56 X16 Y17 D1
N624 Z40 M3 M8
N625 MCALL CYCLE82(40,0,zbez,,8.8/2,1)  ;6.8+1.6*2=10
N626 x16  y17            ;1_otv
N627 x-16 y17            ;2_otv
N628 x-16 y=17+32        ;3_otv
N629 x16  y=17+32        ;4_otv
N630 MCALL
N631 G0 Z150
N632 ATRANS Y=POM_Y
N633 REPEAT SKOK_25 P=1
N634 SMENA_Z
N635 g0 g56 B90
N636 TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N637 AMIRROR X0
N638 REPEAT BOL_SKOK_25 P=1
N639 SMENA_Z
N640 G0 g56 B180
N641 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N642 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)_
N643 SKOK_26:G0 G56 X=13+54 Y=-(27-18) D1
N644 Z40 M3 M8
N645 MCALL CYCLE82(40,0,zbez,,8.5/2,1)
N646 x=13+54 y=-(27-18)     ;1_otv
N647 x=13+30 y=60-27        ;2_otv
N648 MCALL
N649 ;_______2_otv. na d=6+0.3_______
N650 G0 G56 X=13+11 Y=34-27 D1
N651 Z40 M3 M8
N652 MCALL CYCLE82(40,0,zbez,,6.2/2,1)
N653 x=13+11 y=34-27      ;1_otv
N654 x=13+11 y=86-27      ;2_otv
N655 MCALL
N656 G0 Z150
N657 ATRANS Y=POM_Y
N658 REPEAT SKOK_26 P=1
N659 SMENA_Z
N660 gbTOCheckAtTC = TRUE 
N661 gbErrMsgOnToCheck = TRUE
N662 ST23: WORK_STEP(23)
N663 T="15.1" M6
N664 MSG("T15.1 Sverlo D=11+0.43,WORK_STEP(23) ")
N665 ;*******************************************************T4.2
N666 G0 g56 B180
N667 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N668 REGIME(15,11,2,0.1)
N669 WAIT_TO_CHECK
N670 ;_______4_otv. d=11+0.43_______
N671 SKOK_27:G0 G56 X13 Y-27 D1
N672 Z50 M3 M8
N673 MCALL CYCLE83(40,0,zbez,,53,,8,4,,,1,1) 
N674 x13 y-27                ;1_otv
N675 x=13+54 y-27            ;2_otv
N676 x=13+52 y=60-27         ;3_otv
N677 x=13    y=60-27         ;4_otv
N678 MCALL
N679 G0 Z150
N680 ATRANS Y=POM_Y
N681 REPEAT SKOK_27 P=1
N682 SMENA_Z
N683 ST24: WORK_STEP(24)
N684 T="14.1" M6
N685 MSG("T14.1 Sverlo D=8.7+0.36,WORK_STEP(24) ")
N686 ;**************************************************** T2.1
N687 G0 g56 B180
N688 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N689 REGIME(15,8.7,2,0.1)
N690 ;_______2_otv. na d=8.7+0.36_(1_otv_L=25;2_otv_L=31+2.5)
N691 SKOK_28:G0 G56 X=13+54 Y=-(27-18) D1
N692 Z40 M3 M8
N693 CYCLE83(40,0,zbez*1.5,,25,,8,5,,,1,1)
N694 x=13+30 y=60-27   ;2_ot
N695 CYCLE83(40,0,zbez*1.5,,32.25,,8,5,,,1,1)
N696 G0 Z150
N697 ATRANS Y=POM_Y
N698 REPEAT SKOK_28 P=1
N699 SMENA_Z
N700 ST25: WORK_STEP(25)
N701 T="12.2" M6
N702 MSG("T12.2 Sverlo D=6+0.3,WORK_STEP(25) ")
N703 ;**************************************************** T2.2
N704 G0 g56 B180
N705 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N706 REGIME(15,6,2,0.08)
N707 WAIT_TO_CHECK
N708 ;_______2_otv. na d=6+0.3_(2_otv_L=5+2mm)
N709 SKOK_29:G0 G56 X=13+11 Y=34-27 D1
N710 Z40 M3 M8
N711 MCALL CYCLE82(10,0,zbez,,6,0.5)
N712 x=13+11 y=34-27      ;1_otv
N713 x=13+11 y=86-27      ;2_otv
N714 MCALL
N715 G0 Z150
N716 ATRANS Y=POM_Y
N717 REPEAT SKOK_29 P=1
N718 SMENA_Z
N719 ST26: WORK_STEP(26)
N720 T="23.1" M6
N721 MSG("T23.1 Sverlo D=30+0.52,WORK_STEP(26) ")
N722 ;************************************************** T11.1
N723 G0 g56 B90
N724 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N725 REGIME(15,30,2,0.12)
N726 WAIT_TO_CHECK
N727 ;___D=30____2_otv.B90(L=50);2_otv.B270(L=45)_______
N728 R150=50
N729 BOL_SKOK_30:
N730 SKOK_30:G0 G56 X0 Y0 D1
N731 Z40 M3 M8
N732 MCALL CYCLE83(40,0,zbez*2,,r150,,8,5,,,1,1)
N733 x0 y0             ;1_otv
N734 x0 y66            ;2_otv
N735 MCALL
N736 G0 Z150
N737 ATRANS Y=POM_Y
N738 REPEAT SKOK_30 P=1
N739 SMENA_Z
N740 g0 g56 B270
N741 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N742 AMIRROR X0
N743 R150=45
N744 REPEAT BOL_SKOK_30 P=1
N745 SMENA_Z
N746 ST27: WORK_STEP(27)
N747 T="10.2" M6
N748 MSG("T10.2 Zenker D=31.71,WORK_STEP(27) ")
N749 ;************************************************** T14.2
N750 G0 g56 B270
N751 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N752 REGIME(15,31.7,3,0.11)
N753 ;___D=27____2_otv.B270(L=100)_na skvoz
N754 SKOK_113:G0 G56 X0 Y0 D1
N755 Z50 M3 M8
N756 MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*10)
N757 x0 y0             ;1_otv
N758 x0 y66            ;2_otv
N759 MCALL
N760 G0 Z350
N761 ATRANS Y=POM_Y
N762 REPEAT SKOK_113 P=1
N763 SMENA_Z
N764 gbTOCheckAtTC = TRUE 
N765 gbErrMsgOnToCheck = TRUE
N766 ;GOTOF REZEC_3
N767 ;ST28: WORK_STEP(28)
N768 ;T="11.2" M6
N769 ;MSG(" T11.2-REZEC D=31.6+0.15,WORK_STEP(28) ")
N770 ;************************************************** T11.2
N771 ;G0 g56 B270
N772 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N773 ;REGIME(85,31,1,0.12)
N774 ;WAIT_TO_CHECK
N775 ;___D=27____2_otv.B270(L=50);2_otv.B90(L=45)_______
N776 ;R150=50
N777 ;BOL_SKOK_31:
N778 ;SKOK_31:G0 G56 X0 Y0 D1
N779 ;Z40 M3 M8
N780 ;MCALL CYCLE81(40,0,zbez,,r150)
N781 ;x0 y0             ;1_otv
N782 ;x0 y66            ;2_otv
N783 ;MCALL
N784 ;G0 Z150
N785 ;ATRANS Y=POM_Y
N786 ;REPEAT SKOK_31 P=1
N787 ;SMENA_Z
N788 ;g0 g56 B90
N789 ;TRANS X=X_B90 Z=Z_B90 Y=Y_B90          ; B90_!!!
N790 ;AMIRROR X0
N791 ;R150=45
N792 ;REPEAT BOL_SKOK_31 P=1
N793 ;SMENA_Z
N794 ;REZEC_3:
N795 ST29: WORK_STEP(29)
N796 T="9.2" M6
N797 MSG("T9.2 SVERLO D=6.7+0.2,WORK_STEP(29) ")
N798 ;************************************************** T14.1
N799 G0 g56 B90
N800 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N801 REGIME(15,6.7,2,0.1)
N802 BOL_SKOK_32:
N803 SKOK_32:G0 G56 X16 Y17 D1
N804 Z40 M3 M8
N805 MCALL CYCLE81(40,0,zbez,,24.5)  ;6.8+1.6*2=10
N806 x16  y17            ;1_otv
N807 x-16 y17            ;2_otv
N808 x-16 y=17+32        ;3_otv
N809 x16  y=17+32        ;4_otv
N810 MCALL
N811 G0 Z150
N812 ATRANS Y=POM_Y
N813 REPEAT SKOK_32 P=1
N814 SMENA_Z
N815 g0 g56 B270
N816 TRANS X=X_B270 Z=Z_B270 Y=Y_B270          ; B270_!!!
N817 AMIRROR X0
N818 REPEAT BOL_SKOK_32 P=1
N819 SMENA_Z
N820 ;ST30: WORK_STEP(30)
N821 ;T="25.2" M6
N822 ;MSG(" T25.2-Razvertka D=32+0.052,WORK_STEP(30) ")
N823 ;************************************************** T25.2
N824 ;G0 g56 B270
N825 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N826 ;REGIME(12,32,10,0.062)
N827 ;___D=27____2_otv.B270(L=100)_na skvoz
N828 ;SKOK_33:G0 G56 X0 Y0 D1
N829 ;Z40 M3 M8
N830 ;MCALL CYCLE85(250,0,zbez*3,,100,1,R93,R93*3)
N831 ;x0 y0             ;1_otv
N832 ;x0 y66            ;2_otv
N833 ;MCALL
N834 ;G0 Z350
N835 ;ATRANS Y=POM_Y
N836 ;REPEAT SKOK_33 P=1
N837 ;SMENA_Z
N838 END_B90:
N839 SMENA_Z
N840 ;==========================================================
N841 
N842 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N843 ;M0
N844 ;==========================================================
N845 WORK_DONE
N846 GOTOF _ENDE
N847 
N848 ST999:TO_BROKEN
N849  _ENDE:T0 M6
N850 M91
N851 WORK_STEP(0)
N852 ; MSG("*** VSE DOMOY ***")
N853 R98=$AC_TIMER[1]
N854 ;N68 R98=R98/60  ;cycle TIME/MIN
N855 M30
N856 _proverka:
N857 ;*G54/G55/G56* X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N858 $P_UIFR[1]=CTRANS(X,0,Y,0,Z,0,B,0)  ;  G54 B180
N859 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0,B,270);  G55 B270
N860 $P_UIFR[3]=CTRANS(X,0,Y,0,Z,0,B,90) ;  G56 B90
N861 
N862 
N863 ZAG=50-0.2/2      ;49.9 
N864 ZPRIPUSK=0        ;
N865 ZBEZ=3
N866 XBEZ=10
N867 YBEZ=7
N868 ;________________B180 ________________
N869 Y_B180=R50+12+27           ;OS_Y TRANS  Y187(12+2)
N870 POM_Y=(435+12+27)-(R50+12+27);atrans vverxn.detali po os_Y288
N871 X_B180=630/2-R51              ;OS_X TRANS  ;-45
N872 Z_B180=630/2-R52+ZAG          ;OS_Z TRANS  ;315-75+49.9=289.9
N873 ;________________B90 ________________
N874 Y_B90=Y_B180                    ;OS_Y TRANS
N875 X_B90=Z_B180-27                 ;OS_X TRANS ;289.9-27=262.9
N876 Z_B90=ABS(X_B180)               ;OS_Z TRANS ;Z45
N877 ;________________B270 ________________
N878 Y_B270=Y_B180                    ;OS_Y TRANS
N879 X_B270=-X_B90                    ;OS_X TRANS ;-262.9
N880 Z_B270=(90-0.22/2)-ABS(X_B180)   ;OS_Z TRANS ;44.89
N881 Y_B180=Y_B180
N882 
N883 
N884 STOPRE
N885 ;_______2_detali______storona B180____G54_________________
N886 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N887 IF WORKING_STEP<=1  GOTOB ST1 ;T17.1-Sv.centr.D=16<90(4 MIN)
N888  M91 ;poka nezak-ca smena palet 
N889 IF WORKING_STEP==2  GOTOB ST2 ;T4.1-Sv.centr.D=8.7<90(3.10 MIN)
N890 IF WORKING_STEP==3  GOTOB ST3 ;T4.2-sverlo  D=11+0.43(7.40 MIN)
N891 IF WORKING_STEP==4  GOTOB ST4 ;T2.1-sverlo  D=8.7+0.36(1.50 MIN)
N892 IF WORKING_STEP==5  GOTOB ST5 ;T2.2-sverlo  D=6+0.3(0.40 MIN)
N893 IF WORKING_STEP==6  GOTOB ST6 ;T11.1-sverlo  D=30+0.52(12.10 MIN)
N894 IF WORKING_STEP==7  GOTOB ST7 ;T14.2-Zenker   D=31.71(11.50 MIN)
N895 ; IF WORKING_STEP==8  GOTOB ST8 ;T11.2-REZEC   D=31.6+0.15
N896 IF WORKING_STEP==9  GOTOB ST9 ;T14.1-sverlo  D=6.7+0.2(3.50 MIN)
N897; IF WORKING_STEP==10 GOTOB ST10 ;T25.2-Razv-ka D=32+0.052(10 MIN)
N898 ;_______+2_detali______storona B270____G55_______
N899  IF WORKING_STEP==11 GOTOB ST11  ;T17.1-Sv.centr.D=16<90
N900  IF WORKING_STEP==12 GOTOB ST12  ;T4.1-Sv.centr.D=8.7<90
N901  IF WORKING_STEP==13 GOTOB ST13 ;T4.2-sverlo  D=11+0.43
N902  IF WORKING_STEP==14 GOTOB ST14 ;T2.1 D=8.7+0.36
N903  IF WORKING_STEP==15 GOTOB ST15 ;T2.2-sverlo  D=6+0.3
N904  IF WORKING_STEP==16 GOTOB ST16 ;T11.1-sverlo  D=30+0.52
N905  IF WORKING_STEP==17 GOTOB ST17 ;T14.2-Zenker   D=31.71
N906 ; IF WORKING_STEP==18 GOTOB ST18 ;T11.2-REZEC   D=31.6+0.15
N907  IF WORKING_STEP==19 GOTOB ST19 ;T14.1-sverlo  D=6.7+0.2
N908  ;IF WORKING_STEP==20 GOTOB ST20 ;T25.2-Razvertka D=32+0.052
N909 ;_____+2_detali______storona B90_______G56______
N910  IF WORKING_STEP==21 GOTOB ST21 ;T17.1-Sv.centr.D=16<90
N911  IF WORKING_STEP==22 GOTOB ST22 ;T4.1-Sv.centr.D=8.7<90
N912  IF WORKING_STEP==23 GOTOB ST23 ;T4.2-sverlo  D=11+0.43
N913  IF WORKING_STEP==24 GOTOB ST24 ;T2.1-sverlo  D=8.7+0.36
N914  IF WORKING_STEP==25 GOTOB ST25 ;T2.2-sverlo  D=6+0.3
N915  IF WORKING_STEP==26 GOTOB ST26 ;T11.1-sverlo  D=30+0.52
N916  IF WORKING_STEP==27 GOTOB ST27 ;T14.2-Zenker   D=31.71
N917 ; IF WORKING_STEP==28 GOTOB ST28 ;T11.2-REZEC   D=31.6+0.15
N918  IF WORKING_STEP==29 GOTOB ST29 ;T14.1-sverlo  D=6.7+0.2
N919 ; IF WORKING_STEP==30 GOTOB ST30 ;T25.2-Razvertka D=32+0.052
N920  IF WORKING_STEP==999  GOTOB ST999
N921 ENDIF
N922 
N923 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N924 M0
N925 GOTOB AA
N926 GOTOB START_1
N927 ; NE UDOLAYT VSE RABOTAET
N928 
