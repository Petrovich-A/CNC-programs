N1 ;detal 7556-1712212 korpus zolotnikov 
N2 ;OPER 70 ---- YSTANOV I ----B0/B90-----G55-------
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;KOZAKEVICH D.O          10.03.11
N5 ;KOPTUAEV S.G (T8.1 KOMBIN SV=8.5_L=28/CEKOVKA_D=28)
N6 ;19.12.2012
N7 ;TC=23.33_MIN
N8 DEF REAL POM_Y,FUS=2000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B0,X_B0,Z_B0,Y_B90,X_B90,Z_B90,TF,TS,dpr,kp,zzbez 
N9 DEFINE SMENA_Z AS g0 g53 z930 d0 M9 m5 
N10 $AC_TIMER[1]=0  ;cikl starta time/min
N11 ;Nastroi priladi, USTANOV_1*R100(OS_X) R200(OS_Y) R300(OS_Z)**
N12 R100=179.442 ;BILO 179.442 ;OS_X 180+/-0.02 YSTANOV I
N13 R200=140  ;BILO 140    ;OS_Y 140+/-0.2  YSTANOV I
N14 R300=150      ;OS_Z 150+/-0.02 YSTANOV I
N15 ;***********************************
N16 GOTOF _proverka
N17 START_1:
N18 ; ********rabota*********G55*****YSTANOV I****
N19 ST1: WORK_STEP(1)
N20 SMENA_Z
N21 G0 G55 G17 G40 G90 G94          ;g55!!!!
N22 T6 M6
N23 MSG("T6(1/1) FREZA chern.D=40,WORK_STEP(1) ")
N24 R1=40/2  ;rad.frezi
N25 ;************************************************ T01
N26 G0 g55 B0
N27 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N28 REGIME(110,40,3,0.047)
N29 X-212 Y-39 D1 M3
N30 Z3 M8
N31 G1 Z-9.5 F=r93*1.5
N32 X-181 F=r93
N33 G0 Z3
N34 X-212 Y-126
N35 G1 Z-9.5 F=r93*1.5
N36 X-181 F=r93
N37 g0 z50
N38 ;x124 y-97    ;ANAJ
N39 ;z-8          ;ANAJ
N40 ;g1 x87 f=r93 ;ANAJ
N41 ;g0 z30 m9    ;ANAJ
N42 SMENA_Z
N43 ST2: WORK_STEP(2)
N44 T7 M6
N45 MSG("T7(1/2)SVERLO d=16/90(CENTR) ,WORK_STEP(2) ")
N46 ;*************************************************** T07
N47 G0 g55 B0
N48 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N49 REGIME(19,16,2,0.1)
N50 G0 G55 X116 Y-21  D1 M3
N51 MCALL CYCLE82(5,0,zbez,,6.6,1)
N52 X116 Y-21 M8
N53 X58 Y-39
N54 X-116 Y-139
N55 X-174 Y-126
N56 MCALL
N57 MCALL CYCLE82(5,0,zbez,,3.1,1)
N58 X-11.1 Y-109
N59 X-0 Y-77
N60 MCALL
N61 X18 Y-104
N62 CYCLE82(5,0,zbez,,4.2,1)
N63 ; X87 Y-165
N64 ; CYCLE82(5,0,zbez,,5.25,1)
N65 ;x87 y-97                   ;ANAJ
N66 ;CYCLE82(5,0,zbez,,13.25,1) ;ANAJ
N67 x-145 y-110
N68 ;NCG#CYC82#BOHREN.COM#NC1#2#*NCG;*RO*;*HD*
N69 ;#1#1#4##1###"M3"##1##2##1#*NCG;*RO*;*HD*
N70 CYCLE82(5,0,ZBEZ,,7,1)
N71 ;#END#*NCG;*RO*;*HD*
N72 MCALL CYCLE82(12.5,-9.5,zbez,,6.6,1)
N73 x-174 y-126
N74 ;y-39
N75 MCALL
N76 SMENA_Z
N77 gbTOCheckAtTC = TRUE 
N78 gbErrMsgOnToCheck = TRUE
N79 ST3: WORK_STEP(3)
N80 T="15.1" M6
N81 MSG("T15.1(1/15)SVERLO d=11,POD 4 PALCA NA D=13+0.035 ,WORK_STEP(3) ")
N82 ;*************************************************** T8
N83 G0 g55 B0
N84 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N85 REGIME(18,11,2,0.08)
N86 WAIT_TO_CHECK 
N87 G0 G55 X58 Y-39 D1 M3
N88 MCALL  CYCLE81(7,0,7,,42) ;CYCLE83(7,0,7,,42,,15,10,0,0,1,1)
N89 X58 Y-39 M8
N90 X116 Y-21
N91 X-116 Y-139
N92 X-174 Y-126
N93 MCALL
N94 G0 Z300 M9
N95 SMENA_Z
N96 ST4: WORK_STEP(4)
N97 T9 M6
N98 MSG("T9(1/16) ZENKER d=12.7*POD 4 PALCA NA D=13+0.035* ,WORK_STEP(4) ")
N99 ;*************************************************** T6
N100 G0 g55 B0
N101 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N102 REGIME(13,12.7,3,0.09)
N103 G0 G55 X-116 Y-139 D1 M3
N104 Z7 M8
N105 G1 Z-37 F=r93
N106 Z7 F=r93*4
N107 G0 X-174 Y-126
N108 G1 Z-37 F=r93
N109 Z7 F=r93*4
N110 G0 X58 Y-39
N111 G1 Z-37 F=r93
N112 Z7 F=r93*4
N113 G0 X116 Y-21
N114 G1 Z-37 F=r93
N115 Z7 F=r93*4
N116 G0 Z30 M9
N117 SMENA_Z
N118 ST5: WORK_STEP(5)
N119 T10 M6
N120 MSG("T10(2/15)RAZVERTKA D=13+0.035 ,WORK_STEP(5) ")
N121 ;*************************************************** T10
N122 G0 g55 B0
N123 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N124 REGIME(13,13,6,0.027)
N125 G0 G55 X58 Y-39 D1 M3    ;X58 Y-39
N126 Z12 M8
N127 G1 Z-35 F=r93
N128 Z12 F=r93*4
N129 G0 X116 Y-21
N130 G1 Z-35 F=r93
N131 Z12 F=r93*4
N132 G0 X-116 Y-139
N133 G1 Z-35 F=r93
N134 Z12 F=r93*4
N135 G0 X-174 Y-126
N136 G1 Z-35 F=r93
N137 Z12 F=r93*4
N138 G0 Z30 M9
N139 SMENA_Z
N140 ST6: WORK_STEP(6)
N141 T52 M6
N142 MSG("T52(2/16) RAZVERTKA D=13.2+0.035 na 2_otv,WORK_STEP(6)")
N143 ;*************************************************** T52
N144 G0 g55 B0
N145 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N146 REGIME(13,13.2,6,0.027)
N147 G0 G55 X116 Y-21 D1 M3  ;2
N148 Z12 M8
N149 G1 Z-35 F=r93
N150 Z12 F=r93*4
N151 G0 X-174 Y-126           ;4
N152 G1 Z-35 F=r93
N153 Z12 F=r93*4
N154 g0 z30 m9
N155 SMENA_Z
N156 ;*******************************************************
N157 ST7: WORK_STEP(7)
N158 T59 M6
N159 MSG("T59(2/6)FREZA d=10 ,WORK_STEP(7) ")
N160 ;*************************************************** T59
N161 G0 g55 B0
N162 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N163 REGIME(90,10,4,0.06)
N164 G0 G55 X58 Y-79  D1 M3
N165 ;m8
N166 POCKET2(25,-(18+2),zbez*3,,3,7,58,-79,R93,R93,3,2,0,2)
N167 SMENA_Z
N168 gbTOCheckAtTC = TRUE 
N169 gbErrMsgOnToCheck = TRUE
N170 ;******************************************************
N171 ST8: WORK_STEP(8)
N172 T54 M6
N173 MSG("T54(1/17)SVERLO d=16/90(CENTR) ,WORK_STEP(8) ")
N174 ;*************************************************** T54
N175 G0 g55 B0
N176 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N177 REGIME(19,16,2,0.06)
N178 G0 G55 X58 Y-79  D1 M3
N179 m8
N180 CYCLE82(25,-(18+2),zbez*3,,7,1)
N181 SMENA_Z
N182 
N183 ST9: WORK_STEP(9)
N184 T="3.1" M6
N185 MSG("T3.1(1/3) SVERLO D=13+0.27 ,WORK_STEP(9) ")
N186 ;*************************************************** T11
N187 G0 g55 B0
N188 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N189 REGIME(21,13,2,0.075)
N190 WAIT_TO_CHECK 
N191 G0 G55 X58 Y-79 D1 M3 M8
N192 x58 y-79                                 ;nov!!!!!!
N193 CYCLE83(25,-18,9,,50-21.7,,15,10,0,0,1,1)  ;nov!!!!!!
N194 G0 Z30 M9
N195 SMENA_Z
N196 ST10: WORK_STEP(10)
N197 T="4.1" M6
N198 MSG("T4.1(1/4) SVERLO D=6**NA,L=8+1.WORK_STEP(10)")
N199 ;*************************************************** T12
N200 G0 g55 B0
N201 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N202 REGIME(16,6,2,0.073)
N203 G0 G55 X-11.1 Y-109 m8 D1 M3
N204 CYCLE82(5,0,5,,8,1)
N205 G0 G55 X-0 Y-77 m8 D1 M3
N206 CYCLE83(5,0,5,,50.5,,15,10,0,0,1,1)
N207 SMENA_Z
N208 ST11: WORK_STEP(11)
N209 T="13.2" M6
N210 MSG("T13.2(2/13)SVERLO D=10.8* L=17 D=10.7+0.2.WORK_STEP(11)")
N211 ;*************************************************** T13
N212 G0 g55 B0
N213 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N214 REGIME(21,10.8,2,0.073)
N215 G0 G55 X-145 Y-110 D1 M3
N216 Z8 M8
N217 G1 Z-17 F=r93
N218 G0 Z30 M9
N219 SMENA_Z
N220 ST12: WORK_STEP(12)
N221 T="8.1" M6
N222 MSG("T8.1 KOMBIN D1=SV=8.5_L=28/D2=CEKOVKA_D=28*WORK_STEP(12)")
N223 ;*************************************************** T8.1
N224 G0 g55 B0
N225 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N226 REGIME(130,28,2,0.07)    ;D2=CEKOVKA_D=28
N227 G0 G55 X87 Y-97 D2 M3    ;D2  
N228 M7
;NCG#CYC82#BOHREN.COM#NC1#2#*NCG;*RO*;*HD*
;#2#4#5##1###"M3"##3##2##1#*NCG;*RO*;*HD*
N229 CYCLE82(70,-6.5,13+28,,0.5,1)
;#END#*NCG;*RO*;*HD*
N230 REGIME(80,8.5,2,0.11)   ;D1=SV=8.5_L=28
N231 G0 G55 X-0 Y-77 m7 D1 M3  
;NCG#CYC82#BOHREN.COM#NC1#2#*NCG;*RO*;*HD*
;#2#1#2##1###"M3"##4##2##1#*NCG;*RO*;*HD*
N232 CYCLE82(25,0,12,,16.5,0)
;#END#*NCG;*RO*;*HD*
N233 SMENA_Z
N234 ST13: WORK_STEP(13)
N235 T4 M6
N236 MSG("T4(1/5)SVERLO D=8****NA L=26 .WORK_STEP(13) ")
N237 ;*************************************************** T4
N238 G0 g55 B0
N239 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N240 REGIME(18,8,2,0.073)
N241 G0 G55 X18 Y-104 D1 M3
N242 M8
N243 CYCLE82(5,0,5,,26,1)
N244 SMENA_Z
N245 ST14: WORK_STEP(14)
N246 T15 M6
N247 MSG("T15(2/5)CEKOVKA D=26*L=58-0.46 D=26+0.52*WORK_STEP(14)")
N248 ;*************************************************** T15
N249 G0 g55 B0
N250 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N251 REGIME(20,26,4,0.045)
N252 G0 G55 X-174 Y-39 D1 M3
N253 MCALL CYCLE82(5,0,zbez,,10,1)
N254 X-174 Y-39 M8
N255 Y-126
N256 MCALL
N257 G0 Z40 M9
N258 SMENA_Z
N259 ST15: WORK_STEP(15)
N260 T58 M6
N261 MSG("T58(1/13) FREZA D=8(4_zub)L=10.5+/-0.215,WORK_STEP(15)")
N262 R1=8/2  ;rad.frezi
N263 ;************************************************ T53
N264 G0 g55 B0
N265 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N266 REGIME(70,8,4,0.05)
N267 X18 Y-104 D1 M3
N268 Z5 ;M8
N269 g1 z0 f=fus
N270 DPR=10.5 KP=3 zzbez=dpr+zbez*2
N271 fr_8:G1Z=IC(-DPR/KP) F=r93*2
N272 Y-152 F=r93
N273 g0 z=ic(zzbez)
N274 Y-104
N275 g1 z=ic(-zzbez) f=fus/2
N276 REPEAT fr_8 P=KP-1
N277 g0 z50 m9
N278 SMENA_Z
N279 ST16: WORK_STEP(16)
N280 T="8.1" M6
N281 MSG("T8.1 KOMBIN D1=SV=8.5_L=28/D2=CEKOVKA_D=28,WORK_STEP(16) ")
N282 ;************************************************ T8.1
N283 G0 g55 B90
N284 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N285 REGIME(80,8.5,2,0.11)   ;D1=SV=8.5_L=28
N286 X-37 Y-123 D1 M3 
N287 Z12 M7
N288 G1 Z-15 F=r93
N289 REGIME(130,28,2,0.07)    ;D2=CEKOVKA_D=28
N290 G1 Z=0 F=r93 D2
N291 G0 Z40 M9
N292 SMENA_Z
N293 ;==========================================================
N294 
N295 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N296 ;M0
N297 ;==========================================================
N298 WORK_DONE
N299 GOTOF _ENDE
N300 
N301 ST999:TO_BROKEN
N302  _ENDE:T6 M6
N303 M91
N304 WORK_STEP(0)
N305 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N306 R98=$AC_TIMER[1]
N307 ;N68 R98=R98/60  ;cycle TIME/MIN
N308 M30
N309 _proverka:
N310 ;_______1_detal___storona B0/B90____G55_______
N311 ;*G55-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N312 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0,B,180);  G55 B0
N313 
N314 
N315 ZBEZ=3    ;BILO 3
N316 XBEZ=10   ;BILO 10
N317 YBEZ=7    ;BILO 7
N318 ;_______B0 __TRANS ___!!pripusk na oba torca 2.6
N319 Y_B0=r200+177.8+2.6    ;OS_Y TRANS y=140+177.8+(183-177.8)/2=320.4  
N320 X_B0=r100-(14+116)     ;OS_X TRANS ;bilo 180-14-116=50
N321 Z_B0=r300+67.775       ;OS_Z TRANS 150+67.775=217.775 (67.8-0.05)
N322 ;_______B90 __________________________!!!!!
N323 Y_B90=Y_B0                 ;OS_Y TRANS
N324 X_B90=-(Z_B0-67.775)       ;OS_X TRANS ;
N325 Z_B90=168.958-2            ;OS_Z TRANS ;2_UST(205-3.15+16.55-49.442) 
N326 
N327 
N328 STOPRE
N329 ;**************************YSTANOV I**********
N330 ;*poraydok obrabotki***metka***magazin/gnezdo***NALADKA INSTRUMENTA******
N331  IF WORKING_STEP<=1   GOTOB ST1  ;T6(1/1) -FREZA D=40
N332  M91 ;poka nezak-ca cmena palet 
N333  IF WORKING_STEP==2   GOTOB ST2  ;T7(1/2)-SVERLO 16/90(CENTR)
N334  IF WORKING_STEP==3   GOTOB ST3  ;T8(1/15)-SVERLO D=11
N335  IF WORKING_STEP==4   GOTOB ST4  ;T9(1/16) ZENKER d=12.7
N336  IF WORKING_STEP==5   GOTOB ST5  ;T10(2/15)RAZVERTKA D=13
N337  IF WORKING_STEP==6   GOTOB ST6  ;T52(2/16)RAZVERTKA D=13.2
N338  IF WORKING_STEP==7  GOTOB ST7 ;T59(2/6) FREZA D=10
N339  IF WORKING_STEP==8   GOTOB ST8  ;T54(1/17)SVERLO d=16/90(CENTR) uslov.trudnie
N340  IF WORKING_STEP==9  GOTOB ST9 ;T11(1/3) SVERLO D=13+0.27
N341  IF WORKING_STEP==10   GOTOB ST10  ;T12(1/4) SVERLO D=6*
N342  IF WORKING_STEP==11  GOTOB ST11 ;T13(2/13) SVERLO D=10.8
N343  IF WORKING_STEP==12  GOTOB ST12 ;T14(2/14)SVERLO D=8.3
N344  IF WORKING_STEP==13  GOTOB ST13 ;T4(1/5)SVERLO D=8 L=26
N345  IF WORKING_STEP==14  GOTOB ST14 ;T15(2/15) CEKOVKA D=26**
N346  IF WORKING_STEP==15  GOTOB ST15 ;T58(1/13) FREZA D=8(2_zub)
N347  IF WORKING_STEP==16  GOTOB ST16 ;T8.1 KOMBIN D1=SV=8.5_L=28/D2=CEKOVKA_D=28  0.5_MIN.
N348  IF WORKING_STEP==999  GOTOB ST999
N349 ENDIF
N350 
N351 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N352 M0
N353 GOTOB AA
N354 GOTOB START_1
N355 ; NE UDOLAYT VSE RABOTAET
N356 
