N1 ;detal 7556-1712212 korpus zolotnikov 
N2 ;OPER 120 ******YSTANOV III****B0/B180/B270***G57*******
N3 ;STANOK nbh-6 INV 12506
N4 ;KOZAKEVICH D.O.          18.04.11
N5 ;TC=27_MIN
N6 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N7 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N8 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 m9
N9 $AC_TIMER[1]=0  ;cikl starta time/min
N10 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N11 R40=315-257.01            ;OS_X  YSTANOV 3 X=315-257(257.72)
N12 R50=175                   ;OS_Y  YSTANOV 3
N13 R61=-315+365.09           ;OS_Z  YSTANOV 3 !!!B180!!!
N14 R60=100-R61               ;OS_Z  YSTANOV 3 !!!B0!!!
N15 GOTOF _proverka
N16 START_1:
N17 ; ********rabota*********G57*****
N18 ST1: WORK_STEP(1)
N19 SMENA_Z
N20 G0 G57 G17 G40 G90 G94          ;g57!!!!
N21 T29 M6
N22 MSG("T29(1/21) FREZA D=125,WORK_STEP(1) ")
N23 ;************************************************ T29
N24 G0 g57 B0
N25 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N26 REGIME(80,125,7,0.127)
N27 G0 G56 X-148 Y137 D1 M3 
N28 Z0.5
N29 G1 Y30 F=r93 M8
N30 X71
N31 SMENA_Z
N32 G0 G57 B180
N33 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N34 G0 X-73 Y137 D1 M3 
N35 Z0.5
N36 G1 Y30 F=r93 M8
N37 X135
N38 SMENA_Z
N39 ST2: WORK_STEP(2)
N40 T6 M6
N41 MSG("T6(1/1)FREZA D=40,WORK_STEP(2)")
N42 ;*************************************************** T6
N43 G0 g57 B270
N44 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N45 REGIME(110,40,3,0.06)
N46 G0 G57 X0 Y85 D1 M3
N47 Z0
N48 G1 Y38 F=r93
N49 G0 Z40
N50 SMENA_Z
N51 ST3: WORK_STEP(3)
N52 T7 M6
N53 MSG("T7(1/2) SVERLO D=16<90 ,WORK_STEP(3)")
N54 ;*************************************************** T7
N55 G0 g57 B270
N56 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N57 REGIME(26,16,2,0.073)
N58 G0 G57 X0 Y35 D1 M3
N59 Z33 M8
N60 CYCLE82(33,0,3,,7,1)
N61 SMENA_Z
N62 gbTOCheckAtTC = TRUE 
N63 gbErrMsgOnToCheck = TRUE
N64 ST4: WORK_STEP(4)
N65 T34 M6
N66 MSG("T34(2/20) SVERLO D=23**POD K=3/4* ,WORK_STEP(4)")
N67 ;*************************************************** T34
N68 G0 g57 B270
N69 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N70 REGIME(22,23,2,0.075)
N71 WAIT_TO_CHECK 
N72 G0 G57 X0 Y35 D1 M3
N73 Z11 M8
N74 CYCLE83(11,0,11,,98,,15,10,0,0,1,1)
N75 SMENA_Z
N76 ST5: WORK_STEP(5)
N77 T35 M6
N78 MSG("T35(1/22) RAZVERTKA K=3/4,WORK_STEP(5)")
N79 ;*************************************************** T35
N80 G0 g57 B270
N81 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N82 REGIME(9,23,5,0.04)
N83 G0 G57 X0 Y35 D1 M3 
N84 Z6 M8
N85 CYCLE82(6,0,6,,23,1)
N86 SMENA_Z
N87 ST6: WORK_STEP(6)
N88 T36 M6
N89 MSG("T36(2/22) zenkovka d=10/90 ,WORK_STEP(6)")
N90 ;*************************************************** T36
N91 G0 g57 B270
N92 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N93 REGIME(32,10,4,0.038)
N94 G0 G57 X0 Y35 D1 M3  
N95 Z3 M8
N96 G1 Z-7 F=r93
N97 G1 G42 X6.85 Y35
N98 G2 X6.85 Y35 I=AC(0) J=AC(35) F=r93
N99 G1 G40 X0 Y35
N100 G0 Z40 m9
N101 SMENA_Z
N102 ST7: WORK_STEP(7)
N103 T37 M6
N104 MSG("T37(1/8) METCIK K=3/4 ,WORK_STEP(7)")
N105 ;*************************************************** T37
N106 G0 g57 B270
N107 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N108 ;REGIME(6,24.9,1,1.814)  s76.70 f=139.13
N109 G0 G57 X0 Y35 D1 S71 F129 M3   
N110 Z10 M8
N111 CYCLE840(10,0,10,,24,1,4,3,1)
N112 SMENA_Z
N113 ST8: WORK_STEP(8)
N114 T62 M6
N115 MSG("T62(2/21)FREZA D=125/CH****L=178-0.4* ,WORK_STEP(8)")
N116 ;*************************************************** T58
N117 G0 G57 B180
N118 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N119 REGIME(120,125,8,0.085)
N120 G0 G57 X-73 Y137 D1 M3 
N121 Z0 M8
N122 G1 Y22 F=r93
N123 X132
N124 Y137
N125 G0 Z40
N126 SMENA_Z
N127 G0 g57 B0
N128 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N129 G0 G57 X-145 Y137 D1 M3  
N130 Z0 M8
N131 G1 Y22 F=r93
N132 X71
N133 Y137
N134 G0 Z40 M9
N135 SMENA_Z
N136 ST9: WORK_STEP(9)
N137 T7 M6
N138 MSG("T7(1/2)SVERLO D=16<90 ,WORK_STEP(9)")
N139 ;*************************************************** T7
N140 G0 G57 B180
N141 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N142 REGIME(26,16,2,0.073)
N143 G0 G57 X-116 Y12 D1 M3
N144 MCALL CYCLE82(3,0,3,,5,1)  ;bilo z=2.5 na 7648
N145 X-116 Y12 M8 
N146 X0
N147 X116
N148 Y48
N149 X0
N150 X-116
N151 MCALL
N152 Y15 X177
N153 G1 Z-6.7 F=r93
N154 g0 z40 m9
N155 SMENA_Z
N156 G0 g57 B0
N157 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N158 G0 G57 Y12 X-159 D1 M3
N159 MCALL CYCLE82(3,0,3,,5,1)   ;bilo z=2.5 na 7648
N160 Y12 X-159 M8 
N161 X-116
N162 X0
N163 X116
N164 Y48
N165 X0
N166 X-116
N167 X-174
N168 MCALL
N169 Y10 X-188
N170 CYCLE82(3,0,3,,5.3,1)
N171 Y60 X-14
N172 CYCLE82(3,0,3,,5.6,1)
N173 SMENA_Z
N174 gbTOCheckAtTC = TRUE 
N175 gbErrMsgOnToCheck = TRUE
N176 ST10: WORK_STEP(10)
N177 T44 M6
N178 MSG("T44(1/12)VERLO D=6.8*D=6.7+0.2*L=25-1.0,WORK_STEP(10)")
N179 ;*************************************************** T44
N180 G0 G57 B0
N181 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N182 REGIME(18,6.8,2,0.072)
N183 WAIT_TO_CHECK 
N184 G0 G57 X116 Y12 D1 M3
N185 MCALL CYCLE81(5,0,5,,24.5)
N186 Y12 X116 M8 
N187 X0
N188 X-116
N189 X-159
N190 Y48 X-174
N191 X-116
N192 X0
N193 X116
N194 MCALL
N195 G0 Z40 M9
N196 SMENA_Z
N197 G0 G57 B180
N198 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N199 G0 g57 y12 X116 D1 M3
N200 MCALL CYCLE81(5,0,5,,24.5)
N201 Y12 X116 M8 
N202 X0
N203 X-116
N204 Y48
N205 X0
N206 X116
N207 MCALL
N208 SMENA_Z
N209 ST11: WORK_STEP(11)
N210 T16 M6
N211 MSG("T16(2/7)SVERLO D=10.2*-------------  ,WORK_STEP(11)")
N212 ;*************************************************** T16
N213 G0 G57 B180
N214 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N215 REGIME(19,10.2,2,0.076)
N216 G0 g57 y15 X177 D1 M3   
N217 Z6 M8
N218 G1 Z-29.5 F=r93 
N219 G0 Z40 M9
N220 SMENA_Z
N221 ST12: WORK_STEP(12)
N222 T8 M6
N223 MSG("T8(1/15)SVERLO D=11---------- ,WORK_STEP(12)")
N224 ;*************************************************** T8
N225 G0 G57 B0
N226 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N227 REGIME(19,11,2,0.069)
N228 G0 g57 y60 X-14 D1 M3 
N229 Z7 M8
N230 G1 Z-5.6 F=r93
N231 G0 Z40 M9
N232 SMENA_Z
N233 ST13: WORK_STEP(13)
N234 T14 M6
N235 MSG("T14(2/14) SVERLO D=8.5------------ ,WORK_STEP(13)")
N236 ;*************************************************** T14
N237 G0 G57 B0
N238 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N239 REGIME(19,8.5,2,0.071)
N240 G0 g57 y60 X-14 D1 M3  
N241 Z5 M8
N242 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1) ; bilo z=112.7 na 7648
N243 y10 x-188
N244 g1 z-16.5 f=r93
N245 g0 z40 m9
N246 SMENA_Z
N247 ST14: WORK_STEP(14)
N248 T46 M6
N249 MSG("T46(2/12) SVERLO D=6/DL*---------,WORK_STEP(14)")
N250 ;*************************************************** T46
N251 G0 G57 B0
N252 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N253 REGIME(15,6,2,0.076)
N254 G0 G57 X-188 Y10 D1 M3  
N255 Z5 M8
N256 CYCLE83(5,0,5,,77.5,,20,10,0,0,1,1)
N257 SMENA_Z
N258 ;==========================================================
N259 
N260 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N261 ;M0
N262 ;==========================================================
N263 WORK_DONE
N264 GOTOF _ENDE
N265 
N266 ST999:TO_BROKEN
N267  _ENDE:T0 M6
N268 M91
N269 WORK_STEP(0)
N270 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N271 R98=$AC_TIMER[1]
N272 ;N68 R98=R98/60  ;cycle TIME/MIN
N273 M30
N274 
N275 _proverka:
N276 ;____3_ustanov___detal___storona B0/B180/B270____G57______
N277 ;*G57-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N278 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N279 ;N-PRISP.(7274-6070)
N280 ;NA PRISP.(7274-6070-22) R22=0
N281 ZBEZ=3
N282 XBEZ=10
N283 YBEZ=7 
N284 R22=0 
N285 ;______B0 __TRANS __________________     ;B0!!!L5!!
N286 Y_B0=R50                ;OS_Y TRANS  
N287 X_B0=-174+R40+116       ;OS_X TRANS bilo x=-174+57.857+116 (X-0.143) B0
N288 Z_B0=R60+38.9             ;OS_Z TRANS bilo z=50+39-0.15=88.85
N289 ;_____B180__TRANS______________________   ;B180!!L16!!!
N290 Y_B180=Y_B0             ;OS_Y TRANS
N291 X_B180=174-R40-116      ;OS_X TRANS; bilo x=174-57.857-116 (x+0.143) B180
N292 Z_B180=R61+38.9           ;OS_Z TRANS   ; bilo Z=50+39+0.05=89.05
N293 ;_____B270-TRANS X-10.95 Z=184.5 ;Z=186.5     ;B270!!L7!!
N294 Y_B270=Y_B0                 ;OS_Y TRANS ;
N295 X_B270=78-Z_B180            ;OS_X TRANS ; bilo X-10.95
N296 Z_B270=116+69+1.5           ;OS_Z TRANS ; bilo Z=186.5
N297 
N298 STOPRE
N299 ;**************************YSTANOV 3**********
N300 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N301  IF WORKING_STEP==0   GOTOF CHECK_1
N302  IF WORKING_STEP<=1   GOTOB ST1  ;T29(1/21)FREZA D=125/chern.
N303  M91 ;poka nezak-ca cmena palet 
N304  IF WORKING_STEP==2   GOTOB ST2  ;T6(1/1)FREZA D=40
N305  IF WORKING_STEP==3   GOTOB ST3  ;T7(1/2) SVERLO D=16<90
N306  IF WORKING_STEP==4   GOTOB ST4  ;T34(2/20)SV. D=23**K=3/4
N307  IF WORKING_STEP==5   GOTOB ST5  ;T35(1/22) RAZVERTKA K=3/4
N308  IF WORKING_STEP==6   GOTOB ST6  ;T36(2/22) zenkovka d=10/90
N309  IF WORKING_STEP==7   GOTOB ST7  ;T37(1/8) METCIK K=3/4
N310  IF WORKING_STEP==8  GOTOB ST8 ;T62(2/21)FR.D=125/L=178-0.4
N311  IF WORKING_STEP==9  GOTOB ST9 ;T7(1/2)SVERLO D=16<90
N312  IF WORKING_STEP==10  GOTOB ST10 ;T44(1/12)VERLO D=6.8
N313  IF WORKING_STEP==11  GOTOB ST11 ;T16(2/7)SVERLO D=10.2*
N314  IF WORKING_STEP==12  GOTOB ST12 ;T8(1/15)SVERLO D=11
N315  IF WORKING_STEP==13  GOTOB ST13 ;T14(2/14) SVERLO D=8.5
N316  IF WORKING_STEP==14  GOTOB ST14 ;T46(2/12) SVERLO D=6/DL*
N317  IF WORKING_STEP==999  GOTOB ST999
N318 ENDIF
N319 
N320 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N321 M0
N322 GOTOB AA
N323 CHECK_1:
N324 GOTOB START_1
N325 ; NE UDOLAYT VSE RABOTAET
