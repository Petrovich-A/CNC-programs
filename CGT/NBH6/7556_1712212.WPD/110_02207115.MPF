N1 ;detal 7556-1712212 korpus zolotnikov 
N2 ;OPER 70 ---- YSTANOV I ----B0/B90-----G55-------
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;KOZAKEVICH D.O          10.03.11
N5 ;TC=23.33_MIN
N6 DEF REAL POM_Y,FUS=2000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B0,X_B0,Z_B0,Y_B90,X_B90,Z_B90,TF,TS,dpr,kp,zzbez 
N7 DEFINE SMENA_Z AS g0 g53 z930 d0 M9 m5 
N8 $AC_TIMER[1]=0  ;cikl starta time/min
N9 ;Nastroi priladi, USTANOV_1*R100(OS_X) R200(OS_Y) R300(OS_Z)**
N10 R100=177.442 ;BILO 179.442 ;OS_X 180+/-0.02 YSTANOV I
N11 R200=140  ;BILO 140    ;OS_Y 140+/-0.2  YSTANOV I
N12 R300=150      ;OS_Z 150+/-0.02 YSTANOV I
N13 ;***********************************
N14 GOTOF _proverka
N15 START_1:
N16 ; ********rabota*********G55*****YSTANOV I****
N17 ST1: WORK_STEP(1)
N18 SMENA_Z
N19 G0 G55 G17 G40 G90 G94          ;g55!!!!
N20 T6 M6
N21 MSG("T6(1/1) FREZA chern.D=40,WORK_STEP(1) ")
N22 R1=40/2  ;rad.frezi
N23 ;************************************************ T01
N24 G0 g55 B0
N25 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N26 REGIME(110,40,3,0.047)
N27 X-212 Y-39 D1 M3
N28 Z3 M8
N29 G1 Z-9.5 F=r93*1.5
N30 X-181 F=r93
N31 G0 Z3
N32 X-212 Y-126
N33 G1 Z-9.5 F=r93*1.5
N34 X-181 F=r93
N35 g0 z50
N36 x124 y-97
N37 z-8
N38 g1 x87 f=r93
N39 g0 z30 m9
N40 SMENA_Z
N41 ST2: WORK_STEP(2)
N42 T7 M6
N43 MSG("T7(1/2)SVERLO d=16/90(CENTR) ,WORK_STEP(2) ")
N44 ;*************************************************** T07
N45 G0 g55 B0
N46 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N47 REGIME(19,16,2,0.1)
N48 G0 G55 X116 Y-21  D1 M3
N49 MCALL CYCLE82(5,0,zbez,,6.6,1)
N50 X116 Y-21 M8
N51 X58 Y-39
N52 X-116 Y-139
N53 X-174 Y-126
N54 MCALL
N55 MCALL CYCLE82(5,0,zbez,,3.1,1)
N56 X-11.1 Y-109
N57 X-0 Y-77
N58 MCALL
N59 X18 Y-104
N60 CYCLE82(5,0,zbez,,4.2,1)
N61 ; X87 Y-165
N62 ; CYCLE82(5,0,zbez,,5.25,1)
N63 x87 y-97
N64 CYCLE82(5,0,zbez,,13.25,1)
N65 x-145 y-110
N66 ;NCG#CYC82#BOHREN.COM#NC1#2#*NCG;*RO*;*HD*
N67 ;#1#1#4##1###"M3"##1##2##1#*NCG;*RO*;*HD*
N68 CYCLE82(5,0,ZBEZ,,6,1)
N69 ;#END#*NCG;*RO*;*HD*
N70 MCALL CYCLE82(12.5,-9.5,zbez,,6.6,1)
N71 x-174 y-126
N72 ;y-39
N73 MCALL
N74 SMENA_Z
N75 gbTOCheckAtTC = TRUE 
N76 gbErrMsgOnToCheck = TRUE
N77 ST3: WORK_STEP(3)
N78 T="15.1" M6
N79 MSG("T8(1/15)SVERLO d=11,POD 4 PALCA NA D=13+0.035 ,WORK_STEP(3) ")
N80 ;*************************************************** T8
N81 G0 g55 B0
N82 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N83 REGIME(18,11,2,0.08)
N84 WAIT_TO_CHECK 
N85 G0 G55 X58 Y-39 D1 M3
N86 MCALL  CYCLE81(7,0,7,,42) ;CYCLE83(7,0,7,,42,,15,10,0,0,1,1)
N87 X58 Y-39 M8
N88 X116 Y-21
N89 X-116 Y-139
N90 X-174 Y-126
N91 MCALL
N92 G0 Z300 M9
N93 SMENA_Z
N94 ST4: WORK_STEP(4)
N95 T9 M6
N96 MSG("T9(1/16) ZENKER d=12.7*POD 4 PALCA NA D=13+0.035* ,WORK_STEP(4) ")
N97 ;*************************************************** T6
N98 G0 g55 B0
N99 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N100 REGIME(13,12.7,3,0.09)
N101 G0 G55 X-116 Y-139 D1 M3
N102 Z7 M8
N103 G1 Z-37 F=r93
N104 Z7 F=r93*4
N105 G0 X-174 Y-126
N106 G1 Z-37 F=r93
N107 Z7 F=r93*4
N108 G0 X58 Y-39
N109 G1 Z-37 F=r93
N110 Z7 F=r93*4
N111 G0 X116 Y-21
N112 G1 Z-37 F=r93
N113 Z7 F=r93*4
N114 G0 Z30 M9
N115 SMENA_Z
N116 ST5: WORK_STEP(5)
N117 T10 M6
N118 MSG("T10(2/15)RAZVERTKA D=13+0.035 ,WORK_STEP(5) ")
N119 ;*************************************************** T10
N120 G0 g55 B0
N121 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N122 REGIME(13,13,6,0.027)
N123 G0 G55 X58 Y-39 D1 M3    ;X58 Y-39
N124 Z12 M8
N125 G1 Z-35 F=r93
N126 Z12 F=r93*4
N127 G0 X116 Y-21
N128 G1 Z-35 F=r93
N129 Z12 F=r93*4
N130 G0 X-116 Y-139
N131 G1 Z-35 F=r93
N132 Z12 F=r93*4
N133 G0 X-174 Y-126
N134 G1 Z-35 F=r93
N135 Z12 F=r93*4
N136 G0 Z30 M9
N137 SMENA_Z
N138 ST6: WORK_STEP(6)
N139 T52 M6
N140 MSG("T52(2/16) RAZVERTKA D=13.2+0.035 na 2_otv,WORK_STEP(6)")
N141 ;*************************************************** T52
N142 G0 g55 B0
N143 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N144 REGIME(13,13.2,6,0.027)
N145 G0 G55 X116 Y-21 D1 M3  ;2
N146 Z12 M8
N147 G1 Z-35 F=r93
N148 Z12 F=r93*4
N149 G0 X-174 Y-126           ;4
N150 G1 Z-35 F=r93
N151 Z12 F=r93*4
N152 g0 z30 m9
N153 SMENA_Z
N154 ;*******************************************************
N155 ST7: WORK_STEP(7)
N156 T59 M6
N157 MSG("T59(2/6)FREZA d=10 ,WORK_STEP(7) ")
N158 ;*************************************************** T59
N159 G0 g55 B0
N160 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N161 REGIME(90,10,4,0.06)
N162 G0 G55 X58 Y-79  D1 M3
N163 ;m8
N164 POCKET2(25,-(18+2),zbez*3,,3,7,58,-79,R93,R93,3,2,0,2)
N165 SMENA_Z
N166 gbTOCheckAtTC = TRUE 
N167 gbErrMsgOnToCheck = TRUE
N168 ;******************************************************
N169 ST8: WORK_STEP(8)
N170 T54 M6
N171 MSG("T54(1/17)SVERLO d=16/90(CENTR) ,WORK_STEP(8) ")
N172 ;*************************************************** T54
N173 G0 g55 B0
N174 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N175 REGIME(19,16,2,0.06)
N176 G0 G55 X58 Y-79  D1 M3
N177 m8
N178 CYCLE82(25,-(18+2),zbez*3,,7,1)
N179 SMENA_Z
N180 
N181 ST9: WORK_STEP(9)
N182 T="3.1" M6
N183 MSG("T11(1/3) SVERLO D=13+0.27 ,WORK_STEP(9) ")
N184 ;*************************************************** T11
N185 G0 g55 B0
N186 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N187 REGIME(21,13,2,0.075)
N188 WAIT_TO_CHECK 
N189 G0 G55 X58 Y-79 D1 M3 M8
N190 x58 y-79                                 ;nov!!!!!!
N191 CYCLE83(25,-18,9,,50-21.7,,15,10,0,0,1,1)  ;nov!!!!!!
N192 G0 Z30 M9
N193 SMENA_Z
N194 ST10: WORK_STEP(10)
N195 T="4.1" M6
N196 MSG("T12(1/4) SVERLO D=6**NA,L=8+1.WORK_STEP(10)")
N197 ;*************************************************** T12
N198 G0 g55 B0
N199 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N200 REGIME(16,6,2,0.073)
N201 G0 G55 X-11.1 Y-109 m8 D1 M3
N202 CYCLE82(5,0,5,,8,1)
N203 G0 G55 X-0 Y-77 m8 D1 M3
N204 CYCLE83(5,0,5,,50.5,,15,10,0,0,1,1)
N205 SMENA_Z
N206 ST11: WORK_STEP(11)
N207 T="13.2"M6
N208 MSG("T13(2/13)SVERLO D=10.8* L=17 D=10.7+0.2.WORK_STEP(11)")
N209 ;*************************************************** T13
N210 G0 g55 B0
N211 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N212 REGIME(21,10.8,2,0.073)
N213 G0 G55 X-145 Y-110 D1 M3
N214 Z8 M8
N215 G1 Z-17 F=r93
N216 G0 Z30 M9
N217 SMENA_Z
N218 ST12: WORK_STEP(12)
N219 T14 M6
N220 MSG("T14(2/14)SVERLO D=8.3*NA L=20 D=8.43+0.2*WORK_STEP(12)")
N221 ;*************************************************** T14
N222 G0 g55 B0
N223 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N224 REGIME(18,8.3,2,0.073)
N225 G0 G55 X87 Y-97 D1 M3    ;X87 Y-165
N226 M8
N227 CYCLE82(15,-8,5,,12.5,1)
N228 ;x87 y-165
N229 ;CYCLE82(5,0,5,,12.5,1)
N230 G0 G55 X-0 Y-77 m8 D1 M3
N231 CYCLE83(5,0,5,,16.5,,15,10,0,0,1,1)
N232 SMENA_Z
N233 ST13: WORK_STEP(13)
N234 T4M6
N235 MSG("T4(1/5)SVERLO D=8****NA L=26 .WORK_STEP(13) ")
N236 ;*************************************************** T4
N237 G0 g55 B0
N238 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N239 REGIME(18,8,2,0.073)
N240 G0 G55 X18 Y-104 D1 M3
N241 M8
N242 CYCLE82(5,0,5,,26,1)
N243 SMENA_Z
N244 ST14: WORK_STEP(14)
N245 T15 M6
N246 MSG("T15(2/5)CEKOVKA D=26*L=58-0.46 D=26+0.52*WORK_STEP(14)")
N247 ;*************************************************** T15
N248 G0 g55 B0
N249 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N250 REGIME(20,26,4,0.045)
N251 G0 G55 X-174 Y-39 D1 M3
N252 MCALL CYCLE82(5,0,zbez,,10,1)
N253 X-174 Y-39 M8
N254 Y-126
N255 MCALL
N256 G0 Z40 M9
N257 SMENA_Z
N258 ST15: WORK_STEP(15)
N259 T58 M6
N260 MSG("T58(1/13) FREZA D=8(4_zub)L=10.5+/-0.215,WORK_STEP(15)")
N261 R1=8/2  ;rad.frezi
N262 ;************************************************ T53
N263 G0 g55 B0
N264 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N265 REGIME(70,8,4,0.05)
N266 X18 Y-104 D1 M3
N267 Z5 ;M8
N268 g1 z0 f=fus
N269 DPR=10.5 KP=3 zzbez=dpr+zbez*2
N270 fr_8:G1Z=IC(-DPR/KP) F=r93*2
N271 Y-152 F=r93
N272 g0 z=ic(zzbez)
N273 Y-104
N274 g1 z=ic(-zzbez) f=fus/2
N275 REPEAT fr_8 P=KP-1
N276 g0 z50 m9
N277 SMENA_Z
N278 ST16: WORK_STEP(16)
N279 T6 M6
N280 MSG("T6(1/1) FREZA chern.D=40,WORK_STEP(16) ")
N281 R1=40/2  ;rad.frezi
N282 ;************************************************ T6
N283 G0 g55 B90
N284 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N285 REGIME(120,40,3,0.05)
N286 X-74 Y-121 D1 M3 
N287 Z0 M8
N288 G1 X-43 F=r93
N289 G0 Z40 M9
N290 SMENA_Z
N291 ST17: WORK_STEP(17)
N292 T7 M6
N293 MSG("T7(1/2) SVERLO D=16<90,WORK_STEP(17) ")
N294 ;************************************************ T7
N295 G0 g55 B90
N296 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N297 REGIME(25,16,2,0.077)
N298 X-37 Y-123 D1 M3 
N299 Z3 M8
N300 G1 Z-5.3 F=r93
N301 G0 Z30 M9
N302 SMENA_Z
N303 gbTOCheckAtTC = TRUE 
N304 gbErrMsgOnToCheck = TRUE
N305 ST18: WORK_STEP(18)
N306 T14 M6
N307 MSG("T14(2/14)SV.D=8.3**L=20 D=8.4+0.16-0.04,WORK_STEP(18)")
N308 ;************************************************ T14
N309 G0 g55 B90
N310 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N311 REGIME(19,8.3,2,0.07)
N312 WAIT_TO_CHECK 
N313 X-37 Y-123 D1 M3 
N314 Z7 M8
N315 G1 Z-20 F=r93
N316 G0 Z10 M9
N317 SMENA_Z
N318 ;==========================================================
N319 
N320 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N321 ;M0
N322 ;==========================================================
N323 WORK_DONE
N324 GOTOF _ENDE
N325 
N326 ST999:TO_BROKEN
N327  _ENDE:T6 M6
N328 M91
N329 WORK_STEP(0)
N330 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N331 R98=$AC_TIMER[1]
N332 ;N68 R98=R98/60  ;cycle TIME/MIN
N333 M30
N334 _proverka:
N335 ;_______1_detal___storona B0/B90____G55_______
N336 ;*G55-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N337 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0,B,180);  G55 B0
N338 
N339 
N340 ZBEZ=3
N341 XBEZ=10
N342 YBEZ=7 
N343 ;_______B0 __TRANS ___!!pripusk na oba torca 2.6
N344 Y_B0=r200+177.8+2.6    ;OS_Y TRANS y=140+177.8+(183-177.8)/2=320.4  
N345 X_B0=r100-(14+116)     ;OS_X TRANS ;bilo 180-14-116=50
N346 Z_B0=r300+67.775       ;OS_Z TRANS 150+67.775=217.775 (67.8-0.05)
N347 ;_______B90 __________________________!!!!!
N348 Y_B90=Y_B0                 ;OS_Y TRANS
N349 X_B90=-(Z_B0-67.775)       ;OS_X TRANS ;
N350 Z_B90=168.958-2            ;OS_Z TRANS ;2_UST(205-3.15+16.55-49.442) 
N351 
N352 
N353 STOPRE
N354 ;**************************YSTANOV I**********
N355 ;*poraydok obrabotki***metka***magazin/gnezdo***NALADKA INSTRUMENTA******
N356  IF WORKING_STEP<=1   GOTOB ST1  ;T6(1/1) -FREZA D=40
N357  M91 ;poka nezak-ca cmena palet 
N358  IF WORKING_STEP==2   GOTOB ST2  ;T7(1/2)-SVERLO 16/90(CENTR)
N359  IF WORKING_STEP==3   GOTOB ST3  ;T8(1/15)-SVERLO D=11
N360  IF WORKING_STEP==4   GOTOB ST4  ;T9(1/16) ZENKER d=12.7
N361  IF WORKING_STEP==5   GOTOB ST5  ;T10(2/15)RAZVERTKA D=13
N362  IF WORKING_STEP==6   GOTOB ST6  ;T52(2/16)RAZVERTKA D=13.2
N363  IF WORKING_STEP==7  GOTOB ST7 ;T59(2/6) FREZA D=10
N364  IF WORKING_STEP==8   GOTOB ST8  ;T54(1/17)SVERLO d=16/90(CENTR) uslov.trudnie
N365  IF WORKING_STEP==9  GOTOB ST9 ;T11(1/3) SVERLO D=13+0.27
N366  IF WORKING_STEP==10   GOTOB ST10  ;T12(1/4) SVERLO D=6*
N367  IF WORKING_STEP==11  GOTOB ST11 ;T13(2/13) SVERLO D=10.8
N368  IF WORKING_STEP==12  GOTOB ST12 ;T14(2/14)SVERLO D=8.3
N369  IF WORKING_STEP==13  GOTOB ST13 ;T4(1/5)SVERLO D=8 L=26
N370  IF WORKING_STEP==14  GOTOB ST14 ;T15(2/15) CEKOVKA D=26**
N371  IF WORKING_STEP==15  GOTOB ST15 ;T58(1/13) FREZA D=8(2_zub)
N372  IF WORKING_STEP==16  GOTOB ST16 ;T6(1/1) FREZA chern.D=40
N373  IF WORKING_STEP==17  GOTOB ST17 ;T7(1/2) SVERLO D=16<90
N374  IF WORKING_STEP==18  GOTOB ST18 ;T14(2/14) SVERLO D=8.3*
N375  IF WORKING_STEP==999  GOTOB ST999
N376 ENDIF
N377 
N378 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N379 M0
N380 GOTOB AA
N381 GOTOB START_1
N382 ; NE UDOLAYT VSE RABOTAET
N383 
