N1      ;7555H-1712162-01(KORPUS REGULAJTORA DAVLENIAJ GIDROTRANSFORMATORA)
N2      ;Razrabotal ZHUK.M.N
N3      ;Oper. 010(I---III-USTANOV)
N4      ;STANOK NBH-6 
N5 DEF REAL FUS=3000,RO,DPR,KP,TF,TS
N6 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 M9
N7 
N8 M192
N9 M0
N10 
N11 GOTOF _proverka
N12 START_1:
N13 
N14 ; *****    rabota    *********
N15 ST1: WORK_STEP(1)
N16 SMENA_Z
N17 G0 G55 G17 G40 G90 G94
N18 T="20.1" M6
N19 MSG("T20.1 CENTROVKA D=5 , WORK_STEP(1)")
N20 REGIME(18,5,1,0.05)
N21 G0 G55 B90 D1
N22 L90
N23 X-38 Y14 M3
N24 Z50 M8
N25 MCALL CYCLE82(50,0,3, ,2,0.5)
N26 X-38 Y14
N27 Y=14+10 X=-38-97
N28 Y=14+82 X=-38-97
N29 Y=14+140 X=-38-97
N30 Y=14+150 X=-38
N31 Y=14+95 X=-38
N32 MCALL
N33 SMENA_Z
N34 ; **************
N35 ST21: WORK_STEP(21)
N36 SMENA_Z
N37 G0 G55 G17 G40 G90 G94
N38 T="1.1" M6
N39 MSG("T1.1 SV. CENTR D=19<90 , WORK_STEP(21)")
N40 REGIME(16,14,2,0.08)
N41 G0 G55 B90 D1
N42 L90
N43 X-38 Y14 M3
N44 Z50 M8
N45 MCALL CYCLE82(50,0,3, ,13.8/2,0.8)
N46 X-38 Y14
N47 Y=14+10 X=-38-97
N48 Y=14+82 X=-38-97 T="21.2"
N49 Y=14+140 X=-38-97
N50 Y=14+150 X=-38
N51 Y=14+95 X=-38
N52 MCALL
N53 SMENA_Z
N54 ;**********************
N55 ST2: WORK_STEP(2)
N56 T="21.2" M6
N57 MSG("T21.2  SVERLO  D=11, WORK_STEP(2)")
N58 REGIME(18,11,2,0.1)
N59 G0 G55 G17 G40 G94 D1
N60 G0 B90
N61 L90
N62 X-38 Y14 M3
N63 Z50 M8
N64 MCALL CYCLE83(20,0,5, ,70,,5,3,0.1,0,1,1)
N65 X-38 Y14
N66 Y=14+150 X=-38
N67 Y=14+140 X=-38-97
N68 Y=14+10 X=-38-97
N69 MCALL
N70 SMENA_Z
N71 ;**********************
N72 ST3: WORK_STEP(3)
N73 T="4.1" M6
N74 MSG("T4.1  ZENKER  D=13.1, WORK_STEP(3)")
N75 REGIME(16,13,3,0.1)
N76 G0 G55 G17 G40 G94 D1
N77 G0 B90
N78 L90
N79 X-38 Y14 M3
N80 Z50 M8
N81 MCALL CYCLE82(50,0,3, ,70,0.3)
N82 X-38 Y14
N83 Y=14+150 X=-38
N84 Y=14+140 X=-38-97
N85 Y=14+10 X=-38-97
N86 MCALL
N87 SMENA_Z
N88 ;**********************
N89 ST4: WORK_STEP(4)
N90 T="3.1" M6
N91 MSG("T3.1  RAZVERTKA D=13.2, WORK_STEP(4)")
N92 REGIME(12,13,1,0.15)
N93 G0 G55 G17 G40 G94 D1
N94 G0 B90
N95 L90
N96 X-38 Y14 M3
N97 Z50 M8
N98 MCALL CYCLE85(50,0,6,,75,,R93,200)
N99 X-38 Y14
N100 Y=14+150 X=-38
N101 Y=14+140 X=-38-97
N102 Y=14+10 X=-38-97
N103 MCALL
N104 SMENA_Z
N105 ;******************************
N106 ST5: WORK_STEP(5)
N107 G0 G55 G17 G40 G90 G94
N108 T="6.1" M6
N109 MSG("T6.1 SVERLO D=13.2 , WORK_STEP(5)")
N110 REGIME(16,13,2,0.11)
N111 G0 G55 B90 D1
N112 L90
N113 X=-38-97 Y=14+82 M3
N114 Z50 M8
N115 MCALL CYCLE83(20,0,5, ,70,,5,3,0.1,0,1,1)
N116 Y=14+82 X=-38-97
N117 Y=14+95 X=-38
N118 MCALL
N119 SMENA_Z
N120 M1; #######  2- USTANOV  ########
N121 ;*************************
N122 ST6: WORK_STEP(6)
N123 T="18.2" M6
N124 MSG("T18.2 - SVERLO D=32, WORK_STEP(7)")
N125 ;REGIME(17,32,2,0.12);  BISTROREZ
N126 REGIME(110,33,1,0.12)
N127 G0 G55 G17 G40 G94 D1
N128 G0 B90
N129 L91
N130 M3
N131 X0 Y0
N132 Z50 M7; BISTROREZ  M8
N133 ;CYCLE83(20,0,12, ,91,,6,3,0.1,0,1,0.7); BISTROREZ
N134 CYCLE82(30,0,5, ,91,0.3)
N135 SMENA_Z
N136 G0 B270 G55 D1
N137 L270
N138 M3
N139 X0 Y0 M7 ; BISTROREZ  M8
N140 ;CYCLE83(20,0,12, ,91,,6,3,0.1,0,1,0.7)
N141 CYCLE82(30,0,5, ,91,0.3)
N142 SMENA_Z
N143 ;*************************
N144 ST7: WORK_STEP(7)
N145 T="23.1" M6
N146 MSG("T23.1 - REZEC  D=34.3, WORK_STEP(7)")
N147 REGIME(70,34,1,0.2)
N148 G0 G55 G17 G40 G94 D1
N149 G0 B270
N150 L270
N151 M3
N152 X0 Y0 M8
N153 CYCLE82(30,0,5, ,91,0.3)
N154 SMENA_Z
N155 G0 B90 G55 D1
N156 L91
N157 M3
N158 X0 Y0 M8
N159 CYCLE82(30,0,5, ,91,0.3)
N160 SMENA_Z
N161 ;***************************
N162 ST8: WORK_STEP(8)
N163 T="21.1" M6
N164 MSG("T21.1- FREZA D=100 , WORK_STEP(9)")
N165 REGIME(250,100,8,0.06)
N166 G0 G55 G17 G40 G94 D1
N167 G0 B270
N168 L270
N169 M3
N170 X10 Y=95+50
N171 Z50 M8
N172 G1 Z0 F1500
N173 Y=-60 F=R93
N174 X=32+55
N175 G0 Z10
N176 SMENA_Z
N177 ;***************************
N178 ST9: WORK_STEP(9)
N179 T="3.2" M6
N180 MSG("T3.2- ZENKOVKA D=22<60 , WORK_STEP(9)")
N181 REGIME(100,22,4,0.025)
N182 G0 G55 G17 G40 G94 D1
N183 G0 B90
N184 L91
N185 M3 M8
N186 POCKET2(20,0,3,,1.6,35/2,0,0,500,R93,1,2,0,2)
N187 SMENA_Z
N188 ;************
N189 G0 G55 G17 G40 G94 D1
N190 G0 B270
N191 L270
N192 M3 M8
N193 POCKET2(20,0,3,,1.6,35/2,0,0,500,R93,1,2,0,2)
N194 SMENA_Z
N195 ;*************************
N196 ST22: WORK_STEP(22)
N197 T="20.1" M6
N198 MSG("T20.1 - CENTROVKA D=5, WORK_STEP(22)")
N199 REGIME(18,5,1,0.05)
N200 G0 G55 G17 G40 G94 D1
N201 G0 B270
N202 L270
N203 M3
N204 MCALL CYCLE82(30,0,3, ,1.8,1)
N205 X-18 Y-29 M8
N206 X18 Y-29
N207 X18 Y29
N208 X-18 Y29
N209 MCALL
N210  SMENA_Z
N211 ;************ B0  ***************
N212 G0 G55 G17 G40 G94 D1
N213 G0 B0
N214 L100
N215 M3 M8
N216 MCALL CYCLE82(60,0,4, ,1.8,1)
N217 X16 Y0 M8
N218 X77 Y-5
N219 MCALL
N220 X128 Y0
N221 CYCLE82(30,0,4, ,1.8,1)
N222  SMENA_Z
N223 ;************ B90  ***************
N224 G0 G55 G17 G40 G94 D1
N225 G0 B90
N226 L91
N227 M3 M8
N228 MCALL CYCLE82(30,0,4, ,1.8,1)
N229 X-18 Y-29 M8
N230 X18 Y-29
N231 X18 Y29
N232 X-18 Y29
N233 MCALL
N234  SMENA_Z
N235 ;*************************
N236 ST10: WORK_STEP(10)
N237 T="1.1" M6
N238 MSG("T1.1 - SVERLO D=16<90, WORK_STEP(10)")
N239 REGIME(18,14,2,0.1)
N240 G0 G55 G17 G40 G94 D1
N241 G0 B270
N242 L270
N243 M3
N244 MCALL CYCLE82(30,0,4, ,6.8/2+1.6,0.5)
N245 X-18 Y-29 M8
N246 X18 Y-29
N247 X18 Y29
N248 X-18 Y29
N249 MCALL
N250  SMENA_Z
N251 ;************ B0  ***************
N252 G0 G55 G17 G40 G94 D1
N253 G0 B0
N254 L100
N255 M3 M8
N256 MCALL CYCLE82(60,0,4, ,13.2/2+0.3,0.5)
N257 X0 Y52
N258 X150 Y52
N259 X140 Y=52-97
N260 X10 Y=52-97
N261 X16 Y0 M8
N262 X77 Y-5
N263 MCALL
N264 X128 Y0
N265 CYCLE82(30,0,4, ,6/2+0.5,0.8)
N266  SMENA_Z
N267 ;************ B90  ***************
N268 G0 G55 G17 G40 G94 D1
N269 G0 B90
N270 L91
N271 M3 M8
N272 MCALL CYCLE82(30,0,4, ,6.8/2+1.6,0.5)
N273 X-18 Y-29 M8
N274 X18 Y-29
N275 X18 Y29
N276 X-18 Y29
N277 MCALL
N278  SMENA_Z
N279 ;*****************************
N280 ST11: WORK_STEP(11)
N281 T="27.2" M6
N282 MSG("T27.2 - SVERLO D=6.8 , WORK_STEP(11)")
N283 REGIME(20,7,2,0.08)
N284 G0 G55 G17 G40 G94 D1
N285 G0 B90
N286 L91
N287 M3
N288 MCALL CYCLE83(20,0,5, ,24.5,,5,3,0.1,0,1,1)
N289 X-18 Y-29 M8
N290 X18 Y-29
N291 X18 Y29
N292 X-18 Y29
N293 MCALL
N294  SMENA_Z
N295 ;***************************
N296 G0 G55 G17 G40 G94 D1
N297 G0 B270
N298 L270
N299 M3
N300 MCALL CYCLE83(20,0,5, ,24.5,,5,3,0.1,0,1,1)
N301 X-18 Y-29 M8
N302 X18 Y-29
N303 X18 Y29
N304 X-18 Y29
N305 MCALL
N306  SMENA_Z
N307 ;*******************************
N308 ST12: WORK_STEP(12)
N309 T="6.1" M6
N310 MSG("T6.1 - SVERLO D=13.2, WORK_STEP(12)")
N311 REGIME(18,13,2,0.1)
N312 G0 G55 G17 G40 G94 D1
N313 G0 B0
N314 L100
N315 M3
N316 X77 Y-5
N317 Z30 M8
N318 CYCLE83(20,0,6, ,23,,5,3,0.1,0,1,1)
N319 SMENA_Z
N320 ;*******************************
N321 ST13: WORK_STEP(13)
N322 T="22.2" M6
N323 MSG("T22.2 - SVERLO D=27, WORK_STEP(13)")
N324 REGIME(16,27,2,0.1)
N325 G0 G55 G17 G40 G94 D1
N326 G0 B0
N327 L100
N328 M3
N329 X16 Y0
N330 Z30 M8
N331 CYCLE83(20,0,8, ,30,,5,3,0.1,0,1,1)
N332 SMENA_Z
N333 ;*******************************
N334 ST14: WORK_STEP(14)
N335 T="26.2" M6
N336 MSG("T26.2 - SVERLO D=6, WORK_STEP(14)")
N337 REGIME(16,6,2,0.04)
N338 G0 G55 G17 G40 G94 D1
N339 G0 B0
N340 L100
N341 M3
N342 X128 Y0
N343 Z30 M8
N344 CYCLE83(20,0,8, ,19,,3,3,0.1,0,0.8,1)
N345 SMENA_Z
N346 M1; #######  3- USTANOV  #######
N347 ;*************************
N348 ST23: WORK_STEP(23)
N349 T="20.1" M6
N350 MSG("T20.1 - CENTROVKA D=5, WORK_STEP(23)")
N351 REGIME(18,5,1,0.05)
N352 G0 G55 G17 G40 G94 D1
N353 G0 B0
N354 L101
N355 M3
N356 MCALL CYCLE82(30,0,3, ,1.8,1)
N357 X0 Y0 M8
N358 X-20 Y-38
N359 X20 Y-38
N360 X20 Y38
N361 X-20 Y38
N362 MCALL
N363 SMENA_Z
N364 ;******************
N365 G0 G55 G17 G40 G94 D1
N366 G0 B270
N367 L271
N368 M3
N369 X=-38-15 Y0
N370 Z30 M8
N371 CYCLE82(30,0,3, ,1.8,1)
N372 SMENA_Z
N373 ;*************************
N374 ST15: WORK_STEP(15)
N375 T="1.1" M6
N376 MSG("T1.1 - SVERLO D=16<90, WORK_STEP(15)")
N377 REGIME(16,14,2,0.08)
N378 G0 G55 G17 G40 G94 D1
N379 G0 B0
N380 L101
N381 M3
N382 MCALL CYCLE82(30,0,3, ,10.2/2+1.6,0.3)
N383 X0 Y0 M8
N384 X-20 Y-38
N385 X20 Y-38
N386 X20 Y38
N387 X-20 Y38
N388 MCALL
N389 SMENA_Z
N390 ;******************
N391 G0 G55 G17 G40 G94 D1
N392 G0 B270
N393 L271
N394 M3
N395 X=-38-15 Y0
N396 Z30 M8
N397 CYCLE82(30,0,3, ,6,0.3)
N398 SMENA_Z
N399 ;*************************
N400 ST16: WORK_STEP(16)
N401 T="11.1" M6
N402 MSG("T11.1 - SVERLO D=35, WORK_STEP(16)")
N403 REGIME(16,35,2,0.1)
N404 G0 G55 G17 G40 G94 D1
N405 G0 B0
N406 L101
N407 M3
N408 X0 Y0
N409 Z30 M8
N410 CYCLE83(20,0,12, ,62,,5,3,0.1,0,0.7,1)
N411 SMENA_Z
N412 ;*************************
N413 ST17: WORK_STEP(17)
N414 T="25.2" M6
N415 MSG("T25.2 - SVERLO D=25, WORK_STEP(17)")
N416 REGIME(16,25,2,0.1)
N417 G0 G55 G17 G40 G94 D1
N418 G0 B0
N419 L101
N420 M3
N421 X0 Y0
N422 Z30 M8
N423 CYCLE83(30,-62,5, ,22,,5,3,0.1,0,1,1)
N424 SMENA_Z
N425 ;*************************
N426 ST18: WORK_STEP(18)
N427 T="1.14" M6
N428 MSG("T1.14 - SVERLO D=10.2, WORK_STEP(18)")
N429 REGIME(16,10,2,0.08)
N430 G0 G55 G17 G40 G94 D1
N431 G0 B0
N432 L101
N433 M3
N434 MCALL CYCLE83(30,0,7, ,28.5,,5,3,0.1,0,1,1)
N435 X-20 Y-38 M8
N436 X20 Y-38
N437 X20 Y38
N438 X-20 Y38
N439 MCALL
N440 SMENA_Z
N441 ;*************************
N442 ST20: WORK_STEP(20)
N443 T="23.2" M6
N444 MSG("T23.2 - SVERLO D=28, WORK_STEP(20)")
N445 REGIME(16,28,2,0.1)
N446 G0 G55 G17 G40 G94 D1
N447 G0 B270
N448 L271
N449 M3
N450 X=-38-15 Y0
N451 Z30 M8
N452 CYCLE83(20,0,10, ,23,,3,3,0.1,0,0.7,1)
N453 SMENA_Z
N454 M0; 1-DET. BEZ REZBI DLAJ "KIM"
N455 ;*************************
N456 ST19: WORK_STEP(19)
N457 T="12.2" M6
N458 MSG("T12.2 - METCHIK M*12, WORK_STEP(19)")
N459 REGIME(6,12,1,1.75)
N460 G0 G55 G17 G40 G94 D1
N461 G0 B0
N462 L101
N463 M3
N464 MCALL CYCLE840(20,0,6,,27,,4,3,1)
N465 X-20 Y-38 M8
N466 X20 Y-38
N467 X20 Y38
N468 X-20 Y38
N469 MCALL
N470 SMENA_Z
N471 T0 M6
N472 M0
N473 M193
N474 M0
N475 
N476 _END: WORK_STEP (99)
N477 
N478 WORK_DONE
N479 GOTOF _ENDE
N480 
N481  _ENDE:T0 M6
N482 M91
N483 WORK_STEP(0)
N484 M30
N485 ;****************************************************
N486 _proverka:
N487 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0)
N488 
N489 STOPRE
N490 
N491 ;*********   I-USTANOV  ***************
N492  IF WORKING_STEP<=1  GOTOB ST1 ;T20.1- CENTROVKA D=5
N493  M91 ;poka nezak-ca smena palet 
N494  IF WORKING_STEP==21  GOTOB ST21   ;T1.1- SVERLO D=16<90'
N495  IF WORKING_STEP==2  GOTOB ST2   ;T21.2- SVERLO D=11
N496  IF WORKING_STEP==3  GOTOB ST3   ;T4.1 -ZENKER D=13.16
N497  IF WORKING_STEP==4  GOTOB ST4   ;T3.1 - RAZVERTKA D=13.23
N498  IF WORKING_STEP==5  GOTOB ST5   ;T6.1 -  SVERLO D=13.2
N499 ;*********   II-USTANOV  ***************
N500  IF WORKING_STEP==6  GOTOB ST6   ;T18.2- SVERLO D=33(ING.)
N501  IF WORKING_STEP==7  GOTOB ST7   ;T23.1 -REZEC    D=34.3
N502  IF WORKING_STEP==8  GOTOB ST8   ;T21.1 -FREZA  D=100
N503  IF WORKING_STEP==9  GOTOB ST9   ;T3.2 - ZENKOVKA  D=22<60'
N504  IF WORKING_STEP==22  GOTOB ST22   ;T20.1- CENTROVKA D=5
N505  IF WORKING_STEP==10  GOTOB ST10   ;T1.1- SVERLO D=16<90'
N506  IF WORKING_STEP==11  GOTOB ST11   ;T27.2- SVERLO D=6.8
N507  IF WORKING_STEP==12  GOTOB ST12   ;T6.1 -  SVERLO D=13.2
N508  IF WORKING_STEP==13  GOTOB ST13   ;T22.2- SVERLO D=27
N509  IF WORKING_STEP==14  GOTOB ST14   ;T26.2- SVERLO D=6
N510 ;*********   III-USTANOV  ***************
N511  IF WORKING_STEP==23  GOTOB ST23   ;T20.1- CENTROVKA D=5
N512  IF WORKING_STEP==15  GOTOB ST15   ;T1.1- SVERLO D=16<90'
N513  IF WORKING_STEP==16  GOTOB ST16   ;T11.1 -SVERLO D=35
N514  IF WORKING_STEP==17  GOTOB ST17   ;T25.2 -SVERLO D=25
N515  IF WORKING_STEP==18  GOTOB ST18   ;T1.14 - SVERLO D=10.2
N516  IF WORKING_STEP==19  GOTOB ST19   ;T12.2- METCHIK  M12
N517  IF WORKING_STEP==20  GOTOB ST20   ;T23.2 -SVERLO D=28
N518 
N519  IF WORKING_STEP==99 GOTOB _END
N520  ENDIF
N521 
N522 AA: MSG("Neverniy etap obrabotki ")
N523 M0
N524 GOTOB AA
N525 GOTOB START_1
N526 M30
N527 
