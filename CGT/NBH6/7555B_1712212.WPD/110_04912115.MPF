N1 ;DETAL 7555B-1712212 KORPUS ZOLOTNIKOV
N2 ;OPER 120 ******YSTANOV II*******
N4 ;STANOK NBH6 INV. N.12507
N5 ;PETROVICH A.B. VASILEVSKI A.I. 19.07.2017
N8 ;TC=19.5 MIN
N9 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,Y_B90,X_B90,Z_B90,DPR,KP,TF,TS
N11 DEFINE SMENA_Z AS G0 G53 Z930 D0 M5 M9
N12 $AC_TIMER[1]=0  ;CIKL STARTA TIME/MIN
N13 ;*POGRESHNOST OBKADKI PALCA  NA PRISPOSOBLTNII OS_ Y(R50),OS_ X(R40),OS_ Z(R60/R61)***
N14 R40=(455-0.16)-630/2 ;OS_X  X=455-630/2=(+139.72) !!!B180!!!
N15 R50=180           ;OS_Y  YSTANOV 3 B0/B90/B180/B270 180+/-0.02
N16 R61=(270-0.175)-630/2 ;OS_Z  -45.175 OT OSI VRASCH DO PALCA !!!B180! R-R 126+/-0.25
N17 R60=630/2-(270+0.175) ;OS_Z  +44.825 OT OSI VRASCH DO PALCA !!!B0! R-R 178-0.4
N18 R62=178-0.4/2           ;OS_Z SHIR ZAG!!!B0! 177.8
N19 GOTOF _PROVERKA
N20 START_1:
N22 ;********RABOTA*********G57*************************
N62 ;***************************************************
N59 ST1: WORK_STEP(1)
N60 T="29.2" M6
N61 MSG("T29.2 SVERLO D=23(KOMB) ,WORK_STEP(1)")
N63 G0 G57 B270
N64 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_
N65 ATRANS  X-48 Z=13.2-3
N66 REGIME(90,23,1,0.22)
N67 G0 G57 X0 Y35 D1 M3
N68 Z40 M7
N69 G1 Z3
N70 Z4
N71 S900
N72 G4 F2
N73 G1 Z-0.5 F190
N74 G0 Z40
N75 SMENA_Z
N62 ;***************************************************
N88 ST2: WORK_STEP(2)
N89 T="15.1" M6
N90 MSG("T1.15 SVERLO D=23**POD K=3/4* ,WORK_STEP(2)")
N92 G0 G57 B270
N93 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N94 ATRANS  X-48 Z=13.2-3
N95 REGIME(22,23,2,0.075)
N96 WAIT_TO_CHECK 
N97 G0 G57 X0 Y35 D1 M3
N98 Z11 M8
N99 G1 Z-21 F150
N100 F=R93
N101 CYCLE83(20,-26,5,,72,,15,10,0,0,1,1)
N102 SMENA_Z
N62 ;***************************************************
N132 ST3: WORK_STEP(3)
N133 T="28.2" M6
N134 MSG("T28.2 METCIK K=3/4 ,WORK_STEP(3)")
N136 G0 G57 B270
N137 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N138 ATRANS  X-48 Z=13.2-3
N139 ;REGIME(6,24.9,1,1.814)  S76.70 F=139.13
N140 G0 G57 X0 Y35 D1 S71 F129 M3   
N141 Z10 M8
N142 CYCLE840(10,0,10,,25,1,4,3,1)
N143 SMENA_Z
N135 ;***************************************************
N167 ST4: WORK_STEP(4)
N168 T="1.1" M6
N169 MSG("T1.1 SVERLO D=16<90 ,WORK_STEP(4)")
N171 G0 G57 B180
N172 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N173 REGIME(26,16,2,0.073)
N174 G0 G57 Y12 X-174 D1 M3 M8
N175 MCALL CYCLE82(3,0,3,,5,1)
N177 X-174
N178 X-58
N179 Y48
N180 X-174
N182 MCALL
N183 Y15 X3
N184 G0 Z3 M8
N185 G1 Z-6.975 F=R93
N186 G0 Z10
N187 SMENA_Z
N188 G0 G57 B0
N189 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N190 G0 G57 Y12 X15 D1 M3 M8
N191 MCALL CYCLE82(3,0,3,,5,1)
N191 Y12 X15
N193 X58
N194 X174
N196 Y48
N198 X58
N199 X0
N200 MCALL
N201 Y10 X-14 M8
N202 CYCLE82(3,0,3,,5.25,1)
N203 Y60 X160
N204 CYCLE82(3,0,3,,5.8,1)
N206 SMENA_Z
N244 ;***************************************************
N241 ST5: WORK_STEP(5)
N242 T="30.2" M6
N243 MSG("T30.2 SVERLO D=6.8 ,WORK_STEP(5)")
N245 G0 G57 B0
N246 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N247 REGIME(20,6.8,2,0.09)
N190 G0 G57 Y12 X15 D1 M3 M8
N250 MCALL CYCLE83(7,0,7,,24.5,,4.5,5,,,1,1)
N191 Y12 X15
N193 X58
N194 X174
N196 Y48
N198 X58
N199 X0
N200 MCALL
N260 G0 Z40 M9
N261 SMENA_Z
N262 G0 G57 B180
N263 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N264 G0 G57 Y12 X-174 D1 M3 M8
N265 MCALL CYCLE83(7,0,7,,24.5,,4.5,5,,,1,1)
N266 X-174
N268 X-58
N269 Y48
N270 X-174
N272 MCALL
N273 SMENA_Z
N244 ;***************************************************
N275 ST6: WORK_STEP(6)
N276 T="1.14" M6
N277 MSG("T14.1 SVERLO D=10.2  ,WORK_STEP(6)")
N279 G0 G57 B180
N280 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N281 REGIME(19,10.2,2,0.076)
N282 G0 G57 Y15 X3 D1 M3
N283 Z6 M8
N284 G1 Z-29.5 F=R93 
N285 G0 Z40 M9
N286 SMENA_Z
N62 ;***************************************************
N287 ST7: WORK_STEP(7)
N288 T="21.2" M6
N289 MSG("T21.2 SVERLO D=11 ,WORK_STEP(7)")
N291 G0 G57 B0
N292 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N293 REGIME(19,11,2,0.069)
N294 G0 G57 Y60 X160 D1 M3
N295 Z7 M8
N296 G1 Z-5.6 F=R93
N297 G0 Z40 M9
N298 SMENA_Z
N62 ;***************************************************
N299 ST8: WORK_STEP(8)
N300 T="1.25" M6
N301 MSG("T25.1 SVERLO D=8.5 ,WORK_STEP(8)")
N303 G0 G57 B0
N304 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N305 REGIME(19,8.5,2,0.071)
N306 G0 G57 Y60 X160 D1 M3
N307 Z5 M8
N308 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1)
N309 Y10 X-14
N310 G1 Z-16.5 F=R93
N311 G0 Z40 M9
N312 SMENA_Z
N62 ;***************************************************
N313 ST9: WORK_STEP(9)
N314 T="1.24" M6
N315 MSG("T24.1 SVERLO D=6,WORK_STEP(9)")
N317 G0 G57 B0
N318 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N319 REGIME(15,6,2,0.076)
N320 G0 G57 X-14 Y10 D1 M3
N321 Z5 M8
N322 CYCLE83(5,0,5,,77.5,,20,10,0,0,1,1)
N323 SMENA_Z
N324 M01
N385 ;-RABOTA B270 S 2 UST R-R E-E - D=8.3_L=16+1.1 D=6_L=34+2.5 
N625 ;***************************************************
N386 ST10: WORK_STEP(10)
N387 T="11.2" M6
N388 MSG("T11.2 FREZA D=40,WORK_STEP(10) ")
N390 G0 G57 B270
N391 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N392 ATRANS X13 Z=44.125-2
N393 REGIME(110,40,3,0.047)
N394 X0 Y70 D1 M3
N395 Z8 M8
N396 G1 Z3.5 F=R93
N397 Y=32 F=R93
N398 G0 Z10
N399 Y70
N400 G1 Z0 F=R93*2
N401 Y=32 F=R93
N402 SMENA_Z
N62 ;***************************************************
N403 ST11: WORK_STEP(11)
N404 T="1.1" M6
N405 MSG("T1.1 SVERLO D=16/90 ,WORK_STEP(11) ")
N406 ;*************************************************** T1.1
N407 G0 G57 B270
N408 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N409 ATRANS  X13 Z=44.125-2
N410 REGIME(26,16,2,0.073)
N411 Y26 X0 D1 M3
N412 Z3 M8
N413 G1 Z-5.3 F=R93
N414 G0 Z30 M9
N415 SMENA_Z
N62 ;***************************************************
N416 ST12: WORK_STEP(12)
N417 T="1.25" M6
N418 MSG("T25.1 SVERLO D=8.3***NA L=16+1.1*,WORK_STEP(12) ")
N420 G0 G57 B270
N421 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N422 ATRANS  X13 Z=44.125-2
N423 REGIME(16,8.3,2,0.074)
N424 Y26 X0 D1 M3
N425 Z6 M8
N426 G1 Z-16.5 F=R93
N427 G0 Z30 M9
N428 SMENA_Z
N62 ;***************************************************
N429 ST13: WORK_STEP(13)
N430 T="1.24" M6
N431 MSG("T1.24 SVERLO D=6/DL* L=34+2.5**,WORK_STEP(13) ")
N433 G0 G57 B270
N434 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N435 ATRANS X13 Z=44.125-2
N436 REGIME(16,6,2,0.073)
N437 Y26 X0 D1 M3
N438 Z5 M8
N439 G1 Z-10 F=R93*10
N440 G1 Z-35.25 F=R93
N441 G0 Z30 M9
N442 SMENA_Z
N62 ;**************************************************
N446 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.NEZABUD PODELITCA!!!!")
N447 WORK_DONE
N450 GOTOF _ENDE
N452 ST999:TO_BROKEN
N453  _ENDE:T0 M6
N454 M91
N455 WORK_STEP(0)
N456 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N457 R98=$AC_TIMER[1]
N458 ;N68 R98=R98/60  ;CYCLE TIME/MIN
N459 M30
N460 
N461 _PROVERKA:
N462 ;____3_USTANOV___DETAL___STORONA B0/B180/B270/B90____G57___
N463 ;*G57-X-CENTR STOLA,Y-PLOSKOST PALETI,Z-CENTR STOLA
N464 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N465 ;N-PRISP.(7274-6383)
N466 ZBEZ=3
N467 XBEZ=10
N468 YBEZ=7 
N469 ;______B0 __TRANS __________________     ;B0!!!
N470 Y_B0=R50                ;OS_Y TRANS  ;PLOSK PRILAD
N471 X_B0=-R40               ;OS_X TRANS -140 OS_PALCA  D=13.2-0.016/-0/034
N472 Z_B0=R62-126+R60        ;OS_Z TRANS BILO Z=177.8-126+45=96.8+/-0.25(178-0.4)
N473 ;_____B180__TRANS______________________   ;B180!!!
N474 Y_B180=Y_B0             ;OS_Y TRANS   ;PLOSK PRILAD
N475 X_B180=R40              ;OS_X TRANS; +140 OS_PALCA  D=13.2-0.016/-0/034
N476 Z_B180=R61+126          ;OS_Z TRANS    Z=-45+126=81+/-0.25
N477 ;_____B270-TRANS____K3/4 I  D8.4_L=16.5+1.1 D6_L=34+2.5_______________;B270!!!
N478 Y_B270=Y_B0                ;OS_Y TRANS ;PLOSK PRILAD
N479 X_B270=R60                 ;OS_X TRANS +45 OS_PALCA D=13.2-0.016/-0/034
N480 Z_B270=R40                 ;OS_Z TRANS +140 OS_PALCA  D=13.2-0.016/-0/034
N481 ;_____B90-TRANS______D8.4_L=19.5+1___________;B90!!!
N482 Y_B90=Y_B0                 ;OS_Y TRANS ;PLOSK PRILAD
N483 X_B90=R61+3                ;OS_X TRANS -45+3=-42 OS_ D=8.4_L=19.5+1
N484 Z_B90=297.125-R40-3        ;OS_Z TRANS 297.125-140=157.125  ;290+0.25
N485 
N486 STOPRE
N487 ;**************************YSTANOV 3**********
N489  IF WORKING_STEP==0   GOTOF CHECK_1
N490  IF WORKING_STEP<=1   GOTOB ST1  ;T29.2 SVERLO D=23(KOMB)
N491  M91 ;POKA NEZAK-CA CMENA PALET 
N492  IF WORKING_STEP==2   GOTOB ST2  ;T1.15 SVERLO D=23**POD K=3/4*
N493  IF WORKING_STEP==3   GOTOB ST3  ;T28.2 METCIK K=3/4
N495  IF WORKING_STEP==4   GOTOB ST4  ;T1.1 SVERLO D=16<90
N496  IF WORKING_STEP==5   GOTOB ST5  ;T30.2 SVERLO D=6.8
N497  IF WORKING_STEP==6   GOTOB ST6  ;T14.1 SVERLO D=10.2
N498  IF WORKING_STEP==7   GOTOB ST7  ;T21.2 SVERLO D=11
N499  IF WORKING_STEP==8   GOTOB ST8  ;T25.1 SVERLO D=8.5
N500  IF WORKING_STEP==9   GOTOB ST9  ;T24.1 SVERLO D=6
N501  IF WORKING_STEP==10  GOTOB ST10 ;T11.2 FREZA D=40
N502  IF WORKING_STEP==11  GOTOB ST11 ;T1.1 SVERLO D=16/90
N503  IF WORKING_STEP==12  GOTOB ST12 ;T25.1 SVERLO D=8.3
N504  IF WORKING_STEP==13  GOTOB ST13 ;T1.24 SVERLO D=6/DL
N517  IF WORKING_STEP==999  GOTOB ST999
N518 ENDIF
N520 AA: MSG("NEVERNIY ETAP OBRABOTKI.TI NE PRAV,POSHEVILI MOZGAMI!!!")
N521 M0
N522 GOTOB AA
N523 CHECK_1:
N524 GOTOB START_1