N1 ;DETAL 75570-1701664-10 VSTAVKA
N2 ;OPER 040  YSTANOV I - DETALI A1-A2
N3 ;YSTANOV II - DETALI A3-A4
N4 ;PRISPOSOBLENIE 7274-6452
N5 ;STANOK NDH-6 INV. N 12506 INV.ZAV. A.10003135.06
N6 ;PETROVICH A.V. 13.08.2014
N7 ;TC=45_MIN (NA 1 DETAL)
N8 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B90,X_B90,Z_B90,Y_B0,X_B0,Z_B0,X_BB90,Z_BB90,Y_BB90,X_BB0,Z_BB0,Y_BB0,X_BB180,Z_BB180,Y_BB180,XX_B90,ZZ_B90,YY_B90,XX_BB90,ZZ_BB90,YY_BB90,X_B270,Z_B270,Y_B270,X_BB270,Z_BB270,Y_BB270
N9 DEFINE SMENA_Z AS G0 G53 Z930 D0 M9 M5 
N10 $AC_TIMER[1]=0  ;cikl starta time/min
N11 ;******************************************************
N12 ;DETAL A1 VERH STORONA B0
N13 R11=440.204            ;OS Y
N14 R12=362.369-315        ;OS X
N15 R13=315-115.007        ;OS Z
N16 ;DETAL A2 NIZ STORONA B0
N17 R21=145.224            ;OS Y
N18 R22=362.374-315        ;OS X
N19 R23=315-114.999        ;OS Z
N20 ;DETAL A3 VERH STORONA B180
N21 R31=440.210            ;OS Y
N22 R32=362.435-315        ;OS X
N23 R33=315-115.006        ;OS Z
N24 ;DETAL A4 NIZ STORONA B180
N25 R41=145.269            ;OS Y
N26 R42=362.431-315        ;OS X
N27 R43=315-115.042        ;OS Z
N28 ;*G54: X-CENTR STOLA, Y-PLOSKOST PALETI, Z-CENTR STOLA
N29 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0,B,0);  G54 
N30 ZBEZ=3
N31 XBEZ=10
N32 YBEZ=7
N33 GOTOF _PROVERKA
N34 START_:
N35 ;****************YSTANOV I - DETAL A1***********
N36 ST1: WORK_STEP(1)
N37 SMENA_Z
N38 G0 G54 G17 G40 G90 G94
N39 T="21.1" M6
N40 MSG("T=21.1 SVERLO CENTR. D=16 WORK_STEP(1) ")
N41 G0 G54 B0
N42 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 VERH STORONA B0
N43 REGIME(20,16,2,0.16) 
N44 G54 X=-70+14 Y=68-41 D1 M3
N45 Z=ZBEZ M8
N46 MCALL CYCLE82(6,0,3,,13.4/2,1)
N47 X=-70+14 Y=68-41              ;PRAVO NIZ NA 12
N48 X=-70+14-46 Y=68-41           ;LEVO NIZ NA 12
N49 X=-70+14-30 Y=68-41+70        ;VERH NA 12
N50 X=-70-36 Y=68-12              ;LEVOE NA 25
N51 MCALL
N52 X=-70 Y=68                    ;PRAVOE NA 25
N53 CYCLE82(3,0,3,,8,1)
N54 SMENA_Z
N55 ;********RABOTA NA B270****************************
N56 G0 G54 B270
N57 TRANS X=X_B270 Z=Z_B270 Y=Y_B270    ;TRANS STORONA B270
N58 REGIME(20,16,2,0.08)
N59 G54 X0 Y0 D1 M3
N60 Z20 M8
N61 CYCLE82(3,0,3,,13.4/2,1)
N62 SMENA_Z
N63 ;********RABOTA NA B90****************************
N64 G0 G54 B90
N65 TRANS X=XX_B90 Z=ZZ_B90 Y=YY_B90    ;TRANS STORONA B90
N66 REGIME(20,16,2,0.16) 
N67 G54 X0 Y0 D1 M3
N68 Z20 M8
N69 CYCLE82(3,0,3,,13.4/2,1)
N70 SMENA_Z
N71 ;***************************************************
N72 ST5: WORK_STEP(5)
N73 T="28.1" M6
N74 MSG("T=.(/) SVERLO D=10,WORK_STEP(5) ")
N75 G0 G54 B0
N76 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 VERH STORONA B0
N77 REGIME(12,10,2,0.08) 
N78 G0 G54 X=-70+14 Y=68-41 D1 M3
N79 Z=ZBEZ*2 M8
N80 MCALL CYCLE83(15,0,ZBEZ*2,,44,,8,5,,,1,1)
N81 X=-70+14 Y=68-41              ;PRAVO NIZ
N82 X=-70+14-46 Y=68-41           ;LEVO NIZ
N83 X=-70+14-30 Y=68-41+70        ;VERH
N84 MCALL
N85 SMENA_Z
N86 ;***************************************************
N87 ST10: WORK_STEP(10)
N88 T="23.1" M6
N89 MSG("T=.(/) ZENKER D=10.3*,WORK_STEP(10) ")
N90 G0 G54 B0
N91 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 VERH STORONA B0
N92 REGIME(14,10.2,3,0.12) 
N93 G0 G54 X=-70+14 Y=68-41 D1 M3
N94 Z=ZBEZ*2 M8
N95 MCALL CYCLE85(8,0,ZBEZ*2,,42,,R93,R93*3)
N96 X=-70+14 Y=68-41              ;PRAVO NIZ
N97 X=-70+14-46 Y=68-41           ;LEVO NIZ
N98 X=-70+14-30 Y=68-41+70        ;VERH
N99 MCALL
N100 SMENA_Z
N101 ;***************************************************
N102 ST14: WORK_STEP(14)
N103 T="20.1" M6
N104 MSG("T=.(/) METCHIK D=12*1.75  ,WORK_STEP(14) ")
N105 G0 G54 B0
N106 M0
N107 MSG("OCHISTIT OTVERSTIE OT STRUGKI!")
N108 TRANS X=X_B0 Z=Z_B0 Y=Y_B0   ;TRANS DETAL A1 VERH STORONA B0
N109 REGIME(5,12,1,1.75) 
N110 G0 G54 X=-70+14 Y=68-41 D1 M3
N111 Z=ZBEZ*2 M8
N112 MCALL CYCLE840(8,0,ZBEZ*2,,34,,,3,1)
N113 X=-70+14 Y=68-41             ;PRAVO NIZ
N114 X=-70+14-46 Y=68-41          ;LEVO NIZ
N115 X=-70+14-30 Y=68-41+70       ;VERH
N116 MCALL
N117 SMENA_Z
N118 MSG ("PROVER REZBU")
N119 M0
N120 ST15: WORK_STEP(15)
N121 T="10.2" M6
N122 MSG("T=. SVERLO CENTR. D=30 WORK_STEP(15) ")
N123 G0 G54 B90
N124 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N125 REGIME(20,30,2,0.11) 
N126 G0 G54 X0 Y0 D1 M3
N127 Z=ZBEZ*3 M8
N128 CYCLE82(12,0,ZBEZ*3,,30/2,1)
N129 SMENA_Z
N130 ST16: WORK_STEP(16)
N131 T="6.2" M6
N132 MSG("T=.(/) SVERLO D=25, WORK_STEP(16) ")
N133 G0 G54 B90
N134 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N135 REGIME(15,25,2,0.08) 
N136 G0 G54 X0 Y0 D1 M3
N137 Z=ZBEZ*10 M8
N138 CYCLE83(15,0,20,,71.5,,4,3,,,1,1)
N139 SMENA_Z
N140 ST17: WORK_STEP(17)
N141 T="10.1" M6
N142 MSG("T=.(/) SVERLO D=45, WORK_STEP(17) ")
N143 G0 G54 B90
N144 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N145 REGIME(15,45,2,0.08) 
N146 G0 G54 X0 Y0 D1 M3
N147 Z=ZBEZ*15 M8
N148 CYCLE83(55,0,45,,71.5,,3,2,,,1,1)
N149 SMENA_Z
N150 ;***************************************************
N151 ST20: WORK_STEP(20)
N152 T="12.1" M6
N153 MSG("T=.(/) MIKROBOR D=46, WORK_STEP(20) ")
N154 G0 G54 B90
N155 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N156 REGIME(60,46,1,0.12) 
N157 G0 G54 X0 Y0 D1 M3
N158 Z=ZBEZ M8
N159 CYCLE86(200,0,3,,70.95,,3,0.5,,,0)
N160 SMENA_Z
N161 MSG("PROVER D=46")
N162 M0
N163 ;***************************************************
N164 ST25: WORK_STEP(25)
N165 T="11.2" M6
N166 MSG("T=.(/) REZEC D=48,WORK_STEP(25) ")
N167 G0 G54 B90
N168 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N169 REGIME(90,48,1,0.1) 
N170 G0 G54 X0 Y0 D1 M3
N171 Z=ZBEZ M8
N172 G1 Z-5.15
N173 G0 Z=ZBEZ M9
N174 SMENA_Z
N175 ;***************************************************
N176 ST30: WORK_STEP(30)
N177 T="12.2" M6
N178 MSG("T=.(/) MIKROBOR D=48.5+0.16, WORK_STEP(30) ")
N179 G0 G54 B90
N180 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N181 REGIME(170,48.58,1,0.09) 
N182 G54 X0 Y0 D1 M3
N183 Z=ZBEZ M8
N184 G1 Z-5
N185 SPOS=0
N186 X0.2
N187 SMENA_Z
N188 MSG("MERET R-R D=48.5+0.16!!!")
N189 M0
N190 ;***************************************************
N191 ST35: WORK_STEP(35)
N192 T="15.1" M6
N193 MSG("T=.(/) ZENKOVKA D=22/60 D=50.3+0.19 ,WORK_STEP(35) ")
N194 G0 G54 B90
N195 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N196 REGIME(110,22,4,0.02)
N197 G0 G54 X0 Y0 M3 D3              ;RABOTAET D=22 Z0
N198 Z=ZBEZ*3 M8
N199 POCKET2(10,0,9,,0.01,25.245,,,R93*3,R93,,2,,2)
N200 G0 Z50
N201 SMENA_Z
N202 MSG("PROVER FASKY D=50.3+0.19")
N203 M0
N204 ;***************************************************
N205 ;ST40: WORK_STEP(40)
N206 ;T="7.2" M6
N207 ;MSG("T=.(/) RASKATKA D=48.5,WORK_STEP(40) ")
N208 ;G0 G54 B90
N209 ;M0
N210 ;MSG("OCHISTIT OTVERSTIE OT STRUGKI!")
N211 ;TRANS X=X_B90 Z=Z_B90 Y=Y_B90    ;TRANS STORONA B90
N212 ;REGIME(22,48.5,6,0.035)
N213 ;G0 G54 X0 Y0 D1 M3
N214 ;Z=ZBEZ*3 
N215 ;G1 Z=-5 M8 ; POSMOTRI GLUBINY I KOREKTOR
N216 ;G0 Z=ZBEZ M9
N217 ;SMENA_Z
N218 ;***************************************************
N219 ST45: WORK_STEP(45)
N220 T="7.1" M6
N221 MSG("T=.(/) METCHIK M48*2 ,WORK_STEP(45) ")
N222 G0 G54 B90
N223 M0
N224 MSG("OCHISTIT OTVERSTIE OT STRUGKI!")
N225 TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N226 REGIME(5,48,1,2) 
N227 G0 G54 X0 Y0 D1 M3
N228 Z=ZBEZ*3 M8
N229 CYCLE840 (200,0,ZBEZ*3,,32,,,3,1)
N230 SMENA_Z
N231 MSG("MERIAT REZBY")
N232 M0
N233 ;***************************************************
N234 ST50: WORK_STEP(50)
N235 T="6.2" M6
N236 MSG("T=.(/) SVERLO D=25,WORK_STEP(50) ")
N237 G0 G54 B0
N238 TRANS X=X_B0 Z=Z_B0 Y=Y_B0   ;TRANS DETAL A1 VERH STORONA B0
N239 REGIME(20,25,2,0.11) 
N240 G0 G54 X=-70-36 Y=68-12 D1 M3             ;LEVOE
N241 Z18 M8
N242 CYCLE83(15,0,20,,43,,3,4,,,1,1)
N243 Z20
N244 ;G0 G54 X=-70 Y=68 D1 M3                  ;PRAVOE
N245 ;CYCLE83(15,0,20,,3,,3,2,,,1,1)
N246 SMENA_Z
N247 ;********RABOTA NA B270****************************
N248 G0 G54 B270
N249 TRANS X=X_B270 Z=Z_B270 Y=Y_B270  ;TRANS STORONA B270
N250 REGIME(20,25,2,0.11)
N251 G54 X0 Y0 D1 M3
N252 Z20 M8
N253 CYCLE83(15,0,20,,17.5,,3,2,,,1,1)
N254 SMENA_Z
N255 ST56: WORK_STEP(56)
N256 T="27.1" M6
N257 MSG("T=.(/) FREZA D=20,WORK_STEP(56) ")
N258 G0 G54 B0
N259 TRANS X=X_B0 Z=Z_B0 Y=Y_B0   ;TRANS DETAL A1 VERH STORONA B0
N260 REGIME(120,20,2,0.02)
N261 G0 G54 X=-70 Y=68 D1 M3                  ;PRAVOE
N262 Z=ZBEZ*2 M8
N263 POCKET2(50,0,6,,2,12.76,-70,68,R93,R93,,2,,2)
N264 POCKET2(50,0,6,,5,12.76,-70,68,R93,R93,,2,,2)
N265 POCKET2(50,0,6,,8,12.76,-70,68,R93,R93,,2,,2)
N266 POCKET2(50,0,6,,11,12.76,-70,68,R93,R93,,2,,2)
N267 POCKET2(50,0,6,,14,12.76,-70,68,R93,R93,,2,,2)
N268 POCKET2(50,0,6,,17,12.76,-70,68,R93,R93,,2,,2)
N269 POCKET2(50,0,6,,20,12.76,-70,68,R93,R93,,2,,2)
N270 POCKET2(50,0,6,,23,12.76,-70,68,R93,R93,,2,,2)
N271 POCKET2(50,0,6,,26,12.76,-70,68,R93,R93,,2,,2)
N272 POCKET2(50,0,6,,29.65,12.76,-70,68,R93,R93,,2,,2)
N273 SMENA_Z
N274 ;****************YSTANOV I - DETAL A2***********
N275 ;****************YSTANOV II - DETAL A3***********
N276 ST60: WORK_STEP(60)
N277 T="6.2" M6
N278 MSG("T=.(/) SVERLO D=25,WORK_STEP(60) ")
N279 G0 G54 B90
N280 TRANS X=XX_B90 Z=ZZ_B90 Y=YY_B90   ;TRANS STORONA B90
N281 REGIME(17,25,2,0.08) 
N282 G54 X0 Y0 D1 M3
N283 Z15 M8
N284 CYCLE83(35,0,15,,47.5,,3,2,,,1,1)
N285 SMENA_Z
N286 MSG("PEREUSTONOVI DETAL A1,A2 NA A3,A4")
N287 M0
N288 M192
N289 M0
N290 M193
N291 WORK_DONE
N292 T0 M6
N293 M91
N294 WORK_STEP(0)
N295 M2
N296 M30
N297 ;;TRANS X=X_B0 Z=Z_B0 Y=Y_B0;TRANS DETAL A1 VERH STORONA B0
N298 ;;TRANS X=X_B90 Z=Z_B90 Y=Y_B90   ;TRANS STORONA B90
N299 ;;TRANS X=X_B270 Z=Z_B270 Y=Y_B270  ;TRANS STORONA B270
N300 ;;TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0  ;TRANS DETAL A2 NIZ STORONA B0
N301 ;;TRANS X=X_BB90 Z=Z_BB90 Y=Y_BB90         ;TRANS STORONA B90
N302 ;;TRANS X=X_BB270 Z=Z_BB270 Y=Y_BB270   ;TRANS STORONA B270
N303 ;;TRANS X=X_B180 Z=Z_B180 Y=Y_B180        ;TRANS DETAL A3 VERH STORONA B180
N304 ;;TRANS X=XX_B90 Z=ZZ_B90 Y=YY_B90             ;TRANS STORONA B90
N305 ;;TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180            ;TRANS DETAL A4 NIZ STORONA B180
N306 ;;TRANS X=XX_BB90 Z=ZZ_BB90 Y=YY_BB90     ;TRANS STORONA B90
N307 _PROVERKA:
N308 ;************TRANS DETAL A1 VERH STORONA B0***********
N309 Y_B0=R11        ;OS Y TRANS
N310 X_B0=R12        ;OS X TRANS
N311 Z_B0=R13+55.8   ;OS_Z TRANS R13+TOLCHINA DET.=200+55.8=255.8
N312 ;************TRANS STORONA B90****************************
N313 Y_B90=Y_B0+62   ;OS Y TRANS V OS OTVERSTIIA NA 25 
N314 X_B90=-Z_B0+28  ;OS X TRANS NA TOREC
N315 Z_B90=X_B0      ;OS_Z TRANS V OS OTVERSTIIA NA 25 
N316 ;************TRANS STORONA B270****************************
N317 Y_B270=Y_B0+56  ;OS Y TRANS V OS OTVERSTIIA NA 25 
N318 X_B270=Z_B0-30  ;OS X TRANS NA TOREC
N319 Z_B270=-X_B0+129.8    ;OS_Z TRANS V OS OTVERSTIIA NA 25 
N320 
N321 ;************TRANS DETAL A2 NIZ STORONA B0***********
N322 Y_BB0=R21       ;OS Y TRANS
N323 X_BB0=R22       ;OS X TRANS
N324 Z_BB0=R23+55.8  ;OS_Z TRANS R13+TOLCHINA DET.=200+55.8=255.8
N325 ;************TRANS STORONA B90****************************
N326 Y_BB90=Y_BB0+62      ;OS Y TRANS V OS OTVERSTIIA NA 25 
N327 X_BB90=-Z_BB0+28     ;OS X TRANS NA TOREC
N328 Z_BB90=X_BB0         ;OS_Z TRANS V OS OTVERSTIIA NA 25 
N329 ;************TRANS STORONA B180****************************
N330 Y_BB270=Y_BB0+56     ;OS Y TRANS V OS OTVERSTIIA NA 25 
N331 X_BB270=Z_BB0-30     ;OS X TRANS NA TOREC
N332 Z_BB270=-X_BB0+129.8 ;OS_Z TRANS V OS OTVERSTIIA NA 25
N333 
N334 ;************TRANS DETAL A3 VERH STORONA B180***********
N335 Y_B180=R31      ;OS Y TRANS
N336 X_B180=R32      ;OS X TRANS
N337 Z_B180=R33+55.8 ;OS_Z TRANS R13+TOLCHINA DET.=200+55.8=255.8
N338 ;************TRANS STORONA B90****************************
N339 YY_B90=Y_B180+56        ;OS Y TRANS V OS OTVERSTIIA NA 25 
N340 XX_B90=Z_B180-28        ;OS X TRANS NA TOREC
N341 ZZ_B90=-X_B180+129.8    ;OS_Z TRANS V OS OTVERSTIIA NA 25
N342 
N343 ;************TRANS DETAL A4 NIZ STORONA B180***********
N344 Y_BB180=R41      ;OS Y TRANS
N345 X_BB180=R42      ;OS X TRANS
N346 Z_BB180=R43+55.8 ;OS_Z TRANS R13+TOLCHINA DET.=200+55.8=255.8
N347 ;************TRANS STORONA B90****************************
N348 YY_BB90=Y_BB180+56       ;OS Y TRANS V OS OTVERSTIIA NA 25
N349 XX_BB90=Z_BB180-28       ;OS X TRANS NA TOREC
N350 ZZ_BB90=-X_BB180+129.8   ;OS_Z TRANS V OS OTVERSTIIA NA 25
N351 ;******************************************************************
N352 STOPRE
N353 GOTOB START_
