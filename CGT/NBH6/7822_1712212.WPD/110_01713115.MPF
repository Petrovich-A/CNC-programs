N1 ;detal 7822-1712212 korpus zolotnikov 
N2 ;OPER 130 ******YSTANOV III****B0/B180/B270***G57*******
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;ROTKO A.A.          19.04.10
N5 ;TC=55_MIN 
N6 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N7 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N8 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 m9
N9 $AC_TIMER[1]=0  ;cikl starta time/min
N10 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N11 R40=(315-257.01+0.13)     ;OS_X  YSTANOV 3 X=315-257(257.72)
N12 R50=175                   ;OS_Y  YSTANOV 3
N14 R61=-315+365.09+0.085     ;OS_Z  YSTANOV 3 !!!B180!!!
N13 R60=100-R61               ;OS_Z  YSTANOV 3 !!!B0!!!
N15 GOTOF _proverka
N16 START_1:
N17 ; ********rabota*********G57*****
N18 ST1: WORK_STEP(1)
N19 SMENA_Z
N20 G0 G57 G17 G40 G90 G94          ;g57!!!!
N21 T="2.19" M6
N22 MSG("T2.19(2/19) FREZA D=125,WORK_STEP(1) ")
N23 ;************************************************ T2.19
N24 G0 g57 B0
N25 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N26 REGIME(80,125,7,0.127)
N27 G0 G56 X-148 Y137 D1 M3 
N28 Z0.5
N29 G1 Y30 F=r93 M8
N30 X71
N31 SMENA_Z
N32 G0 G57 B180
N33 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N34 G0 X-73 Y137 D1 M3 
N35 Z0.5
N36 G1 Y30 F=r93 M8
N37 X135
N38 SMENA_Z
N39 ST2: WORK_STEP(2)
N40 T="25.2" M6
N41 MSG("T25.2(2/25)SVERLO D=33 INGEKTOR,WORK_STEP(2)")
N42 ;*************************************************** T4.1
N43 G0 g57 B0
N44 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!L5
N45 REGIME(125,33,1,0.1)
N46 G0 G57 X-145 Y35 D1 M3
N47 MCALL CYCLE81(13,0,13,,91)
N48 X-145 Y35 M7 ;M8 
N49 X-87
N50 X-29
N53 MCALL
N54 SMENA_Z
N55 G0 G57 B180
N56 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N57 G0 X145 Y35 D1 M3
N58 MCALL CYCLE81(13,0,13,,91)
N59 X145 Y35 M7; M8 
N60 X87
N61 X29
N64 MCALL
N65 SMENA_Z
N66 ST3: WORK_STEP(3)
N67 T="11.2" M6
N68 MSG("T11.2(2/11)FREZA D=40,WORK_STEP(3)")
N69 ;*************************************************** T11.2
N70 G0 g57 B270
N71 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N72 REGIME(110,40,3,0.06)
N73 G0 G57 X0 Y85 D1 M3
N74 Z0 M8
N75 G1 Y38 F=r93
N76 G0 Z40
N77 SMENA_Z
N78 ST4: WORK_STEP(4)
N79 T="6.1" M6
N80 MSG("T6.1(1/6) SVERLO D=16<90 ,WORK_STEP(4)")
N81 ;*************************************************** T6.1
N82 G0 g57 B270
N83 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N84 REGIME(26,16,2,0.073)
N85 G0 G57 X0 Y35 D1 M3
N86 Z33 M8
N87 CYCLE82(33,0,3,,7,1)
N88 SMENA_Z
N89 gbTOCheckAtTC = TRUE 
N90 gbErrMsgOnToCheck = TRUE
N91 ST5: WORK_STEP(5)
N92 T="1.2" M6
N93 MSG("T1.2(2/1) SVERLO D=23**POD K=3/4* ,WORK_STEP(5)")
N94 ;*************************************************** T1.2
N95 G0 g57 B270
N96 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N97 REGIME(22,23,2,0.075)
N98 WAIT_TO_CHECK 
N99 G0 G57 X0 Y35 D1 M3
N100 Z11 M8
N101 CYCLE83(11,0,11,,98,,15,10,0,0,1,1)
N102 SMENA_Z
N103 ST6: WORK_STEP(6)
N104 T="29.2" M6
N105 MSG("T29.2(2/29) RAZVERTKA K=3/4,WORK_STEP(6)")
N106 ;*************************************************** T29.2
N107 G0 g57 B270
N108 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N109 REGIME(9,23,5,0.04)
N110 G0 G57 X0 Y35 D1 M3 
N111 Z6 M8
N112 CYCLE82(6,0,6,,23,1)
N113 SMENA_Z
N114 ST7: WORK_STEP(7)
N115 T="3.2" M6
N116 MSG("T3.2(2/3) zenkovka d=10/90 ,WORK_STEP(7)")
N117 ;*************************************************** T3.2
N118 G0 g57 B270
N119 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N120 REGIME(32,10,4,0.038)
N121 G0 G57 X0 Y35 D1 M3  
N122 Z3 M8
N123 G1 Z-7 F=r93
N124 G1 G42 X6.85 Y35
N125 G2 X6.85 Y35 I=AC(0) J=AC(35) F=r93
N126 G1 G40 X0 Y35
N127 G0 Z40 m9
N128 SMENA_Z
N129 ST8: WORK_STEP(8)
N130 T="28.2" M6
N131 MSG("T28.2(2/28) METCIK K=3/4 ,WORK_STEP(8)")
N132 ;*************************************************** T28.2
N133 G0 g57 B270
N134 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N135 ;REGIME(6,24.9,1,1.814)  s76.70 f=139.13
N136 G0 G57 X0 Y35 D1 S71 F129 M3   
N137 Z10 M8
N138 CYCLE840(10,0,10,,24,1,4,3,1)
N139 SMENA_Z
N140 ST9: WORK_STEP(9)
N141 T="27.1" M6
N142 MSG("T27.1(1/27)REZEC D=34.4+0.17  ,WORK_STEP(9)")
N143 ;*************************************************** T27.1
N144 G0 G57 B180
N145 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N146 REGIME(65,34.3,1,0.15)
N147 G0 G57 X145 Y35 D1 M3
N148 MCALL CYCLE81(5,0,5,,89.5)
N149 X145 Y35 M8 
N150 X87
N151 X29
N154 MCALL
N155 SMENA_Z
N156 G0 g57 B0
N157 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N158 G0 G57 X-145 Y35 D1 M3 
N159 Z3 M8
N160 MCALL CYCLE81(3,0,3,,89.5)
N161 X-145 Y35
N162 X-87
N163 X-29
N166 MCALL
N167 M5
N168 SMENA_Z
N169 ST10: WORK_STEP(10)
N170 T="27.2" M6
N171 MSG("T27.2(2/27)REZEC D=39.5 ,WORK_STEP(10)")
N172 ;*************************************************** T9.1
N173 G0 G57 B180
N174 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N175 REGIME(80,39,1,0.12)
N176 G0 G57 X29 Y35 D1 M3 
N177 Z10 M8
N178 CYCLE82(10,0,10,,20.5,1)
N179 X145
N180 CYCLE82(10,0,10,,33.5,1)
N181 SMENA_Z
N182 ST11: WORK_STEP(11)
N183 T="14.2" M6
N184 MSG("T14.2(2/14)FREZA D=125/CH****L=178-0.4* ,WORK_STEP(11)")
N185 ;*************************************************** T14.2
N186 G0 G57 B180
N187 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N188 REGIME(120,125,8,0.085)
N189 G0 G57 X-73 Y137 D1 M3 
N190 Z0 M8
N191 G1 Y22 F=r93
N192 X132
N193 Y137
N194 G0 Z40
N195 SMENA_Z
N196 G0 g57 B0
N197 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N198 G0 G57 X-145 Y137 D1 M3  
N199 Z0 M8
N200 G1 Y22 F=r93
N201 X71
N202 Y137
N203 G0 Z40 M9
N204 SMENA_Z
N205 ST12: WORK_STEP(12)
N206 T="26.1" M6 
N207 MSG("T26.1(1/26)ZENKOVKA D=14<60,WORK_STEP(12)")
N208 ;*************************************************** T7.2
N209 ;N208 G0 G57 B0
N210 ;N209 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N211 REGIME(32,10,4,0.085)  ; s1000
N212 ;N211 G0 G57 X-145 Y35 D1 M3 
N213 ;N212 ATRANS X-145
N214 ;N213 L9
N215 ;N214 ATRANS X58
N216 ;N215 L9
N217 ;N216 ATRANS X58
N218 ;N217 L9
N219 ;N218 ATRANS X58
N220 ;N219 L9
N221 ;N220 ATRANS X58
N222 ;N221 L9
N223 ;N222 ATRANS
N224 ;N223 G0 Z40 M9
N225 SMENA_Z
N226 G0 G57 B180
N227 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N228 G0 g57  X29 Y35 D1 M3
N229 ;G0 g57  X-87 Y35 D1 M3
N230 ;ATRANS X-87
N231 ;L9
N232 ;ATRANS X58
N233 ;L9
N234 ;ATRANS X116
N235 ;L9
N236 ATRANS X29
N237 L8
N238 ATRANS X=145-29
N239 L8
N240 ATRANS
N241 G0 Z40 M9
N242 SMENA_Z
N243 
N265 ST14: WORK_STEP(14)
N266 T="26.2" M6
N267 MSG("T26.2(2/26)RAZVERTKA D=40+0.062*NA L=28*,WORK_STEP(14)")
N268 ;*************************************************** T22.2
N269 G0 G57 B180
N270 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N271 REGIME(10,40,8,0.07)
N272 G0 G57 X145 Y35 D1 M3
N273 Z8 M8
N274 CYCLE85(28,0,8,,28,,40,200)
N275 X29 Y35
N276 CYCLE85(28,0,8,,15,,40,200)
N277 SMENA_Z
N306 ST15: WORK_STEP(15)
N307 T="6.1" M6
N308 MSG("T6.1(1/6)SVERLO D=16<90 ,WORK_STEP(15)")
N309 ;*************************************************** T6.1
N310 G0 G57 B180
N311 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N312 REGIME(26,16,2,0.073)
N313 G0 G57 X-116 Y12 D1 M3
N314 MCALL CYCLE82(3,0,3,,5,1)  
N315 X-116 Y12 M8 
N316 X0
N317 X116
N318 Y48
N319 X0
N320 X-116
N321 MCALL
N324 Y15 X177
N325 G1 Z-6.7 F=r93
N326 g0 z40 m9
N327 SMENA_Z
N328 G0 g57 B0
N329 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N330 G0 G57 Y12 X-159 D1 M3
N331 MCALL CYCLE82(3,0,3,,5,1)   ;bilo z=2.5 na 7648
N332 Y12 X-159 M8 
N333 X-116
N334 X0
N335 X116
N336 Y48
N337 X0
N338 X-116
N339 X-174
N340 MCALL
N343 Y60 X-14                   ;p-p
N344 CYCLE82(3,0,3,,5.6,1)
N345 SMENA_Z
N346 gbTOCheckAtTC = TRUE 
N347 gbErrMsgOnToCheck = TRUE
N348 ST16: WORK_STEP(16)
N349 T="1.29" M6
N350 MSG("T29.1(1/29)VERLO D=6.8*D=6.7+0.2*L=25-1.0,WORK_STEP(16)")
N351 ;*************************************************** T1.29
N352 G0 G57 B0
N353 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N354 REGIME(18,6.8,2,0.072)
N355 WAIT_TO_CHECK 
N356 G0 G57 X116 Y12 D1 M3
N357 MCALL CYCLE81(5,0,5,,24.5)
N358 Y12 X116 M8 
N359 X0
N360 X-116
N361 X-159
N362 Y48 X-174
N363 X-116
N364 X0
N365 X116
N366 MCALL
N367 G0 Z40 M9
N368 SMENA_Z
N369 G0 G57 B180
N370 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N371 G0 g57 y12 X116 D1 M3
N372 MCALL CYCLE81(5,0,5,,24.5)
N373 Y12 X116 M8 
N374 X0
N375 X-116
N376 Y48
N377 X0
N378 X116
N379 MCALL
N380 SMENA_Z
N381 ST17: WORK_STEP(17)
N382 T="1.14" M6
N383 MSG("T14.1(1/14)SVERLO D=10.2*-------------  ,WORK_STEP(17)")
N384 ;*************************************************** T1.14
N385 G0 G57 B180
N386 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N387 REGIME(19,10.2,2,0.076)
N388 G0 g57 y15 X177 D1 M3   
N389 Z6 M8
N390 G1 Z-29.5 F=r93 
N391 G0 Z40 M9
N392 SMENA_Z
N393 ST18: WORK_STEP(18)
N394 T="21.2" M6
N395 MSG("T21.2(2/21)SVERLO D=11---------- ,WORK_STEP(18)")
N396 ;*************************************************** T21.2
N397 G0 G57 B0
N398 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N399 REGIME(19,11,2,0.069)
N400 G0 g57 y60 X-14 D1 M3   ;p-p
N401 Z7 M8
N402 G1 Z-5.6 F=r93
N403 G0 Z40 M9
N404 SMENA_Z
N412 ST19: WORK_STEP(19)
N413 T="1.25" M6
N414 MSG("T25.1(1/25) SVERLO D=8.5------------ ,WORK_STEP(19)")
N415 ;*************************************************** T1.25
N418 REGIME(19,8.5,2,0.071)
N423 G0 G57 B0
N424 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N425 G0 g57 y60 X-14 D1 M3              ;p-p 
N426 Z5 M8
N427 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1) 
N431 SMENA_Z
N443 ;==========================================================
N444 
N445 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N446 ;M0
N447 ;==========================================================
N448 WORK_DONE
N449 GOTOF _ENDE
N450 
N451 ST999:TO_BROKEN
N452  _ENDE:T0 M6
N453 M91
N454 WORK_STEP(0)
N455 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N456 R98=$AC_TIMER[1]
N457 ;N68 R98=R98/60  ;cycle TIME/MIN
N458 M30
N459 
N460 _proverka:
N461 ;____3_ustanov___detal___storona B0/B180/B270____G57______
N462 ;*G57-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N463 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N464 ;N-PRISP.(7274-6070)
N465 ;NA PRISP.(7274-6070-22) R22=0
N466 ZBEZ=3
N467 XBEZ=10
N468 YBEZ=7 
N469 R22=0 
N470 ;______B0 __TRANS __________________     ;B0!!!L5!!
N471 Y_B0=R50                ;OS_Y TRANS  
N472 X_B0=-174+R40+116       ;OS_X TRANS bilo x=-174+57.857+116 (X-0.143) B0
N473 Z_B0=R60+38.9             ;OS_Z TRANS bilo z=50+39-0.15=88.85
N474 ;_____B180__TRANS______________________   ;B180!!L16!!!
N475 Y_B180=Y_B0             ;OS_Y TRANS
N476 X_B180=174-R40-116      ;OS_X TRANS; bilo x=174-57.857-116 (x+0.143) B180
N477 Z_B180=R61+38.9           ;OS_Z TRANS   ; bilo Z=50+39+0.05=89.05
N478 ;_____B270-TRANS X-10.95 Z=184.5 ;Z=186.5     ;B270!!L7!!
N479 Y_B270=Y_B0                 ;OS_Y TRANS ;
N480 X_B270=78-Z_B180            ;OS_X TRANS ; bilo X-10.95
N481 Z_B270=116+69+1.5           ;OS_Z TRANS ; bilo Z=186.5
N482 
N483 STOPRE
N484 ;**************************YSTANOV 3**********
N485 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N486  IF WORKING_STEP==0   GOTOF CHECK_1
N487  IF WORKING_STEP<=1   GOTOB ST1  ;T2.19(2/19)FREZA D=125/chern.
N488  M91 ;poka nezak-ca cmena palet 
N489  IF WORKING_STEP==2   GOTOB ST2  ;T25.2(2/25) SV. D=33 INGEKTOR
N490  IF WORKING_STEP==3   GOTOB ST3  ;T11.2(2/11)FREZA D=40
N491  ;IF WORKING_STEP==4   GOTOB ST4  ;T6.1(1/6) SVERLO D=16<90
N492  IF WORKING_STEP==5   GOTOB ST5  ;T1.2(2/1)SV. D=23**K=3/4
N493  ;IF WORKING_STEP==6   GOTOB ST6  ;T29.2(2/29) RAZVERTKA K=3/4
N494  ;IF WORKING_STEP==7   GOTOB ST7  ;T3.2(2/3) zenkovka d=10/90
N495  IF WORKING_STEP==8   GOTOB ST8  ;T28.2(2/28) METCIK K=3/4
N496  IF WORKING_STEP==9   GOTOB ST9  ;T27.1(1/27)REZEC D=34.4+0.17
N497  IF WORKING_STEP==10 GOTOB ST10  ;T27.2(2/27)REZEC D=39.5
N498  IF WORKING_STEP==11  GOTOB ST11 ;T14.2(2/14)FR.D=125/L=178-0.4
N499  IF WORKING_STEP==12  GOTOB ST12 ;T26.1(1/26)ZENKOVKA D=14<60
N501  IF WORKING_STEP==14  GOTOB ST14 ;T26.2(2/26)RAZ-KA D=40+0.062*
N502  IF WORKING_STEP==15  GOTOB ST15 ;T6.1(1/6)SVERLO D=16<90
N503  IF WORKING_STEP==16  GOTOB ST16 ;T29.1(1/29)SVERLO D=6.8
N504  IF WORKING_STEP==17  GOTOB ST17 ;T14.1(1/14)SVERLO D=10.2*
N505  IF WORKING_STEP==18  GOTOB ST18 ;T21.2(2/21)SVERLO D=11
N506  IF WORKING_STEP==19  GOTOB ST19 ;T25.1(1/25) SVERLO D=8.5
N508  IF WORKING_STEP==999  GOTOB ST999
N509 ENDIF
N510 
N511 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N512 M0
N513 GOTOB AA
N514 CHECK_1:
N515 GOTOB START_1
N516 ; NE UDOLAYT VSE RABOTAET
