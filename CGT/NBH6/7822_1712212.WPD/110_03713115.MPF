N1 ;detal 7822-1712212 korpus zolotnikov 
N2 ;OPER 130 ******YSTANOV III****B0/B180/B270***G57*******
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;ROTKO A.A. 19.04.10 ;KOPTUAEV S.G_19.12.2012
N5 ;TC=25_MIN 
N6 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N7 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N8 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 m9
N9 $AC_TIMER[1]=0  ;cikl starta time/min
N10 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N11 R40=(315-257.01+0.13)     ;OS_X  YSTANOV 3 X=315-257(257.72)
N12 R50=175                   ;OS_Y  YSTANOV 3
N13 R61=-315+365.09+0.085     ;OS_Z  YSTANOV 3 !!!B180!!!
N14 R60=100-R61               ;OS_Z  YSTANOV 3 !!!B0!!!
N15 GOTOF _proverka
N16 START_1:
N17 ; ********rabota*********G57*****
N18 ST1: WORK_STEP(1)
N19 SMENA_Z
N20 G0 G57 G17 G40 G90 G94          ;g57!!!!
N21 T="2.19" M6
N22 MSG("T2.19(2/19) FREZA D=125,WORK_STEP(1) ")
N23 ;************************************************ T2.19
N24 G0 g57 B0
N25 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N26 REGIME(80,125,7,0.127)
N27 G0 G56 X-148 Y137 D1 M3 
N28 Z0.5
N29 G1 Y30 F=r93 M8
N30 X71
N31 SMENA_Z
N32 G0 G57 B180
N33 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N34 G0 X-73 Y137 D1 M3 
N35 Z0.5
N36 G1 Y30 F=r93 M8
N37 X135
N38 SMENA_Z
N39 ST2: WORK_STEP(2)
N40 T="11.2" M6
N41 MSG("T11.2(2/11)FREZA D=40,WORK_STEP(2)")
N42 ;*************************************************** T11.2
N43 G0 g57 B270
N44 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N45 REGIME(110,40,3,0.06)
N46 G0 G57 X0 Y85 D1 M3
N47 Z0
N48 G1 Y38 F=r93
N49 G0 Z40
N50 SMENA_Z
N51 ST3: WORK_STEP(3)
N52 T="6.1" M6
N53 MSG("T6.1(1/6) SVERLO D=16<90 ,WORK_STEP(3)")
N54 ;*************************************************** T6.1
N55 G0 g57 B270
N56 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N57 REGIME(26,16,2,0.073)
N58 G0 G57 X0 Y35 D1 M3
N59 Z33 M8
N60 CYCLE82(33,0,3,,7,1)
N61 SMENA_Z
N62 gbTOCheckAtTC = TRUE 
N63 gbErrMsgOnToCheck = TRUE
N64 
N84 ST4: WORK_STEP(4)
N85 T="1.2" M6
N86 MSG("T1.2(2/1) SVERLO D=23**POD K=3/4* ,WORK_STEP(4)")
N87 ;*************************************************** T1.2
N88 G0 g57 B270
N89 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N90 REGIME(22,23,2,0.075)
N91 WAIT_TO_CHECK 
N92 G0 G57 X0 Y35 D1 M3
N93 Z11 M8
N94 CYCLE83(11,0,11,,98,,15,10,0,0,1,1)
N95 SMENA_Z
N96 
N97 ST5: WORK_STEP(5)
N99 T="29.2" M6
N100 MSG("T29.2(2/29) RAZVERTKA K=3/4,WORK_STEP(5)")
N101 ;*************************************************** T29.2
N102 G0 g57 B270
N103 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N104 REGIME(9,23,5,0.04)
N105 G0 G57 X0 Y35 D1 M3 
N106 Z6 M8
N107 CYCLE82(6,0,6,,23,1)
N108 SMENA_Z
N109 ST6: WORK_STEP(6)
N110 T="3.2" M6
N111 MSG("T3.2(2/3) zenkovka d=10/90 ,WORK_STEP(6)")
N112 ;*************************************************** T3.2
N113 G0 g57 B270
N114 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N115 REGIME(32,10,4,0.038)
N116 G0 G57 X0 Y35 D1 M3  
N117 Z3 M8
N118 G1 Z-7 F=r93
N119 G1 G42 X6.85 Y35
N120 G2 X6.85 Y35 I=AC(0) J=AC(35) F=r93
N121 G1 G40 X0 Y35
N122 G0 Z40 m9
N123 SMENA_Z
N124 
N125 ST7: WORK_STEP(7)
N127 T="28.2" M6
N128 MSG("T28.2(2/28) METCIK K=3/4 ,WORK_STEP(7)")
N129 ;*************************************************** T28.2
N130 G0 g57 B270
N131 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N132 ;REGIME(6,24.9,1,1.814)  s76.70 f=139.13
N133 G0 G57 X0 Y35 D1 S71 F129 M3   
N134 Z10 M8
N135 CYCLE840(10,0,10,,24,1,4,3,1)
N136 SMENA_Z
N137 
N138 ST8: WORK_STEP(8)
N139 T="14.2" M6
N140 MSG("T14.2(2/14)FREZA D=125/CH****L=178-0.4* ,WORK_STEP(8)")
N141 ;*************************************************** T14.2
N142 G0 G57 B180
N143 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N144 REGIME(120,125,8,0.085)
N145 G0 G57 X-73 Y137 D1 M3 
N146 Z0 M8
N147 G1 Y22 F=r93
N148 X132
N149 Y137
N150 G0 Z40
N151 SMENA_Z
N152 G0 g57 B0
N153 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N154 G0 G57 X-145 Y137 D1 M3  
N155 Z0 M8
N156 G1 Y22 F=r93
N157 X71
N158 Y137
N159 G0 Z40 M9
N160 SMENA_Z
N161 ST9: WORK_STEP(9)
N162 T="6.1" M6
N163 MSG("T6.1(1/6)SVERLO D=16<90 ,WORK_STEP(9)")
N164 ;*************************************************** T6.1
N165 G0 G57 B180
N166 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N167 REGIME(26,16,2,0.073)
N168 G0 G57 X-116 Y12 D1 M3
N169 MCALL CYCLE82(3,0,3,,5,1)  
N170 X-116 Y12 M8 
N171 X0
N172 X116
N173 Y48
N174 X0
N175 X-116
N176 MCALL
N177 Y15 X177
N178 G1 Z-6.7 F=r93
N179 g0 z40 m9
N180 SMENA_Z
N181 G0 g57 B0
N182 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N183 G0 G57 Y12 X-159 D1 M3
N184 MCALL CYCLE82(3,0,3,,5,1)   ;bilo z=2.5 na 7648
N185 Y12 X-159 M8 
N186 X-116
N187 X0
N188 X116
N189 Y48
N190 X0
N191 X-116
N192 X-174
N193 MCALL
N194 Y60 X-14                   ;p-p
N195 CYCLE82(3,0,3,,5.6,1)
N196 SMENA_Z
N197 gbTOCheckAtTC = TRUE 
N198 gbErrMsgOnToCheck = TRUE
N199 ST10: WORK_STEP(10)
N200 T="1.29" M6
N201 MSG("T29.1(1/29)VERLO D=6.8*D=6.7+0.2*L=25-1,WORK_STEP(10)")
N202 ;*************************************************** T1.29
N203 G0 G57 B0
N204 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N205 REGIME(18,6.8,2,0.072)
N206 WAIT_TO_CHECK 
N207 G0 G57 X116 Y12 D1 M3
N208 MCALL CYCLE81(5,0,5,,24.5)
N209 Y12 X116 M8 
N210 X0
N211 X-116
N212 X-159
N213 Y48 X-174
N214 X-116
N215 X0
N216 X116
N217 MCALL
N218 G0 Z40 M9
N219 SMENA_Z
N220 G0 G57 B180
N221 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N222 G0 g57 y12 X116 D1 M3
N223 MCALL CYCLE81(5,0,5,,24.5)
N224 Y12 X116 M8 
N225 X0
N226 X-116
N227 Y48
N228 X0
N229 X116
N230 MCALL
N231 SMENA_Z
N232 ST11: WORK_STEP(11)
N233 T="1.14" M6
N234 MSG("T14.1(1/14)SVERLO D=10.2*-------------  ,WORK_STEP(11)")
N235 ;*************************************************** T1.14
N236 G0 G57 B180
N237 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N238 REGIME(19,10.2,2,0.076)
N239 G0 g57 y15 X177 D1 M3   
N240 Z6 M8
N241 G1 Z-29.5 F=r93 
N242 G0 Z40 M9
N243 SMENA_Z
N244 ST12: WORK_STEP(12)
N245 T="21.2" M6
N246 MSG("T21.2(2/21)SVERLO D=11---------- ,WORK_STEP(12)")
N247 ;*************************************************** T21.2
N248 G0 G57 B0
N249 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N250 REGIME(19,11,2,0.069)
N251 G0 g57 y60 X-14 D1 M3   ;p-p
N252 Z7 M8
N253 G1 Z-5.6 F=r93
N254 G0 Z40 M9
N255 SMENA_Z
N256 ST13: WORK_STEP(13)
N257 T="1.25" M6
N258 MSG("T25.1(1/25) SVERLO D=8.5------------ ,WORK_STEP(13)")
N259 ;*************************************************** T1.25
N260 REGIME(19,8.5,2,0.071)
N261 G0 G57 B0
N262 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N263 G0 g57 y60 X-14 D1 M3              ;p-p 
N264 Z5 M8
N265 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1) 
N266 SMENA_Z
N267 ;==========================================================
N268 
N269 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N270 ;M0
N271 ;==========================================================
N272 WORK_DONE
N273 GOTOF _ENDE
N274 
N275 ST999:TO_BROKEN
N276  _ENDE:T0 M6
N277 M91
N278 WORK_STEP(0)
N279 MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N280 R98=$AC_TIMER[1]
N281 ;N68 R98=R98/60  ;cycle TIME/MIN
N282 M30
N283 
N284 _proverka:
N285 ;____3_ustanov___detal___storona B0/B180/B270____G57______
N286 ;*G57-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N287 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N288 ;N-PRISP.(7274-6070)
N289 ;NA PRISP.(7274-6070-22) R22=0
N290 ZBEZ=3
N291 XBEZ=10
N292 YBEZ=7 
N293 R22=0 
N294 ;______B0 __TRANS __________________     ;B0!!!L5!!
N295 Y_B0=R50                ;OS_Y TRANS  
N296 X_B0=-174+R40+116       ;OS_X TRANS bilo x=-174+57.857+116 (X-0.143) B0
N297 Z_B0=R60+38.9             ;OS_Z TRANS bilo z=50+39-0.15=88.85
N298 ;_____B180__TRANS______________________   ;B180!!L16!!!
N299 Y_B180=Y_B0             ;OS_Y TRANS
N300 X_B180=174-R40-116      ;OS_X TRANS; bilo x=174-57.857-116 (x+0.143) B180
N301 Z_B180=R61+38.9           ;OS_Z TRANS   ; bilo Z=50+39+0.05=89.05
N302 ;_____B270-TRANS X-10.95 Z=184.5 ;Z=186.5     ;B270!!L7!!
N303 Y_B270=Y_B0                 ;OS_Y TRANS ;
N304 X_B270=78-Z_B180            ;OS_X TRANS ; bilo X-10.95
N305 Z_B270=116+69+1.5           ;OS_Z TRANS ; bilo Z=186.5
N306 
N307 STOPRE
N308 ;**************************YSTANOV 3**********
N309 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N310  IF WORKING_STEP==0   GOTOF CHECK_1
N311  IF WORKING_STEP<=1   GOTOB ST1  ;T2.19(2/19)FREZA D=125/chern.
N312  M91 ;poka nezak-ca cmena palet 
N313  IF WORKING_STEP==2   GOTOB ST2  ;T11.2(2/11)FREZA D=40
N314  IF WORKING_STEP==3   GOTOB ST3  ;T6.1(1/6) SVERLO D=16<90
N315  IF WORKING_STEP==4   GOTOB ST4  ;T1.2(2/1)SV. D=23**K=3/4
N316  IF WORKING_STEP==5   GOTOB ST5  ;T29.2(2/29)RAZVERTKA K=3/4
N317  IF WORKING_STEP==6   GOTOB ST6  ;T3.2(2/3) zenkovka d=10/90
N318  IF WORKING_STEP==7   GOTOB ST7  ;T28.2(2/28) METCIK K=3/4
N319  IF WORKING_STEP==8   GOTOB ST8  ;T14.2(2/14) FR.D=125/CHIST.
N320  IF WORKING_STEP==9   GOTOB ST9  ;T6.1(1/6)SVERLO D=16<90
N321  IF WORKING_STEP==10  GOTOB ST10 ;T29.1(1/29)SVERLO D=6.8
N322  IF WORKING_STEP==11  GOTOB ST11 ;T14.1(1/14)SVERLO D=10.2*
N323  IF WORKING_STEP==12  GOTOB ST12 ;T21.2(2/21)SVERLO D=11
N324  IF WORKING_STEP==13  GOTOB ST13 ;T25.1(1/25) SVERLO D=8.5
N325  IF WORKING_STEP==999  GOTOB ST999
N326 ENDIF
N327 
N328 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N329 M0
N330 GOTOB AA
N331 CHECK_1:
N332 GOTOB START_1
N333 ; NE UDOLAYT VSE RABOTAET
