N1 ;DETAL 7556-1712412-20 KORPUS GIDRO MEXAN PEREDACHI 
N2 ;OPER 100 ******YSTANOV III****B0/B180/B270*G57**
N3 ;STANOK NBH-6 INV 12506
N4 ;KOPTAYEV. (07.03.2012)
N5 ;KOPTUAEV. (T8.1 KOMBIN SV=8.5 L=28/CEKOVKA D=28)(26.12.2012)
N6 ;UBRAL SVERLO D=8.4, DOBAVIL CENTROVKU D=4 NA TOREC B180! (11.01.2013)
N7 ;VASILEVSKI A.I. VNEDRIL ANAJ D=4.2/ D=6.8   (04.06.14)
N8 ;PETROVICH A.V. VNEDRIL CENTROVKY D=4 VMESTO ANAJ D=4.2 (23.01.19)
N9 ;TC=21_MIN
N10 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N11 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N12 DEFINE SMENA_Z AS G0 G53 Z930 D0 M5 M9
N13 $AC_TIMER[1]=0  ;CIKL STARTA TIME/MIN
N14 ;***PERENOS S "OBKATKI"***R10(OS_X) R20(OS_Y)***
N15 R40=315-(460-289.845) ;OS_X (ZDES IZM=170_PALECB180! X145
N16 R50=170.03            ;OS_Y  YSTANOV 3
N17 R61=314.1-(382-138.08);OS_Z YSTANOV3(ZDES IZM=138_PALEC)B180!Z71
N18 R61=315-(382-138.08)  ;OS_Z YSTANOV3(ZDES IZM=138_PALEC)B180!Z71
N19 R60=138-R61           ;OS_Z  YSTANOV 3 !!!B0!!!   Z67
N20 GOTOF _PROVERKA
N21 START_1:
N22 ;***************RABOTA  G57*********************
N23 ST1: WORK_STEP(1)
N24 ; OVR=80
N25 SMENA_Z
N26 G0 G57 G17 G40 G90 G94          ;G57!!!!
N27 T="5.2" M6
N28 MSG("T5.2(2/5) FREZA D=125,WORK_STEP(1) ")
N29 ;************************************************
N30 G0 G57 B0
N31 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!
N32 REGIME(80,125,7,0.127)
N33 G0 G57 X=0 Y137 D1 M3 
N34 Z0.5
N35 G1 Y35 F=R93 M8
N36 X293
N37 SMENA_Z
N38 G0 G57 B180
N39 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!
N40 G0 X-293 Y137 D1 M3 
N41 Z0.5
N42 G1 Y35 F=R93 M8
N43 X0
N44 SMENA_Z
N45 ST2: WORK_STEP(2)
N46 T="1.1" M6
N47 MSG("T1.1(1/1)FREZA D=40,WORK_STEP(2)")
N48 ;***************************************************
N49 G0 G57 B270
N50 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!
N51 REGIME(110,40,3,0.06)
N52 G0 G57 X=0+30 Y70 D1 M3
N53 Z0.5 M8
N54 G1 Y=35+5 X0 F=R93
N55 G0 Z40
N56 SMENA_Z
N57 ST3: WORK_STEP(3)
N58 T="1.2" M6
N59 MSG("T2.1 KOMBIN D1=SV=8.5_L=28/D2=CEKOVKA_D=28,WORK_STEP(3)")
N60 ;***************************************************
N61 G0 G57 B270
N62 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N63 REGIME(80,8.5,2,0.11)   ;D1=SV=8.5_L=28
N64 X0 Y35 D1 M3
N65 Z19 M7       ;!!MOLODECHNO!!
N66 ;Z12 M7      ;!!!!!MAZ!!!!!!
N67 G1 Z-15 F=R93
N68 REGIME(130,28,2,0.07)    ;D2=CEKOVKA_D=28
N69 G1 Z=0 F=R93 D2
N70 G0 Z40 M9
N71 SMENA_Z
N72 ST5: WORK_STEP(5)
N73 T="4.2" M6
N74 MSG("T4.2(2/4) SV.ANAJ D=8.5-DL_L=220 ,WORK_STEP(5)")
N75 ;***************************************************
N76 G0 G57 B270
N77 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_
N78 REGIME(50,8.5,2,0.085) ;ANAJ SVERLO (S1870 F318)
N79 ;REGIME(17,8.5,2,0.065) ;BELAZ
N80 G0 G57 Y35 X0 D1 M3  
N81 Z11 M7  ;NA ANAI SVERLO
N82 CYCLE82(50,0,11,,203,0.1) ;NA ANAJ SVERLO
N83 ;G0 Z-10 S1000 M3
N84 ;G1 Z-82 F300
N85 ;S=R94
N86 ;G1 Z-203 F=R93 M7
N87 ;S1000
N88 ;G1 Z-35 F5000
N89 ;CYCLE83(5,0,5,,203,,20,15,0,0,1,1,3,,,,)
N90 G0 Z40 M9
N91 SMENA_Z
N92 ST6: WORK_STEP(6)
N93 T="21.2" M6
N94 MSG("T21.2(2/21)FREZA D=125 CHIST. R-R 178-0.4,WORK_STEP(6)")
N95 ;***************************************************
N96 G0 G57 B180
N97 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!
N98 REGIME(120,125,8,0.085)
N99 WAIT_TO_CHECK
N100 G0 G57 X-293 Y137 D1 M3 
N101 Z0 M8
N102 G1 Y22 F=R93
N103 X0
N104 Y137
N105 G0 Z40
N106 SMENA_Z
N107 G0 G57 B0
N108 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!
N109 G0 G57 X0 Y137 D1 M3  
N110 Z0 M8
N111 G1 Y22 F=R93
N112 X293
N113 Y137
N114 G0 Z40 M9
N115 SMENA_Z
N116 GBTOCHECKATTC = TRUE 
N117 GBERRMSGONTOCHECK = TRUE
N118 ST7: WORK_STEP(7)
N119 T="3.2" M6
N120 MSG("T3.2(2/3)ZENKER ANAJ D=45-54,WORK_STEP(7) ")
N121 ;************************************************
N122 G0 G57 B180
N123 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180!
N124 ;REGIME(16,50,5,0.01)
N125 REGIME(120,50,2,0.05)   ;ANAJ
N126 G0 G57 X-29 Y35 M3 D1
N127 Z10 M8
N128 MCALL CYCLE82(10,0,3,,2.25,2)
N129 X-29 Y35      ;1
N130 X-87 Y35      ;2
N131 X-145 Y35     ;3
N132 X-203 Y35     ;4
N133 X-261 Y35     ;5
N134 MCALL
N135 SMENA_Z
N136 ST9: WORK_STEP(9)
N137 T="12.1" M6
N138 MSG("T12.1(1/12)SV.ANAJ D1=6.8 L=23.1+1.6+D2=10.3 ,WORK_STEP(9)")
N139 ;***************************************************
N140 G0 G57 B0
N141 TRANS X=X_B0 Z=Z_B0 Y=Y_B0+35           ; B0!
N142 REGIME(90,6.8,2,0.11)
N143 WAIT_TO_CHECK 
N144 G0 G57 X203 Y25 D1 M3
N145 Z20 M8
N146 MCALL CYCLE81(7,0,7,,24.5)
N147 X203 Y25
N148 X290 Y13
N149 X116
N150 X0
N151 Y=-(36-13)  ;Y-23
N152 X58
N153 X161
N154 X245
N155 X290
N156 MCALL
N157 SMENA_Z
N158 ST10: WORK_STEP(10)
N159 T="2.2" M6
N160 ;MSG("T2.2(2/2)KOMB.SV.ANAJ D1=4.2 L=19.7+1 ,WORK_STEP(10)")
N161 MSG("T2.2(2/2) CENTROVKA KOROT. D=4 ,WORK_STEP(10)")
N162 ;***************************************************
N163 G0 G57 B180
N164 TRANS X=X_B180 Z=Z_B180 Y=Y_B180   ;B180
N165 REGIME(14,4,2,0.026)
N166 ;REGIME(90,4.2,2,0.14) ;ANAJ
N167 WAIT_TO_CHECK
N168 G0 G57 X-29 Y35 D1 M3
N169 Z9 M8
N170 MCALL CYCLE82(9,0,9,,1.63,1)
N171 HOLES2(-29,35,33.5,45,0,4)   ;1_GRUPPA_4_OTV
N172 HOLES2(-87,35,33.5,45,0,4)   ;2_GRUPPA_4_OTV
N173 HOLES2(-145,35,33.5,45,0,4)  ;3_GRUPPA_4_OTV
N174 HOLES2(-203,35,33.5,45,0,4)  ;4_GRUPPA_4_OTV
N175 HOLES2(-261,35,33.5,45,0,4)  ;5_GRUPPA_4_OTV
N176 MCALL
N177 SMENA_Z
N178 ;***************************************************
N179 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL")
N180 ;M0
N181 ;***************************************************
N182 WORK_DONE
N183 GOTOF _ENDE
N184 ST999:TO_BROKEN
N185 _ENDE:T="5.2"M6
N186 M91
N187 WORK_STEP(0)
N188 ;MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N189 R98=$AC_TIMER[1]
N190 ;N68 R98=R98/60  ;CYCLE TIME/MIN
N191 M30
N192 ;***************************************************
N193 _PROVERKA:
N194 ;____3_USTANOV___DETAL___STORONA B0/B180/B270____G57______
N195 ;*G57-X-CENTR STOLA,Y-PLOSKOST PALETI,Z-CENTR STOLA
N196 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,0);  G57 B0
N197 ;N-PRISP.(7274-6385)
N198 ZBEZ=3
N199 XBEZ=10
N200 YBEZ=7 
N201 R22=0 
N202 ;_____B180__TRANS______________________   ;B180!!
N203 Y_B180=R50             ;OS_Y TRANS
N204 X_B180=R40             ;OS_X TRANS;  EST X=145  B180
N205 Z_B180=R61+18          ;OS_Z TRANS  EST IDEAL Z=71+18=89*2=178
N206 ;______B0___TRANS______________________   ;B0!!!L5!!
N207 Y_B0=Y_B180              ;OS_Y TRANS  
N208 X_B0=-R40                ;OS_X TRANS EST  X=-145 B0
N209 Z_B0=R60+21.8            ;OS_Z TRANS EST IDEAL Z=67+21.8=88.8*2=177.8
N210 ;_____B270__TRANS_______________________  ;B270
N211 Y_B270=Y_B180         ;OS_Y TRANS ;
N212 X_B270=-R61+19.5      ;OS_X TRANS ; BILO X-10.95
N213 Z_B270=X_B180+14      ;OS_Z TRANS ; BILO Z=186.5
N214 STOPRE
N215 ;**************************YSTANOV 3**********
N216 ;*PORAYDOK OBRABOTKI***METKA***MAGAZIN/GNEZDO*******NALADKA INSTRUMENTA******
N217  IF WORKING_STEP==0  GOTOF CHECK_1
N218  IF WORKING_STEP<=1  GOTOB ST1 ;T5.2 FREZA D=125
N219  M91 ;POKA NEZAK-CA CMENA PALET 
N220  IF WORKING_STEP==2  GOTOB ST2 ;T1.1 FREZA D=40
N221  IF WORKING_STEP==3  GOTOB ST3 ;T2.1 KOMBIN D1=SV=8.5_L=28/D2=CEKOVKA_D=28
N222  ;IF WORKING_STEP==3  GOTOB ST3 ;T2.1 SVERLO D=16<90
N223  ;IF WORKING_STEP==4  GOTOB ST4 ;T8.1(1/8) SVERLO D=8.5 KOROTK
N224  IF WORKING_STEP==5  GOTOB ST5 ;T4.2 SVERLO ANAJ D=8.5 DL_L=203
N225  IF WORKING_STEP==6  GOTOB ST6 ;T21.2 FREZA D=125 CHIST
N226  IF WORKING_STEP==7  GOTOB ST7 ;T3.2ZENKER ANAJ D=45-54   
N227  ;IF WORKING_STEP==8  GOTOB ST8 ;T2.1 SVERLO D=16<90
N228  IF WORKING_STEP==9  GOTOB ST9 ;T12.1 SVERLO ANAJ D=6.8
N229  IF WORKING_STEP==10  GOTOB ST10  ;T2.2 CENTROVKA D=4.2
N230  IF WORKING_STEP==999  GOTOB ST999
N231 ENDIF 
N232 AA: MSG("NEVERNIY ETAP OBRABOTKI.TI NE PRAV,POSHEVILI MOZGAMI!!!")
N233 M0
N234 GOTOB AA
N235 CHECK_1:
N236 GOTOB START_1
N237 ; NE UDOLAYT VSE RABOTAET