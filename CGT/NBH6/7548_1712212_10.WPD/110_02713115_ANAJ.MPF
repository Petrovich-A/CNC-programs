N1 ;detal 7548-1712212-10 korpus zolotnikov 
N2 ;OPER 130 ******YSTANOV III****B0/B180/B270***G57*******
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;KOZAKEVICH D.O          15.07.11
N5 ;TC=29.5_MIN +DOBAVIL(RAZ-S P-P CENT.SV D12_L=6,D11_L=5.6,D8.5_L=112.7)
N6 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N7 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N8 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 m9
N9 $AC_TIMER[1]=0  ;cikl starta time/min
N10 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N11 R40=315-257.01            ;OS_X  YSTANOV 3 X=315-257(257.72)
N12 R50=175                   ;OS_Y  YSTANOV 3
N13 R61=-315+365.09           ;OS_Z  YSTANOV 3 !!!B180!!!
N14 R60=100-R61               ;OS_Z  YSTANOV 3 !!!B0!!!
N15 ;*****************************
N16 ;*********** VREMIA PO INSTR********************
N17 ;T2.19(2/19)FREZA D=125/chern.  4_MIN
N18 ;T11.2(2/11)FREZA D=40            0.5_MIN
N19 ;T6.1(1/6) SVERLO D=16<90    0.5_MIN
N20 ;T1.2(2.1)SV. D=23**K=3/4  3_MIN
N21 ;T29.2(2/29) SVERLO D=23-KOMB(ANAJ)RAZVERTKA K=3/4   1.5_MIN
N22 ;T3.2(2/3) zenkovka d=10/90   0.5_MIN
N23 ;T28.2(2/28) METCIK K=3/4        1_MIN
N24 ;T14.2(2/14) FREZA D=125        4.5_MIN
N25 ;T6.1(1/6)SVERLO D=16<90       3_MIN
N26 ;T29.1(1/29)SVERLO D=6.8     4.5_MIN
N27 ;T14.1(1/14)SVERLO D=10.2*    0.5_MIN
N28 ;T21.2(2.21)SVERLO D=11      1_MIN
N29 ;T25.1(1/25) SVERLO D=8.5   3.5_MIN
N30 ;T24.1(1.24) SVERLO D=6/DL*  1.5_MIN
N31 ;**************************************************
N32 GOTOF _proverka
N33 START_1:
N34 ; ********rabota*********G57*****
N35 ST1: WORK_STEP(1)
N36; OVR=80
N37 SMENA_Z
N38 G0 G57 G17 G40 G90 G94          ;g57!!!!
N39 T="2.19" M6
N40 MSG("T2.19(2/19) FREZA D=125,WORK_STEP(1) ")
N41 ;************************************************ T2.19
N42 G0 g57 B0
N43 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N44 REGIME(80,125,7,0.127)
N45 G0 G56 X-148 Y137 D1 M3 
N46 Z0.5
N47 G1 Y30 F=r93 M8
N48 X71
N49 SMENA_Z
N50 G0 G57 B180
N51 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N52 G0 X-73 Y137 D1 M3 
N53 Z0.5
N54 G1 Y30 F=r93 M8
N55 X135
N56 SMENA_Z
N57 
N58 ;ST2: WORK_STEP(2)
N59 ;T="11.2" M6
N60 ;MSG("T11.2(2/11)FREZA D=40,WORK_STEP(2)")
N61 ;;*************************************************** T11.2
N62 ;G0 g57 B270
N63 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N64 ;REGIME(110,40,3,0.06)
N65 ;G0 G57 X0 Y85 D1 M3
N66 ;Z0
N67 ;G1 Y38 F=r93
N68 ;G0 Z40
N69 ;SMENA_Z
N70 
N71 ST3: WORK_STEP(3)
N72 T="29.2" M6
N73 MSG("T29.2(2/29) SVERLO D=23(KOMB) ,WORK_STEP(3)")
N74 ;*************************************************** T6.1
N75 G0 g57 B270
N76 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N77 REGIME(90,23,1,0.22)
N78 G0 G57 X0 Y35 D1 M3
N79 Z40 M7
N80 G1 Z3
N81 Z4
N82 S900
N83 G4 F2
N84 G1 Z-0.5 F190
N85 G0 Z40
N86 SMENA_Z
N87 ;ST3: WORK_STEP(3)
N88 ;T="6.1" M6
N89 ;MSG("T6.1(1/6) SVERLO D=16<90 ,WORK_STEP(3)")
N90 ;;*************************************************** T6.1
N91 ;G0 g57 B270
N92 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N93 ;REGIME(26,16,2,0.073)
N94 ;G0 G57 X0 Y35 D1 M3
N95 ;Z33 M8
N96 ;CYCLE82(33,0,3,,7,1)
N97 ;SMENA_Z
N98 gbTOCheckAtTC = TRUE 
N99 gbErrMsgOnToCheck = TRUE
N100 
N101 ST4: WORK_STEP(4)
N102 T="1.2" M6
N103 MSG("T1.2(2/1) SVERLO D=23**POD K=3/4* ,WORK_STEP(4)")
N104 ;*************************************************** T1.2
N105 G0 g57 B270
N106 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N107 REGIME(22,23,2,0.075)
N108 WAIT_TO_CHECK 
N109 G0 G57 X0 Y35 D1 M3
N110 Z11 M8
N111 G1 Z-21 F200
N112 F=R93
N113 CYCLE83(20,-26,5,,72,,15,10,0,0,1,1)
N114 SMENA_Z
N115 
N116 ;ST5: WORK_STEP(5)
N117 ;T="29.2" M6
N118 ;MSG("T29.2(2/29) RAZVERTKA K=3/4,WORK_STEP(5)")
N119 ;;*************************************************** T29.2
N120 ;G0 g57 B270
N121 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N122 ;REGIME(9,23,5,0.04)
N123 ;G0 G57 X0 Y35 D1 M3 
N124 ;Z6 M8
N125 ;CYCLE82(6,0,6,,23,1)
N126 ;SMENA_Z
N127 ;
N128 ;ST6: WORK_STEP(6)
N129 ;T="3.2" M6
N130 ;MSG("T3.2(2/3) zenkovka d=10/90 ,WORK_STEP(6)")
N131 ;;*************************************************** T3.2
N132 ;G0 g57 B270
N133 ;TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N134 ;REGIME(32,10,4,0.038)
N135 ;G0 G57 X0 Y35 D1 M3  
N136 ;Z3 M8
N137 ;G1 Z-7 F=r93
N138 ;G1 G42 X6.85 Y35
N139 ;G2 X6.85 Y35 I=AC(0) J=AC(35) F=r93
N140 ;G1 G40 X0 Y35
N141 ;G0 Z40 m9
N142 ;SMENA_Z
N143 
N144 ST7: WORK_STEP(7)
N145 T="28.2" M6
N146 MSG("T28.2(2/28) METCIK K=3/4 ,WORK_STEP(7)")
N147 ;*************************************************** T28.2
N148 G0 g57 B270
N149 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N150 ;REGIME(6,24.9,1,1.814)  s76.70 f=139.13
N151 G0 G57 X0 Y35 D1 S71 F129 M3   
N152 Z10 M8
N153 CYCLE840(10,0,10,,25,1,4,3,1)
N154 SMENA_Z
N155 
N156 ST8: WORK_STEP(8)
N157 T="14.2" M6
N158 MSG("T14.2(2/14)FREZA D=125/CH****L=178-0.4* ,WORK_STEP(8)")
N159 ;*************************************************** T14.2
N160 G0 G57 B180
N161 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N162 REGIME(120,125,8,0.085)
N163 G0 G57 X-73 Y137 D1 M3 
N164 Z0 M8
N165 G1 Y22 F=r93
N166 X132
N167 Y137
N168 G0 Z40
N169 SMENA_Z
N170 G0 g57 B0
N171 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N172 G0 G57 X-145 Y137 D1 M3  
N173 Z0 M8
N174 G1 Y22 F=r93
N175 X71
N176 Y137
N177 G0 Z40 M9
N178 SMENA_Z
N179 
N180 ST9: WORK_STEP(9)
N181 T="6.1" M6
N182 MSG("T6.1(1/6)SVERLO D=16<90 ,WORK_STEP(9)")
N183 ;*************************************************** T6.1
N184 G0 G57 B180
N185 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N186 REGIME(26,16,2,0.073)
N187 G0 G57 X-116 Y12 D1 M3
N188 MCALL CYCLE82(3,0,3,,5,1)  
N189 X-116 Y12 M8 
N190 X0
N191 X116
N192 Y48
N193 X0
N194 X-116
N195 MCALL
N196 Y8 X-36                   ;c-c 7548 !!!!
N197 CYCLE82(3,0,3,,5.6,1)     ;!!!!
N198 Y15 X177
N199 G1 Z-6.7 F=r93
N200 g0 z40 m9
N201 SMENA_Z
N202 G0 g57 B0
N203 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N204 G0 G57 Y12 X-159 D1 M3
N205 MCALL CYCLE82(3,0,3,,5,1)   ;bilo z=2.5 na 7648
N206 Y12 X-159 M8 
N207 X-116
N208 X0
N209 X116
N210 Y48
N211 X0
N212 X-116
N213 X-174
N214 MCALL
N215 Y10 X-188
N216 CYCLE82(3,0,3,,5.3,1)
N217 Y60 X-14                   ;p-p
N218 CYCLE82(3,0,3,,5.6,1)
N219 SMENA_Z
N220 gbTOCheckAtTC = TRUE 
N221 gbErrMsgOnToCheck = TRUE
N222 
N223 ST10: WORK_STEP(10)
N224 T="1.29" M6
N225 MSG("T29.1(1/29)VERLO D=6.8*D=6.7+0.2*L=25-1.0,WORK_STEP(10)")
N226 ;*************************************************** T29.1
N227 G0 G57 B0
N228 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N229 REGIME(18,6.8,2,0.072)
N230 WAIT_TO_CHECK 
N231 G0 G57 X116 Y12 D1 M3
N232 MCALL CYCLE81(5,0,5,,24.5)
N233 Y12 X116 M8 
N234 X0
N235 X-116
N236 X-159
N237 Y48 X-174
N238 X-116
N239 X0
N240 X116
N241 MCALL
N242 G0 Z40 M9
N243 SMENA_Z
N244 G0 G57 B180
N245 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N246 G0 g57 y12 X116 D1 M3
N247 MCALL CYCLE81(5,0,5,,24.5)
N248 Y12 X116 M8 
N249 X0
N250 X-116
N251 Y48
N252 X0
N253 X116
N254 MCALL
N255 SMENA_Z
N256 
N257 ST11: WORK_STEP(11)
N258 T="1.14" M6
N259 MSG("T14.1(1/14)SVERLO D=10.2*-------------  ,WORK_STEP(11)")
N260 ;*************************************************** T14.1
N261 G0 G57 B180
N262 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N263 REGIME(19,10.2,2,0.076)
N264 G0 g57 y15 X177 D1 M3   
N265 Z6 M8
N266 G1 Z-29.5 F=r93 
N267 G0 Z40 M9
N268 SMENA_Z
N269 
N270 ST12: WORK_STEP(12)
N271 T="21.2" M6
N272 MSG("T21.2(2/21)SVERLO D=11---------- ,WORK_STEP(12)")
N273 ;*************************************************** T21.2
N274 G0 G57 B0
N275 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N276 REGIME(19,11,2,0.069)
N277 G0 g57 y60 X-14 D1 M3   ;p-p
N278 Z7 M8
N279 G1 Z-5.6 F=r93
N280 G0 Z40 M9
N281 SMENA_Z
N282 G0 G57 B180
N283 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N284 G0 g57 y8 X-36 D1 M3   ;c-c
N285 Z7 M8
N286 G1 Z-5.6 F=r93
N287 G0 Z40 M9
N288 SMENA_Z
N289 
N290 ST13: WORK_STEP(13)
N291 T="1.25" M6
N292 MSG("T25.1(1/25) SVERLO D=8.5------------ ,WORK_STEP(13)")
N293 ;*************************************************** T25.1
N294 G0 G57 B180
N295 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N296 REGIME(19,8.5,2,0.071)
N297 G0 g57 y8 X-36 D1 M3              ;c-c
N298 Z5 M8
N299 CYCLE83(5,0,5,,112.7,,20,10,0,0,1,1) 
N300 SMENA_Z
N301 G0 G57 B0
N302 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N303 G0 g57 y60 X-14 D1 M3              ;p-p 
N304 Z5 M8
N305 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1) 
N306 y10 x-188
N307 g1 z-16.5 f=r93
N308 G0 Z40 M9
N309 SMENA_Z
N310 
N311 ST14: WORK_STEP(14)
N312 T="1.24" M6
N313 MSG("T24.1(1/24) SVERLO D=6/DL*---------,WORK_STEP(20)")
N314 ;*************************************************** T24.1
N315 G0 G57 B0
N316 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N317 REGIME(15,6,2,0.076)
N318 G0 G57 X-188 Y10 D1 M3  
N319 Z5 M8
N320 CYCLE83(5,0,5,,77.5,,20,10,0,0,1,1)
N321 SMENA_Z
N322 ;==========================================================
N323 
N324 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N325 ;M0
N326 ;==========================================================
N327 WORK_DONE
N328 GOTOF _ENDE
N329 
N330 ST999:TO_BROKEN
N331  _ENDE:T0 M6
N332 M91
N333 WORK_STEP(0)
N334 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N335 R98=$AC_TIMER[1]
N336 ;N68 R98=R98/60  ;cycle TIME/MIN
N337 M30
N338 
N339 _proverka:
N340 ;____3_ustanov___detal___storona B0/B180/B270____G57______
N341 ;*G57-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N342 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N343 ;N-PRISP.(7274-6070)
N344 ;NA PRISP.(7274-6070-22) R22=0
N345 ZBEZ=3
N346 XBEZ=10
N347 YBEZ=7 
N348 R22=0 
N349 ;______B0 __TRANS __________________     ;B0!!!L5!!
N350 Y_B0=R50                ;OS_Y TRANS  
N351 X_B0=-174+R40+116       ;OS_X TRANS bilo x=-174+57.857+116 (X-0.143) B0
N352 Z_B0=R60+38.9             ;OS_Z TRANS bilo z=50+39-0.15=88.85
N353 ;_____B180__TRANS______________________   ;B180!!L16!!!
N354 Y_B180=Y_B0             ;OS_Y TRANS
N355 X_B180=174-R40-116      ;OS_X TRANS; bilo x=174-57.857-116 (x+0.143) B180
N356 Z_B180=R61+38.9           ;OS_Z TRANS   ; bilo Z=50+39+0.05=89.05
N357 ;_____B270-TRANS X-10.95 Z=184.5 ;Z=186.5     ;B270!!L7!!
N358 Y_B270=Y_B0                 ;OS_Y TRANS ;
N359 X_B270=78-Z_B180            ;OS_X TRANS ; bilo X-10.95
N360 Z_B270=116+69+1.5           ;OS_Z TRANS ; bilo Z=186.5
N361 
N362 STOPRE
N363 ;**************************YSTANOV 3**********
N364 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N365  IF WORKING_STEP==0   GOTOF CHECK_1
N366  IF WORKING_STEP<=1   GOTOB ST1  ;T29(1/21)FREZA D=125/chern.
N367  M91 ;poka nezak-ca cmena palet 
N368  IF WORKING_STEP==2   GOTOB ST2  ;T11.2(2/11)FREZA D=40
N369  IF WORKING_STEP==3   GOTOB ST3 ;T29.2(2/29) SVERLO D=23KOMB
N370  ;IF WORKING_STEP==3   GOTOB ST3  ;T6.1(1/6) SVERLO D=16<90
N371  IF WORKING_STEP==4   GOTOB ST4  ;T1.2(2/1)SV. D=23**K=3/4
N372 ;IF WORKING_STEP==5   GOTOB ST5  ;T29.2(2/29) RAZVERTKA K=3/4
N373 ;IF WORKING_STEP==6   GOTOB ST6  ;T3.2(2/3) zenkovka d=10/90
N374  IF WORKING_STEP==7   GOTOB ST7  ;T28.2(2/28) METCIK K=3/4
N375  IF WORKING_STEP==8   GOTOB ST8  ;T14.2(2/14) FREZA D=125
N376  IF WORKING_STEP==9  GOTOB ST9 ;T6.1(1/6)SVERLO D=16<90
N377  IF WORKING_STEP==10  GOTOB ST10 ;T29.1(1/29)SVERLO D=6.8
N378  IF WORKING_STEP==11  GOTOB ST11 ;T14.1(1/14)SVERLO D=10.2*
N379  IF WORKING_STEP==12  GOTOB ST12 ;T21.2(2/21)SVERLO D=11
N380  IF WORKING_STEP==13  GOTOB ST13 ;T25.1(1/25) SVERLO D=8.5
N381  IF WORKING_STEP==14  GOTOB ST14 ;T24.1(1/24) SVERLO D=6/DL*
N382  IF WORKING_STEP==999  GOTOB ST999
N383 ENDIF
N384 
N385 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N386 M0
N387 GOTOB AA
N388 CHECK_1:
N389 GOTOB START_1
N390 ; NE UDOLAYT VSE RABOTAET
N391 
N392 
