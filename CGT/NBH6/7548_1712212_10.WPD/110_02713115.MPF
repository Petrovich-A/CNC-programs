N1 ;detal 7548-1712212-10 korpus zolotnikov 
N2 ;OPER 130 ******YSTANOV III****B0/B180/B270***G57*******
N3 ;STANOK nbh-6 INV.zav. A.10003135.02
N4 ;KOZAKEVICH D.O          15.07.11
N5 ;TC=29.5_MIN +DOBAVIL(RAZ-S P-P CENT.SV D12_L=6,D11_L=5.6,D8.5_L=112.7)
N6 DEF REAL POM_Y,FUS=3000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS
N7 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N8 DEFINE SMENA_Z AS g0 g53 z930 d0 m5 m9
N9 $AC_TIMER[1]=0  ;cikl starta time/min
N10 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N11 R40=315-257.01            ;OS_X  YSTANOV 3 X=315-257(257.72)
N12 R50=175                   ;OS_Y  YSTANOV 3
N13 R61=-315+365.09           ;OS_Z  YSTANOV 3 !!!B180!!!
N14 R60=100-R61               ;OS_Z  YSTANOV 3 !!!B0!!!
N15 ;*****************************
N16 ;*********** VREMIA PO INSTR********************
N17 ;T2.19(2/19)FREZA D=125/chern.      4_MIN
N18 ;T11.2(2/11)FREZA D=40            0.5_MIN
N19 ;T6.1(1/6) SVERLO D=16<90         0.5_MIN
N20 ;T29.2(2/29) RAZVERTKA K=3/4
N21 ;T3.2(2/3) zenkovka d=10/90       0.5_MIN
N22 ;T28.2(2/28) METCIK K=3/4           1_MIN
N23 ;T14.2(2/14) FREZA D=125          4.5_MIN
N24 ;T6.1(1/6)SVERLO D=16<90            3_MIN
N25 ;T29.1(1/29)SVERLO D=6.8          4.5_MIN
N26 ;T14.1(1/14)SVERLO D=10.2*        0.5_MIN
N27 ;T21.2(2.21)SVERLO D=11             1_MIN
N28 ;T25.1(1/25) SVERLO D=8.5         3.5_MIN
N29 ;T24.1(1.24) SVERLO D=6/DL*       1.5_MIN
N30 ;**************************************************
N31 GOTOF _proverka
N32 START_1:
N33 ; ********rabota*********G57*****
N34 ST1: WORK_STEP(1)
N35 SMENA_Z
N36 G0 G57 G17 G40 G90 G94          ;g57!!!!
N37 T="2.19" M6
N38 MSG("T2.19(2/19) FREZA D=125,WORK_STEP(1) ")
N39 ;************************************************ T2.19
N40 G0 g57 B0
N41 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N42 REGIME(80,125,7,0.127)
N43 G0 G56 X-148 Y137 D1 M3 
N44 Z0.5
N45 G1 Y30 F=r93 M8
N46 X71
N47 SMENA_Z
N48 G0 G57 B180
N49 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N50 G0 X-73 Y137 D1 M3 
N51 Z0.5
N52 G1 Y30 F=r93 M8
N53 X135
N54 SMENA_Z
N55 ST2: WORK_STEP(2)
N56 T="11.2" M6
N57 MSG("T11.2(2/11)FREZA D=40,WORK_STEP(2)")
N58 ;*************************************************** T11.2
N59 G0 g57 B270
N60 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N61 REGIME(110,40,3,0.06)
N62 G0 G57 X0 Y85 D1 M3
N63 Z0
N64 G1 Y38 F=r93
N65 G0 Z40
N66 SMENA_Z
N67 ST3: WORK_STEP(3)
N68 T="6.1" M6
N69 MSG("T6.1(1/6) SVERLO D=16<90 ,WORK_STEP(3)")
N70 ;*************************************************** T6.1
N71 G0 g57 B270
N72 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N73 REGIME(26,16,2,0.073)
N74 G0 G57 X0 Y35 D1 M3
N75 Z33 M8
N76 CYCLE82(33,0,3,,7,1)
N77 SMENA_Z
N78 gbTOCheckAtTC = TRUE 
N79 gbErrMsgOnToCheck = TRUE
N80 ST4: WORK_STEP(4)
N81 T="1.2" M6
N82 MSG("T1.2(2/1) SVERLO D=23**POD K=3/4* ,WORK_STEP(4)")
N83 ;*************************************************** T1.2
N84 G0 g57 B270
N85 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N86 REGIME(22,23,2,0.075)
N87 WAIT_TO_CHECK 
N88 G0 G57 X0 Y35 D1 M3
N89 Z11 M8
N90 G1 Z-21 F200
N91 F=R93
N92 CYCLE83(20,-26,5,,72,,15,10,0,0,1,1)
N93 SMENA_Z
N94 ST5: WORK_STEP(5)
N95 T="29.2" M6
N96 MSG("T29.2(2/29) RAZVERTKA K=3/4,WORK_STEP(5)")
N97 ;*************************************************** T29.2
N98 G0 g57 B270
N99 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N100 REGIME(9,23,5,0.04)
N101 G0 G57 X0 Y35 D1 M3 
N102 Z6 M8
N103 CYCLE82(6,0,6,,23,1)
N104 SMENA_Z
N105 ST6: WORK_STEP(6)
N106 T="3.2" M6
N107 MSG("T3.2(2/3) zenkovka d=10/90 ,WORK_STEP(6)")
N108 ;*************************************************** T3.2
N109 G0 g57 B270
N110 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N111 REGIME(32,10,4,0.038)
N112 G0 G57 X0 Y35 D1 M3  
N113 Z3 M8
N114 G1 Z-7 F=r93
N115 G1 G42 X6.85 Y35
N116 G2 X6.85 Y35 I=AC(0) J=AC(35) F=r93
N117 G1 G40 X0 Y35
N118 G0 Z40 m9
N119 SMENA_Z
N120 ST7: WORK_STEP(7)
N121 T="28.2" M6
N122 MSG("T28.2(2/28) METCIK K=3/4 ,WORK_STEP(7)")
N123 ;*************************************************** T28.2
N124 G0 g57 B270
N125 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!L7
N126 ;REGIME(6,24.9,1,1.814)  s76.70 f=139.13
N127 G0 G57 X0 Y35 D1 S71 F129 M3   
N128 Z10 M8
N129 CYCLE840(10,0,10,,25,1,4,3,1)
N130 SMENA_Z
N131 ST8: WORK_STEP(8)
N132 T="14.2" M6
N133 MSG("T14.2(2/14)FREZA D=125/CH****L=178-0.4* ,WORK_STEP(8)")
N134 ;*************************************************** T14.2
N135 G0 G57 B180
N136 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N137 REGIME(120,125,8,0.085)
N138 G0 G57 X-73 Y137 D1 M3 
N139 Z0 M8
N140 G1 Y22 F=r93
N141 X132
N142 Y137
N143 G0 Z40
N144 SMENA_Z
N145 G0 g57 B0
N146 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N147 G0 G57 X-145 Y137 D1 M3  
N148 Z0 M8
N149 G1 Y22 F=r93
N150 X71
N151 Y137
N152 G0 Z40 M9
N153 SMENA_Z
N154 
N155 ST9: WORK_STEP(9)
N156 T="6.1" M6
N157 MSG("T6.1(1/6)SVERLO D=16<90 ,WORK_STEP(9)")
N158 ;*************************************************** T6.1
N159 G0 G57 B180
N160 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N161 REGIME(26,16,2,0.073)
N162 G0 G57 X-116 Y12 D1 M3
N163 MCALL CYCLE82(3,0,3,,5,1)  
N164 X-116 Y12 M8 
N165 X0
N166 X116
N167 Y48
N168 X0
N169 X-116
N170 MCALL
N171 Y8 X-36                   ;c-c 7548 !!!!
N172 CYCLE82(3,0,3,,5.6,1)     ;!!!!
N173 Y15 X177
N174 G1 Z-6.7 F=r93
N175 g0 z40 m9
N176 SMENA_Z
N177 G0 g57 B0
N178 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0!!!L5
N179 G0 G57 Y12 X-159 D1 M3
N180 MCALL CYCLE82(3,0,3,,5,1)   ;bilo z=2.5 na 7648
N181 Y12 X-159 M8 
N182 X-116
N183 X0
N184 X116
N185 Y48
N186 X0
N187 X-116
N188 X-174
N189 MCALL
N190 Y10 X-188
N191 CYCLE82(3,0,3,,5.3,1)
N192 Y60 X-14                   ;p-p
N193 CYCLE82(3,0,3,,5.6,1)
N194 SMENA_Z
N195 gbTOCheckAtTC = TRUE 
N196 gbErrMsgOnToCheck = TRUE
N197 
N198 ST10: WORK_STEP(10)
N199 T="1.29" M6
N200 MSG("T29.1(1/29)VERLO D=6.8*D=6.7+0.2*L=25-1.0,WORK_STEP(10)")
N201 ;*************************************************** T29.1
N202 G0 G57 B0
N203 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N204 REGIME(18,6.8,2,0.072)
N205 WAIT_TO_CHECK 
N206 G0 G57 X116 Y12 D1 M3
N207 MCALL CYCLE81(5,0,5,,24.5)
N208 Y12 X116 M8 
N209 X0
N210 X-116
N211 X-159
N212 Y48 X-174
N213 X-116
N214 X0
N215 X116
N216 MCALL
N217 G0 Z40 M9
N218 SMENA_Z
N219 G0 G57 B180
N220 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N221 G0 g57 y12 X116 D1 M3
N222 MCALL CYCLE81(5,0,5,,24.5)
N223 Y12 X116 M8 
N224 X0
N225 X-116
N226 Y48
N227 X0
N228 X116
N229 MCALL
N230 SMENA_Z
N231 
N232 ST11: WORK_STEP(11)
N233 T="1.14" M6
N234 MSG("T14.1(1/14)SVERLO D=10.2*-------------  ,WORK_STEP(11)")
N235 ;*************************************************** T14.1
N236 G0 G57 B180
N237 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N238 REGIME(19,10.2,2,0.076)
N239 G0 g57 y15 X177 D1 M3   
N240 Z6 M8
N241 G1 Z-29.5 F=r93 
N242 G0 Z40 M9
N243 SMENA_Z
N244 
N245 ST12: WORK_STEP(12)
N246 T="21.2" M6
N247 MSG("T21.2(2/21)SVERLO D=11---------- ,WORK_STEP(12)")
N248 ;*************************************************** T21.2
N249 G0 G57 B0
N250 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N251 REGIME(19,11,2,0.069)
N252 G0 g57 y60 X-14 D1 M3   ;p-p
N253 Z7 M8
N254 G1 Z-5.6 F=r93
N255 G0 Z40 M9
N256 SMENA_Z
N257 G0 G57 B180
N258 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N259 G0 g57 y8 X-36 D1 M3   ;c-c
N260 Z7 M8
N261 G1 Z-5.6 F=r93
N262 G0 Z40 M9
N263 SMENA_Z
N264 
N265 ST13: WORK_STEP(13)
N266 T="1.25" M6
N267 MSG("T25.1(1/25) SVERLO D=8.5------------ ,WORK_STEP(13)")
N268 ;*************************************************** T25.1
N269 G0 G57 B180
N270 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ; B180!!!L16
N271 REGIME(19,8.5,2,0.071)
N272 G0 g57 y8 X-36 D1 M3              ;c-c
N273 Z5 M8
N274 CYCLE83(5,0,5,,112.7,,20,10,0,0,1,1) 
N275 SMENA_Z
N276 G0 G57 B0
N277 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N278 G0 g57 y60 X-14 D1 M3              ;p-p 
N279 Z5 M8
N280 CYCLE83(5,0,5,,92.4,,20,10,0,0,1,1) 
N281 y10 x-188
N282 g1 z-16.5 f=r93
N283 G0 Z40 M9
N284 SMENA_Z
N285 
N286 ST14: WORK_STEP(14)
N287 T="1.24" M6
N288 MSG("T24.1(1/24) SVERLO D=6/DL*---------,WORK_STEP(20)")
N289 ;*************************************************** T24.1
N290 G0 G57 B0
N291 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ; B0!!!L5
N292 REGIME(15,6,2,0.076)
N293 G0 G57 X-188 Y10 D1 M3  
N294 Z5 M8
N295 CYCLE83(5,0,5,,77.5,,20,10,0,0,1,1)
N296 SMENA_Z
N297 ;==========================================================
N298 
N299 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N300 ;M0
N301 ;==========================================================
N302 WORK_DONE
N303 GOTOF _ENDE
N304 
N305 ST999:TO_BROKEN
N306  _ENDE:T0 M6
N307 M91
N308 WORK_STEP(0)
N309 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N310 R98=$AC_TIMER[1]
N311 ;N68 R98=R98/60  ;cycle TIME/MIN
N312 M30
N313 
N314 _proverka:
N315 ;____3_ustanov___detal___storona B0/B180/B270____G57______
N316 ;*G57-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N317 $P_UIFR[4]=CTRANS(X,0,Y,0,Z,0,B,180);  G57 B180
N318 ;N-PRISP.(7274-6070)
N319 ;NA PRISP.(7274-6070-22) R22=0
N320 ZBEZ=3
N321 XBEZ=10
N322 YBEZ=7 
N323 R22=0 
N324 ;______B0 __TRANS __________________     ;B0!!!L5!!
N325 Y_B0=R50                ;OS_Y TRANS  
N326 X_B0=-174+R40+116       ;OS_X TRANS bilo x=-174+57.857+116 (X-0.143) B0
N327 Z_B0=R60+38.9             ;OS_Z TRANS bilo z=50+39-0.15=88.85
N328 ;_____B180__TRANS______________________   ;B180!!L16!!!
N329 Y_B180=Y_B0             ;OS_Y TRANS
N330 X_B180=174-R40-116      ;OS_X TRANS; bilo x=174-57.857-116 (x+0.143) B180
N331 Z_B180=R61+38.9           ;OS_Z TRANS   ; bilo Z=50+39+0.05=89.05
N332 ;_____B270-TRANS X-10.95 Z=184.5 ;Z=186.5     ;B270!!L7!!
N333 Y_B270=Y_B0                 ;OS_Y TRANS ;
N334 X_B270=78-Z_B180            ;OS_X TRANS ; bilo X-10.95
N335 Z_B270=116+69+1.5           ;OS_Z TRANS ; bilo Z=186.5
N336 
N337 STOPRE
N338 ;**************************YSTANOV 3**********
N339 ;*poraydok obrabotki***metka***magazin/gnezdo*******NALADKA INSTRUMENTA******
N340  IF WORKING_STEP==0   GOTOF CHECK_1
N341  IF WORKING_STEP<=1   GOTOB ST1  ;T29(1/21)FREZA D=125/chern.
N342  M91 ;poka nezak-ca cmena palet 
N343  IF WORKING_STEP==2   GOTOB ST2  ;T11.2(2/11)FREZA D=40
N344  IF WORKING_STEP==3   GOTOB ST3  ;T6.1(1/6)SVERLO D=16<90
N345  IF WORKING_STEP==4   GOTOB ST4  ;T1.2(2/1)SVERLO D=23**K=3/4
N346  IF WORKING_STEP==5   GOTOB ST5  ;T29.2(2/29)RAZVERTKA K=3/4
N347  IF WORKING_STEP==6   GOTOB ST6  ;T3.2(2/3)zenkovka d=10/90
N348  IF WORKING_STEP==7   GOTOB ST7  ;T28.2(2/28)METCIK K=3/4
N349  IF WORKING_STEP==8   GOTOB ST8  ;T14.2(2/14)FREZA D=125
N350  IF WORKING_STEP==9   GOTOB ST9  ;T6.1(1/6)SVERLO D=16<90
N351  IF WORKING_STEP==10  GOTOB ST10 ;T29.1(1/29)SVERLO D=6.8
N352  IF WORKING_STEP==11  GOTOB ST11 ;T14.1(1/14)SVERLO D=10.2*
N353  IF WORKING_STEP==12  GOTOB ST12 ;T21.2(2/21)SVERLO D=11
N354  IF WORKING_STEP==13  GOTOB ST13 ;T25.1(1/25) SVERLO D=8.5
N355  IF WORKING_STEP==14  GOTOB ST14 ;T24.1(1/24) SVERLO D=6/DL*
N356  IF WORKING_STEP==999  GOTOB ST999
N357 ENDIF
N358 
N359 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N360 M0
N361 GOTOB AA
N362 CHECK_1:
N363 GOTOB START_1
N364 ; NE UDOLAYT VSE RABOTAET
N365 
N366 
