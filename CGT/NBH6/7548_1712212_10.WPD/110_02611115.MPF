N5 ;detal 7548-1712212-10 korpus zolotnikov 
N10 ;OPER 110  ---- YSTANOV II ----B180/B270-----G56-------
N15 ;STANOK nbh-6 INV.zav. A.10003135.02  (frezerovka pazov!!!!)
N20 ;KOPTYAEV S.G          16.12.09
N25 ;TC=45.5_MIN
N30 DEF REAL POM_Y,FUS=3000,ZBEZ,ZZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B270,X_B270,Z_B270,DPR,KP,TF,TS,stop_timer
N35 ;DEFINE SMENA_ZYX AS G75 FP=1 Z1=0 Y1=0 X1=0 SPOS=0  
N40 DEFINE SMENA_Z AS g0 g53 z930 d0 M9 m5 
N45 $AC_TIMER[1]=0  ;cikl starta time/min
N50 ;**PERENOS S "OBKATKI"*R10(OS_X) R20(OS_Y)***
N55 R10=0.51     ;OS_X  YSTANOV II
N60 R20=0.02     ;OS_Y  YSTANOV II
N65 R30=149.766  ;OS_Z  YSTANOV II ( Z=149.766) DOL.Z150
N70 ;********VREMIA PO INSTR.***************************
N75 ;T7(1/2)SVERLO D=16/90  4_MIN
N80 ;T8(1/15)-SVERLO D=11   3_MIN
N85 ;T9(1/16) ZENKER d=12.7   3_MIN
N90 ;T10(2/15)RAZVERTKA D=13   4.5_MIN
N95 ;T52(2/16)RAZVERTKA D=13.2   3_MIN
N100 ;T16(2/17) SVERLO D=10.2     1.5_MIN
N105 ;T55(2/7)ZENKER D=10.3     0.5_MIN
N110 ;T11(1/3)SVERLO D=13+0.43*  7_MIN
N115 ;T20(1/18)SVERLO D=13.8<180  1_MIN
N120 ;T21(2/18)RAZ.KA D=14+0.045  1_MIN
N125 ;T22(1/19)FREZA D=13         0.5_MIN
N130 ;T12(1/4) SVERLO D=6**       2_MIN
N135 ;T58(1/7)FREZA D=8          1_MIN
N140 ;T57(2/11)FREZA D=6        2.5_MIN
N145 ;T65(1/23)FREZA D=6 dubl_2   1.5_MIN
N150 ;T59(2/6)FREZA D=10        1.5_MIN
N155 ;T60(1/11)FREZA D=20       4.5_MIN
N160 ;T61(1/6)FREZA D=28        2_MIN
N165 ;T6(1/1) FREZA D=40        1.5_MIN
N170 ;T7(1/2)SVERLO D=16/90     0.5_MIN
N175 ;T14(2/14) SVERLO D=8.3    0.5_MIN
N180 ;T12(1/4) SVERLO D=6       0.5_MIN
N185 ;*******************************************************
N190 GOTOF _proverka
N195 START_1:
N200 ; ********rabota*********G56*****YSTANOV II*****
N205 ST1: WORK_STEP(1)
N210 SMENA_Z
N215 G0 G56 G17 G40 G90 G94                     ;g56!!!!
N220 T7 M6
N225 MSG("T7(1/2) SVERLO D=16<90,WORK_STEP(1) ")
N230 ;************************************************ T07
N235 G0 g56 B180
N240 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N245 REGIME(25,16,2,0.076)        ; S500 F75 
N250 G0 G56 X-58 Y-79 D1 M3
N255 m8
N260 CYCLE82(35,0,zbez,,5.2,1)
N265 X-36 Y-16
N270 MCALL CYCLE82(35,0,ZBEZ,,3.1,1)
N275 X-36 Y-16   ;7 
N280 X-99 Y-19   ;8
N285 X-46 Y-97   ;5 d6+0.3 L=32+2.5
N290 X-39 Y-108  ;4 d5+0.3 L=11.5
N295 X-79 Y-165  ;2
N300 X-29 y-165  ;1
N305 ;X17 Y-86     ; AGREGATN.STANOK  31P 
N310 ;X72 Y-32     ; AGREGATN.STANOK  16P
N315 ;X46 Y-65     ; AGREGATN.STANOK  15P
N320 ;X188 Y-108   ; AGREGATN.STANOK  13P
N325 ;Y-139        ; AGREGATN.STANOK  35P
N330 ;X205         ; AGREGATN.STANOK  36P
N335 MCALL
N340 ;-----gruppa otv na d13--------------
N345 X-116 Y-21
N350 MCALL CYCLE82(35,0,zbez,,6.9,1)
N355 X-116 Y-21  ;0 d=13.2+0.43
N360 X-58 Y-39   ;1 d=13+0.035
N365 X0          ;2
N370 X58         ;3
N375 X116        ;4
N380 X174        ;5
N385 Y-126       ;6 d=13.2+0.043
N390 X116 Y-139  ;7 d=13+0.035
N395 X58         ;8
N400 X0          ;9
N405 X-58 Y-156  ;10
N410 X-116       ;11
N415 ;---------dop 4_otv na 7548------
N420 ;X152  Y-139    ;A (D13+0.43 L-35 4_OTV) agregat 28_pazic
N425 ;X136 Y-161     ;B (D13+0.43 L-35 4_OTV)  agregat 27_pazic
N430 ;X87 Y-47       ;C (D13+0.43 L-35 4_OTV)  agregatn 29_pazic  
N435 X-96 Y-77      ;D (D13+0.43 L-35 4_OTV)
N440 MCALL
N445 ;----POD  GRUPU D=10+0.36_ 2-OTV)---------
N450 G0 X-77 Y-123
N455 MCALL CYCLE82(35,0,ZBEZ,,5.3,1)
N460 X-77 Y-123         ;1-OTV (POD  GRUPU D=10+0.36_ 2-OTV)
N465 X-96 Y-148         ;2-OTV (POD  GRUPU D=10+0.36_ 2-OTV)
N470  MCALL
N475 SMENA_Z
N480 gbTOCheckAtTC = TRUE 
N485 gbErrMsgOnToCheck = TRUE
N490 ST2: WORK_STEP(2)
N495 T8 M6
N500 MSG("T8(1/15)SVERLO 11**POD 4 PAL.D=13+0.035,WORK_STEP(2)")
N505 ;*************************************************** T8
N510 G0 g56 B180
N515 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N520 REGIME(18,11,2,0.075)
N525 WAIT_TO_CHECK 
N530 G0 G56 X-58 Y-39 D1 M3
N535 MCALL CYCLE81(40,0,7,,35)
N540 X-58 Y-39 M8
N545 X-116 Y-21
N550 X116 Y-139
N555 X174 Y-126
N560 MCALL
N565 SMENA_Z
N570 ST3: WORK_STEP(3)
N575 T9 M6
N580 MSG("T9(1/16)ZENKER 12.7**POD 4 PAL D=13+0.035,WORK_STEP(3)")
N585 ;*************************************************** T9
N590 G0 g56 B180
N595 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N600 REGIME(15,12.7,5,0.055)
N605 G0 G56 X116 Y-139 D1 M3
N610 MCALL CYCLE85(40,0,6,,37,,r93,r93*5)
N615 X116 Y-139 M8
N620 X174 Y-126
N625 X-58 Y-39
N630 X-116 Y-21
N635 MCALL
N640 SMENA_Z
N645 ST4: WORK_STEP(4)
N650 T10 M6
N655 MSG("T10(2/15) RAZVERTKA 13 D=13+0.035,WORK_STEP(4) ")
N660 ;*************************************************** T10
N665 G0 g56 B180
N670 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N675 REGIME(13,13,6,0.027)
N680 G0 G56 X116 Y-139 D1 M3
N685 MCALL CYCLE85(40,0,6,,37,,r93,r93*6) 
N690 X116 Y-139 M8
N695 X174 Y-126
N700 X-58 Y-39
N705 X-116 Y-21
N710 MCALL
N715 SMENA_Z
N720 ST5: WORK_STEP(5)
N725 T52 M6
N730 MSG("T52(2/16)RAZVERTKA D=13.2+0.035 na 2_otv ,WORK_STEP(5)")
N735 ;*************************************************** T52
N740 G0 g56 B180
N745 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N750 REGIME(13,13.2,6,0.027)
N755 G0 G56 X-116 Y-21 D1 M3  ;2
N760 Z12 M8
N765 G1 Z-37 F=r93
N770 Z12 F=r93*4
N775 G0 X174 Y-126           ;4
N780 G1 Z-37 F=r93
N785 Z12 F=r93*4
N790 g0 z30 m9
N795 SMENA_Z
N800 ST6: WORK_STEP(6)
N805 T16 M6
N810 MSG("T16(2/17) SVERLO D=10.2*m12*6h,L=20min,WORK_STEP(6)")
N815 ;*************************************************** T16
N820 G0 g56 B180
N825 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N830 REGIME(20,10.2,2,0.065)
N835 G0 G56 X-58 Y-79 D1 M3
N840 m8
N845 CYCLE81(35,0,zbez*2,,25)
N850 G0 X-77 Y-123
N855 MCALL CYCLE81(35,0,zbez*2,,28)
N860 X-77 Y-123         ;1-OTV (POD  GRUPU D=10+0.36_ 2-OTV)
N865 X-96 Y-148         ;2-OTV (POD  GRUPU D=10+0.36_ 2-OTV)
N870  MCALL
N875 SMENA_Z 
N880 ST7: WORK_STEP(7)
N885 T55 M6
N890 MSG("T55(2/7)zenker D=10.3*pod m12*6h,L=20min,WORK_STEP(7)")
N895 ;*************************************************** T55
N900 G0 g56 B180
N905 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N910 REGIME(20,10.3,3,0.065)
N915 G0 G56 X-58 Y-79 D1 M3
N920 m8
N925 CYCLE81(20,0,zbez*2,,25)
N930 SMENA_Z
N935 gbTOCheckAtTC = TRUE 
N940 gbErrMsgOnToCheck = TRUE
N945 ;******************************* p-p E-E***
N950 ST8: WORK_STEP(8)
N955 T11 M6
N960 MSG("T11(1/3) SVERLO D=13+0.43****NA L=15,L=30+1,L=35,WORK_STEP(8) ")
N965 ;*************************************************** T11
N970 G0 g56 B180
N975 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N980 REGIME(21,13,2,0.073)
N985 WAIT_TO_CHECK 
N990 G0 G56 X188 Y-139 D1 M3
N995 Z8 M8
N1000 G1 Z-15 F=r93
N1005 G0 Z35
N1010 X-96 Y-77 M8  ;D
N1015 CYCLE83(35,0,zbez*3,,30.5,,20,10,0,0,1,1)
N1020 ;X-96 Y-77 M8  ;D rabotaet v peredi
N1025 ;X152 Y-139    ;A agregatn 28_pazic
N1030 ;X136 Y-161    ;B agr.27_paz.
N1035 ;MCALL
N1040 x58 y-139
N1045 MCALL CYCLE83(35,0,zbez*3,,35,,20,10,0,0,1,1)
N1050 X58 Y-139
N1055 X0
N1060 X-58 Y-156
N1065 X-116
N1070 X0 Y-39
N1075 X58
N1080 X116
N1085 X174
N1090 MCALL
N1095 SMENA_Z
N1100 ST9: WORK_STEP(9)
N1105 T20 M6
N1110 MSG("T20(1/18)SVERLO D=13.8<180*L=20+0.21***,WORK_STEP(9) ")
N1115 ;*************************************************** T20
N1120 G0 g56 B180
N1125 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1130 REGIME(14,13.8,2,0.05)
N1135 G0 G56 X188 Y-139 D1 M3
N1140 M8
N1145 CYCLE82(3,0,3,,20.1,1)
N1150 SMENA_Z
N1155 ST10: WORK_STEP(10)
N1160 T21 M6
N1165 MSG("T21(2/18)RAZVERTKA D=14+0.045 ,WORK_STEP(10) ")
N1170 ;*************************************************** T21
N1175 G0 g56 B180
N1180 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1185 REGIME(10,14,5,0.036)
N1190 G0 G56 X188 Y-139 D1 M3
N1195 Z6 M8
N1200 G1 Z-18.5 F=r93
N1205 Z6 F=r93*5
N1210 G0 Z30 M9
N1215 SMENA_Z
N1220 ST11: WORK_STEP(11)
N1225 T22 M6
N1230 MSG("T22(1/19)FREZA D=13**NA L=1.35+0.12-0.1,WORK_STEP(11)")
N1235 ;*************************************************** T22
N1240 G0 g56 B180
N1245 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1250 REGIME(19,13,2,0.03)
N1255 G0 G56 X205 Y-139 D1 M3
N1260 ATRANS X205 Y-139
N1265 X0 Y0
N1270 Z=zbez M8
N1275 G1 Z-1.35 F=r93
N1280 G1 G42 X6.55 Y0
N1285 G2 X6.55 Y0 I=AC(0) J=AC(0) F=r93*4
N1290 G1 G40 X0 Y0
N1295 SMENA_Z
N1300 ST12: WORK_STEP(12)
N1305 T12 M6
N1310 MSG("T12(1/4) SVERLO D=6**NA L=27,L=32+2.5,L=11+1,L=19 WORK_STEP(12)")
N1315 ;*************************************************** T12
N1320 G0 g56 B180
N1325 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1330 REGIME(16,6,2,0.073)
N1335 G0 G56 X-36 Y-16 m8 D1 M3           ;1
N1340 MCALL CYCLE83(35,0,zbez*2,,27,,20,10,0,0,1,1)
N1345 X-36 Y-16     ;7
N1350 X-99 Y-19     ;8
N1355 X-79 Y-165    ;2
N1360 MCALL
N1365 X-46 Y-97       ;5
N1370 CYCLE83(35,0,zbez*2,,33.5,,20,10,0,0,1,1)
N1375 ;X72 Y-32        ;agregatn.16_pazic
N1380 ;X46 Y-65        ;agregatn.15_pazic
N1385 ;X-46 Y-97       ;5 delaet v peredi
N1390 ;MCALL
N1395 G0 X-39 Y-108   ;4
N1400 Z=zbez*2
N1405 G1 Z-11.5 F=r93  ;L=11+1
N1410 G0 Z35
N1415 X-29 Y-165      ;1
N1420 Z=zbez*2
N1425 G1 Z-19 F=r93
N1430 G0 Z35
N1435 ;X17 Y-86        ;agregatn.31_pazic
N1440 ;CYCLE83(35,0,5,,60.6,,20,10,0,0,1,1)
N1445 SMENA_Z
N1450 ST13: WORK_STEP(13)
N1455 T58 M6
N1460 MSG("T58(1/7) FREZA D=8(4_zub),WORK_STEP(13)")
N1465 R1=8/2  ;rad.frezi
N1470 ;************************************************ T58
N1475 G0 g56 B180
N1480 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1485 REGIME(70,8,4,0.05)              ;REGIME(25,8,2,0.03)
N1490 WAIT_TO_CHECK 
N1495 ;********************B=8+/-0.29**** p-p g-g*** L=12+0.43
N1500 g0 g56 x-77 y-123 d1 m3
N1505 z10 ;m8
N1510 g1 z0 f=fus
N1515 DPR=12+0.43/2 KP=3 zzbez=dpr+zbez*2 
N1520 fr_8:G1Z=IC(-DPR/KP) F=r93*2
N1525 g1 y-111 F=r93
N1530 g4 f=stop_timer
N1535 g0 z=ic(zzbez)
N1540 x-77 y-123
N1545 g1 z=ic(-zzbez) f=fus/2
N1550 REPEAT fr_8 P=KP-1
N1555 ;*******************B=8+/-0.29** p-p g-g*** L=12+0.43
N1560 g0 z=zbez*2
N1565 x-96 y-148
N1570 g1 z0 f=fus
N1575 DPR=12+0.43/2 KP=3 zzbez=dpr+zbez*2 
N1580 ffr_8:G1Z=IC(-DPR/KP) F=r93*2
N1585 g1 y-161 F=r93
N1590 G4 f=stop_timer
N1595 g0 z=ic(zzbez)
N1600 x-96 y-148
N1605 g1 z=ic(-zzbez) f=fus/2
N1610 REPEAT ffr_8 P=KP-1
N1615 ;******************B=8+/-0.29****** p-p g-g*** L=12+0.43
N1620 g0 z=zbez*2
N1625 x-96 y-77
N1630 g1 z0 f=fus
N1635 DPR=12+0.43/2 KP=3 zzbez=dpr+zbez*2  
N1640 fffrr_8:G1Z=IC(-DPR/KP) F=r93*2
N1645 g1 x-113 F=r93
N1650 g4 f=stop_timer
N1655 y-127
N1660 g4 f=stop_timer
N1665 g0 z=ic(zzbez)
N1670 x-96 y-77
N1675 g1 z=ic(-zzbez) f=fus/2
N1680 REPEAT fffrr_8 P=KP-1
N1685 g0 z50 m9
N1690 SMENA_Z
N1695 gbTOCheckAtTC = TRUE 
N1700 gbErrMsgOnToCheck = TRUE 
N1705 ST14: WORK_STEP(14)
N1710 T57 M6
N1715 MSG("T57(2/11) FREZA D=6(3_zub),WORK_STEP(14)")
N1720 R1=6/2  ;rad.frezi
N1725 ;************************************************ T57
N1730 G0 g56 B180
N1735 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1740  REGIME(70,6,3,0.045)             ;REGIME(25,6,2,0.025)
N1745 ;*******************B=6+/-0.24** p-p u-u***L=5+/-0.15
N1750 g0 g56 x-77 y-111 d1 m3
N1755 z10 ;m8
N1760 g1 z0 f=fus
N1765 DPR=5 KP=2 zzbez=dpr+zbez*2
N1770 fr_6:G1Z=IC(-DPR/KP) F=r93*2
N1775 g1 y-108 F=r93
N1780 g4 f=stop_timer
N1785 g1 x-39
N1790 g4 f=stop_timer
N1795 g0 z=ic(zzbez)
N1800 x-77 y-111
N1805 g1 z=ic(-zzbez) f=fus/2
N1810 REPEAT fr_6 P=KP-1
N1815 ;***********B=6+/-0.24****** p-p C-C***L=5+/-0.15 
N1820 g0 z10 
N1825 x46 y-65
N1830 g1 z0 f=fus
N1835 DPR=5 KP=2 zzbez=dpr+zbez*2
N1840 ffr_6:G1Z=IC(-DPR/KP) F=r93*2
N1845 g1 x188 y-108 F=r93
N1850 g4 f=stop_timer
N1855 g0 z=ic(zzbez)
N1860 x46 y-65
N1865 g1 z=ic(-zzbez) f=fus/2
N1870 REPEAT ffr_6 P=KP-1
N1875 g0 z50 m9
N1880 SMENA_Z
N1885 gbTOCheckAtTC = TRUE 
N1890 gbErrMsgOnToCheck = TRUE 
N1895 ST15: WORK_STEP(15)
N1900 T57 M6
N1905 MSG("T57(2/11) FREZA D=6(3_zub) dubl_2,WORK_STEP(15)")
N1910 R1=6/2  ;rad.frezi
N1915 ;************************************************ T65
N1920 G0 g56 B180
N1925 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N1930 REGIME(70,6,3,0.045)            ;REGIME(25,6,2,0.025)
N1935 ;**B=6+/-0.24****** p-p M-M***L=5+/-0.15 1_chast_paza nijn
N1940 g0 g56 x-79 y-165 d1 m3
N1945 z10 ;m8
N1950 g1 z0 f=fus
N1955 DPR=5 KP=2 zzbez=dpr+zbez*2
N1960 ffrr_6:G1Z=IC(-DPR/KP) F=r93*2
N1965 g1 y-169 F=r93
N1970 g4 f=stop_timer
N1975 g1 x-29
N1980 g4 f=stop_timer
N1985 g0 z=ic(zzbez)
N1990 x-79 y-165
N1995 g1 z=ic(-zzbez) f=fus/2
N2000 REPEAT ffrr_6 P=KP-1
N2005 ;*B=6+/-0.24****** p-p M-M***L=5+/-0.15 2_chast_paza vverxn.
N2010 g0 z10 
N2015 x-79 y-165
N2020 g1 z0 f=fus
N2025 DPR=5 KP=2 zzbez=dpr+zbez*2
N2030 fffrr_6:G1Z=IC(-DPR/KP) F=r93*2
N2035 g1 y-135 F=r93
N2040 g4 f=stop_timer
N2045 g1 x-93
N2050 g4 f=stop_timer
N2055 g1 y-97
N2060 g4 f=stop_timer
N2065 g1 x-77
N2070 g4 f=stop_timer
N2075 g1 y-56
N2080 g4 f=stop_timer
N2085 g1 x-113
N2090 g4 f=stop_timer
N2095 g1 y-41
N2100 g4 f=stop_timer
N2105 g0 z=ic(zzbez)
N2110 x-79 y-165
N2115 g1 z=ic(-zzbez) f=fus/2
N2120 REPEAT fffrr_6 P=KP-1
N2125 g0 z50 m9
N2130 SMENA_Z
N2135 gbTOCheckAtTC = TRUE 
N2140 gbErrMsgOnToCheck = TRUE 
N2145 ST16: WORK_STEP(16)
N2150 T59 M6
N2155 MSG("T59(2/6) FREZA D=10(4_zub),WORK_STEP(16)")
N2160 R1=10/2  ;rad.frezi
N2165 ;************************************************ T59
N2170 G0 g56 B180
N2175 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N2180 REGIME(90,10,4,0.06)            ;REGIME(25,10,2,0.04)
N2185 WAIT_TO_CHECK 
N2190 ;****paz  h=10+0.36***L=12+0.43**** p-p D-D***
N2195 g0 g56 x87 y-47 d1 m3
N2200 z10 ;m8
N2205 g1 z0 f=fus
N2210 DPR=12+0.43/2 KP=3 zzbez=dpr+zbez*2  
N2215 fr_10:G1Z=IC(-DPR/KP) F=r93*2
N2220 g1 y-19 F=r93
N2225 g4 f=stop_timer
N2230 g1 x31
N2235 g4 f=stop_timer
N2240 g1 y-97
N2245 g4 f=stop_timer
N2250 g1 x25
N2255 g4 f=stop_timer
N2260 g1 y-105
N2265 g4 f=stop_timer
N2270 g0 z=ic(zzbez)
N2275 x87 y-47
N2280 g1 z=ic(-zzbez) f=fus/2
N2285 REPEAT fr_10 P=KP-1
N2290 g0 z50 m9
N2295 SMENA_Z
N2300 gbTOCheckAtTC = TRUE 
N2305 gbErrMsgOnToCheck = TRUE 
N2310 ST17: WORK_STEP(17)
N2315 T60 M6
N2320 MSG("T60(1/11) FREZA D=20(2_zub),WORK_STEP(17)")
N2325 R1=20/2  ;rad.frezi
N2330 ;************************************************ T60
N2335 G0 g56 B180
N2340 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N2345 REGIME(20,20,2,0.05)
N2350 WAIT_TO_CHECK 
N2355 ;********paz h=20+0.52**L=18+1.1***** p-p D-D***
N2360 g0 g56 x0 y-111 d1 m3
N2365 z10 m8
N2370 g1 z0 f=fus
N2375 DPR=18+1.1/2 KP=3 zzbez=dpr+zbez*2
N2380 fr_20:G1Z=IC(-DPR/KP) F=r93*2
N2385 g1 x-3 F=r93
N2390 g4 f=stop_timer
N2395 g1 y-79
N2400 g4 f=stop_timer
N2405 g0 z=ic(zzbez)
N2410 x0 y-111
N2415 g1 z=ic(-zzbez) f=fus/2
N2420 REPEAT fr_20 P=KP-1
N2425 G0 Z=ZBEZ*2
N2430 X78 Y-111
N2435 G1 Z-25 F=FUS/2
N2440 Z-35 F=R93
N2445 g0 z50 m9
N2450 SMENA_Z
N2455 ST18: WORK_STEP(18)
N2460 T61 M6
N2465 MSG("T61(1/6) FREZA D=28(2_zub),WORK_STEP(18)")
N2470 R1=28/2  ;rad.frezi
N2475 ;************************************************ T61
N2480 G0 g56 B180
N2485 TRANS X=X_B180 Z=Z_B180 Y=Y_B180           ; B180_!!!
N2490 REGIME(25,28,6,0.05)
N2495 ;********paz h=28+/-0.42**L=35+/-0.5***** p-p D-D***
N2500 g0 g56 x78 y-111 d1 m3
N2505 z10 m8
N2510 g1 z0 f=fus
N2515 DPR=35 KP=5 zzbez=dpr+zbez*2
N2520 fr_28:G1Z=IC(-DPR/KP) F=r93*2
N2525 g1 x51 F=r93
N2530 g4 f=stop_timer
N2535 g0 z=ic(zzbez)
N2540 x78 y-111
N2545 g1 z=ic(-zzbez) f=fus/2
N2550 REPEAT fr_28 P=KP-1
N2555 g0 z50 m9
N2560 SMENA_Z
N2565 ;-----rabota B270---------------------
N2570 ST19: WORK_STEP(19)
N2575 T6 M6
N2580 MSG("T6(1/1) FREZA D=40,WORK_STEP(19) ")
N2585 ;*************************************************** T6
N2590 G0 g56 B270
N2595 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N2600 REGIME(110,40,3,0.047)
N2605 G0 G56 X34 Y-103 D1 M3
N2610 Z8 m8
N2615 G1 Z3.5 F=r93
N2620 Y=-(176-7) F=r93
N2625 G0 Z10
N2630 Y-103
N2635 G1 Z0 F=R93*2
N2640 Y=-(176-7) F=R93
N2645 SMENA_Z
N2650 ST20: WORK_STEP(20)
N2655 T7 M6
N2660 MSG("T7(1/2)SVERLO D=16/90 ,WORK_STEP(20) ")
N2665 ;*************************************************** T7
N2670 G0 g56 B270
N2675 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N2680 REGIME(26,16,2,0.073)
N2685 G0 G56 X26 Y-139 D1 M3
N2690 Z3 M8
N2695 G1 Z-5.3 F=r93
N2700 G0 Z30 M9
N2705 SMENA_Z
N2710 gbTOCheckAtTC = TRUE 
N2715 gbErrMsgOnToCheck = TRUE
N2720 ST21: WORK_STEP(21)
N2725 T14 M6
N2730 MSG("T14(2/14) SVERLO D=8.3****NA L=16+1.1*,WORK_STEP(21) ")
N2735 ;*************************************************** T14
N2740 G0 g56 B270
N2745 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N2750 REGIME(16,8.3,2,0.074)
N2755 WAIT_TO_CHECK 
N2760 G0 G56 X26 Y-139 D1 M3
N2765 Z6 M8
N2770 G1 Z-16.5 F=r93
N2775 G0 Z30 M9
N2780 SMENA_Z
N2785 ST22: WORK_STEP(22)
N2790 T12 M6
N2795 MSG("T12(1/4) SVERLO D=6***NA L=34+2.5**,WORK_STEP(22) ")
N2800 ;*************************************************** T12
N2805 G0 g56 B270
N2810 TRANS X=X_B270 Z=Z_B270 Y=Y_B270           ; B270_!!!
N2815 REGIME(16,6,2,0.073)
N2820 G0 G56 X26 Y-139 D1 M3
N2825 Z5 M8
N2830 G1 Z-10 F=R93*10
N2835 G1 Z-35.25 F=r93
N2840 G0 Z30 M9
N2845 SMENA_Z
N2850 ;;;;;;;;;;;;;;;;;;;;;;;;;;do six;;;;;;;;;;;;;;;;
N2855 ;==========================================================
N2860 
N2865 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N2870 ;M0
N2875 ;==========================================================
N2880 WORK_DONE
N2885 GOTOF _ENDE
N2890 
N2895 ST999:TO_BROKEN
N2900  _ENDE:T0 M6
N2905 M91
N2910 WORK_STEP(0)
N2915 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N2920 R98=$AC_TIMER[1]
N2925 ;N68 R98=R98/60  ;cycle TIME/MIN
N2930 M30
N2935 
N2940 _proverka:
N2945 ;_______2_ustanov_detal______storona B180/B270____G56____
N2950 ;*G56-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N2955 $P_UIFR[3]=CTRANS(X,0,Y,0,Z,0,B,180);  G56 B180 
N2960 
N2965 
N2970 ZBEZ=3
N2975 XBEZ=10
N2980 YBEZ=7 
N2985 stop_timer=0.3     ;stop g4 pazov ,po koord-m (1-sek)   
N2990 ;___B180 ___________TRANS TRANS X-49.6 Z217.74 ;BILO X-49.9
N2995 Y_B180=180+100+39+R20    ;OS_Y TRANS;bilo y=180+100+39=319  
N3000 X_B180=-(108-58)+R10     ;OS_X TRANS  ;bilo(108-29*2)=-50
N3005 Z_B180=R30+67.775        ; OS_Z TRANS 150+67.775=217.775 (67.8-0.05)
N3010 ;__B270 ____________TRANS X-217.74 Z166.5;Z167.5
N3015 Y_B270=Y_B180                 ;OS_Y TRANS
N3020 X_B270=-Z_B180                ;OS_X TRANS ;
N3025 Z_B270=205-3.15+16.55-49.442  ;OS_Z TRANS ;bilo Z166.5 Z167.5
N3030 
N3035 
N3040 STOPRE
N3045 ;**************************YSTANOV 2****************************
N3050 ;*poraydok obrabotki***metka***magazin/gnezdo***NALADKA INSTRUMENTA*
N3055  IF WORKING_STEP<=1   GOTOB ST1  ;T7(1/2)SVERLO D=16/90
N3060  M91 ;poka nezak-ca cmena palet 
N3065  IF WORKING_STEP==2   GOTOB ST2   ;T8(1/15)-SVERLO D=11
N3070  IF WORKING_STEP==3   GOTOB ST3   ;T9(1/16) ZENKER d=12.7
N3075  IF WORKING_STEP==4   GOTOB ST4   ;T10(2/15)RAZVERTKA D=13
N3080  IF WORKING_STEP==5   GOTOB ST5   ;T52(2/16)RAZVERTKA D=13.2
N3085  IF WORKING_STEP==6   GOTOB ST6   ;T16(2/17) SVERLO D=10.2
N3090  IF WORKING_STEP==7   GOTOB ST7   ;T55(2/7)ZENKER D=10.3
N3095  IF WORKING_STEP==8   GOTOB ST8   ;T11(1/3)SVERLO D=13+0.43*
N3100  IF WORKING_STEP==9   GOTOB ST9   ;T20(1/18)SVERLO D=13.8<180
N3105  IF WORKING_STEP==10  GOTOB ST10  ;T21(2/18)RAZ.KA D=14+0.045
N3110  IF WORKING_STEP==11  GOTOB ST11  ;T22(1/19)FREZA D=13
N3115  IF WORKING_STEP==12  GOTOB ST12  ;T12(1/4) SVERLO D=6**
N3120  IF WORKING_STEP==13  GOTOB ST13  ;T58(1/7)FREZA D=8
N3125  IF WORKING_STEP==14  GOTOB ST14  ;T57(2/11)FREZA D=6
N3130  IF WORKING_STEP==15  GOTOB ST15  ;T65(1/23)FREZA D=6 dubl_2
N3135  IF WORKING_STEP==16  GOTOB ST16  ;T59(2/6)FREZA D=10
N3140  IF WORKING_STEP==17  GOTOB ST17  ;T60(1/11)FREZA D=20
N3145  IF WORKING_STEP==18  GOTOB ST18  ;T61(1/6)FREZA D=28
N3150  IF WORKING_STEP==19  GOTOB ST19  ;T6(1/1) FREZA D=40
N3155  IF WORKING_STEP==20  GOTOB ST20  ;T7(1/2)SVERLO D=16/90
N3160  IF WORKING_STEP==21  GOTOB ST21  ;T14(2/14) SVERLO D=8.3
N3165  IF WORKING_STEP==22  GOTOB ST22  ;T12(1/4) SVERLO D=6
N3170  IF WORKING_STEP==999  GOTOB ST999
N3175 ENDIF
N3180 
N3185 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N3190 M0
N3195 GOTOB AA
N3200 GOTOB START_1
N3205 ; NE UDOLAYT VSE RABOTAET
N3210 
