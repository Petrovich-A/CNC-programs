N5 ;detal 7548-1712212-10 korpus zolotnikov 
N10 ;OPER 70 ---- YSTANOV I ----B0/B90-----G55-------
N15 ;STANOK nbh-6 INV.zav. A.10003135.02
N20 ;KOZAKEVICH D.O
N25 ;TC=32.5_MIN -(NA PAZ SVERL D8_L-26mm,PAZ FREZA B-8_L-48mm)+(1_OTV D8.5_L-12.5,1_OTV D6_L-34.5,)
N30 DEF REAL POM_Y,FUS=2000,ZBEZ,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B0,X_B0,Z_B0,Y_B90,X_B90,Z_B90,TF,TS,dpr,kp,zzbez 
N35 DEFINE SMENA_Z AS g0 g53 z930 d0 M9 m5 
N40 $AC_TIMER[1]=0  ;cikl starta time/min
N45 ;Nastroi priladi, USTANOV_1*R100(OS_X) R200(OS_Y) R300(OS_Z)**
N50 R100=179.442  ;OS_X 180+/-0.02 YSTANOV I
N55 R200=140      ;OS_Y 140+/-0.2  YSTANOV I
N60 R300=150      ;OS_Z 150+/-0.02 YSTANOV I
N65 ;**************VREMIA PO INSTR*********************
N70 ;T6(1/1) -FREZA D=40          2_MIN.
N75 ;T7(1/2)-SVERLO 16/90(CENTR)  2.5_MIN.
N80 ;T8(1/15)-SVERLO D=11         5_MIN.
N85 ;T9(1/16) ZENKER d=12.7       3_MIN.
N90 ;T10(2/15)RAZVERTKA D=13      6_MIN.
N95 ;T52(2/16)RAZVERTKA D=13.2     3_MIN.
N100 ;T59(2/6)FREZA D=10        0.5_MIN.
N105 ;T54(1/17)SVERLO d=16/90(CENTR) uslov.trudnie    1_MIN.
N110 ;T11(1/3) SVERLO D=13+0.27  2_MIN.
N115 ;T12(1/4) SVERLO D=6*       1.5_MIN.
N120 ;T13(2/13) SVERLO D=10.8    1_MIN.
N125 ;T14(2/14)SVERLO D=8.3      1.5_MIN.
N130 ;T15(2/15) CEKOVKA D=26**   1.5_MIN.
N135 ;T6(1/1) FREZA chern.D=40   0.5_MIN.
N140 ;T7(1/2) SVERLO D=16<90   0.5_MIN.
N145 ;T14(2/14) SVERLO D=8.3*  1_MIN.
N150 ;*************************************************
N155 ;VREMIA CICLA 32.5_MIN
N160 ;***********************************
N165 GOTOF _proverka
N170 START_1:
N175 ; ********rabota*********G55*****YSTANOV I****
N180 ST1: WORK_STEP(1)
N185 SMENA_Z
N190 G0 G55 G17 G40 G90 G94          ;g55!!!!
N195 T6 M6
N200 MSG("T6(1/1) FREZA chern.D=40,WORK_STEP(1) ")
N205 R1=40/2  ;rad.frezi
N210 ;************************************************ T01
N215 G0 g55 B0
N220 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N225 REGIME(110,40,3,0.047)
N230 X-212 Y-39 D1 M3
N235 Z3 M8
N240 G1 Z-9.5 F=r93*1.5
N245 X-181 F=r93
N250 G0 Z3
N255 X-212 Y-126
N260 G1 Z-9.5 F=r93*1.5
N265 X-181 F=r93
N270 g0 z50 M9
N275 ;x124 y-97
N280 ;z-8
N285 ;g1 x87 f=r93
N290 ;g0 z30 m9
N295 SMENA_Z
N300 ST2: WORK_STEP(2)
N305 T7 M6
N310 MSG("T7(1/2)SVERLO d=16/90(CENTR) ,WORK_STEP(2) ")
N315 ;*************************************************** T07
N320 G0 g55 B0
N325 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N330 REGIME(19,16,2,0.1)
N335 G0 G55 X116 Y-21  D1 M3
N340 MCALL CYCLE82(5,0,zbez,,6.6,1)
N345 X116 Y-21 M8
N350 X58 Y-39
N355 X-116 Y-139
N360 MCALL
N365 X-11.1 Y-109
N370 MCALL CYCLE82(5,0,zbez,,3.1,1)  ;d6+0.3
N375 X-11.1 Y-109
N380 X0 Y-77
N385 x17  y=-(139-8)   ;8+/-0.2
N390 MCALL
N395 ;X18 Y-104                  ;UBRAL  NA PAZ 8+0.36
N400 ;CYCLE82(5,0,zbez,,4.2,1)
N405 X87 Y-165 
N410 CYCLE82(5,0,zbez,,5.25,1) 
N415 ;x87 y-97                   ;ZAKOMENT BILO 7556
N420 ;CYCLE82(5,0,zbez,,13.25,1) ;ZAKOMENT BILO 7556
N425 x-145 y-110
N430 CYCLE82(5,0,zbez,,6,1)
N435 X-174 Y-126
N440 CYCLE82(12.5,-9.5,zbez,,6.6,1)
N445 SMENA_Z
N450 gbTOCheckAtTC = TRUE 
N455 gbErrMsgOnToCheck = TRUE
N460 ST3: WORK_STEP(3)
N465 T8 M6
N470 MSG("T8(1/15)SVERLO d=11,POD 4 PALCA NA D=13+0.035 ,WORK_STEP(3) ")
N475 ;*************************************************** T8
N480 G0 g55 B0
N485 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N490 REGIME(18,11,2,0.08)
N495 WAIT_TO_CHECK 
N500 G0 G55 X58 Y-39 D1 M3
N505 MCALL  CYCLE81(7,0,7,,42) ;CYCLE83(7,0,7,,42,,15,10,0,0,1,1)
N510 X58 Y-39 M8
N515 X116 Y-21
N520 X-116 Y-139
N525 X-174 Y-126
N530 MCALL
N535 G0 Z300 M9
N540 SMENA_Z
N545 ST4: WORK_STEP(4)
N550 T9 M6
N555 MSG("T9(1/16) ZENKER d=12.7*POD 4 PALCA NA D=13+0.035* ,WORK_STEP(4) ")
N560 ;*************************************************** T6
N565 G0 g55 B0
N570 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N575 REGIME(13,12.7,3,0.09)
N580 G0 G55 X-116 Y-139 D1 M3
N585 Z7 M8
N590 G1 Z-37 F=r93
N595 Z7 F=r93*4
N600 G0 X-174 Y-126
N605 G1 Z-37 F=r93
N610 Z7 F=r93*4
N615 G0 X58 Y-39
N620 G1 Z-37 F=r93
N625 Z7 F=r93*4
N630 G0 X116 Y-21
N635 G1 Z-37 F=r93
N640 Z7 F=r93*4
N645 G0 Z30 M9
N650 SMENA_Z
N655 ST5: WORK_STEP(5)
N660 T10 M6
N665 MSG("T10(2/15)RAZVERTKA D=13+0.035 ,WORK_STEP(5) ")
N670 ;*************************************************** T10
N675 G0 g55 B0
N680 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N685 REGIME(13,13,6,0.027)
N690 G0 G55 X58 Y-39 D1 M3
N695 Z12 M8
N700 G1 Z-35 F=r93
N705 Z12 F=r93*4
N710 G0 X116 Y-21
N715 G1 Z-35 F=r93
N720 Z12 F=r93*4
N725 G0 X-116 Y-139
N730 G1 Z-35 F=r93
N735 Z12 F=r93*4
N740 G0 X-174 Y-126
N745 G1 Z-35 F=r93
N750 Z12 F=r93*4
N755 G0 Z30 M9
N760 SMENA_Z
N765 ST6: WORK_STEP(6)
N770 T52 M6
N775 MSG("T52(2/16) RAZVERTKA D=13.2+0.035 na 2_otv,WORK_STEP(6)")
N780 ;*************************************************** T52
N785 G0 g55 B0
N790 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N795 REGIME(13,13.2,6,0.027)
N800 G0 G55 X116 Y-21 D1 M3  ;2
N805 Z12 M8
N810 G1 Z-35 F=r93
N815 Z12 F=r93*4
N820 G0 X-174 Y-126           ;4
N825 G1 Z-35 F=r93
N830 Z12 F=r93*4
N835 g0 z30 m9
N840 SMENA_Z
N845 
N850 ST7: WORK_STEP(7)
N855 T59 M6
N860 MSG("T59(2/6)FREZA d=10 ,WORK_STEP(7) ")
N865 ;*************************************************** T59
N870 G0 g55 B0
N875 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N880 REGIME(90,10,4,0.06)
N885 G0 G55 X58 Y-79  D1 M3
N890 ;m8
N895 POCKET2(25,-(18+2),zbez*3,,3,7,58,-79,R93,R93,3,2,0,2)
N900 SMENA_Z
N905 
N910 ST8: WORK_STEP(8)
N915 T54 M6
N920 MSG("T54(1/17)SVERLO d=16/90(CENTR) ,WORK_STEP(8) ")
N925 ;*************************************************** T54
N930 G0 g55 B0
N935 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N940 REGIME(19,16,2,0.06)
N945 G0 G55 X58 Y-79  D1 M3
N950 m8
N955 CYCLE82(25,-(18+2),zbez*3,,13/2,1)
N960 SMENA_Z
N965 gbTOCheckAtTC = TRUE 
N970 gbErrMsgOnToCheck = TRUE
N975 ST9: WORK_STEP(9)
N980 T11 M6
N985 MSG("T11(1/3) SVERLO D=13+0.27 ,WORK_STEP(9) ")
N990 ;*************************************************** T11
N995 G0 g55 B0
N1000 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N1005 REGIME(21,13,2,0.075)
N1010 WAIT_TO_CHECK 
N1015 G0 G55 X58 Y-79 D1 M3 M8
N1020 CYCLE83(25,-18,9,,50-21.7,,15,10,0,0,1,1) 
N1025 G0 Z30 M9
N1030 SMENA_Z
N1035 ST10: WORK_STEP(10)
N1040 T12 M6
N1045 MSG("T12(1/4) SVERLO D=6**NA L=34,L=52,L=8+1 WORK_STEP(10)")
N1050 ;*************************************************** T12
N1055 G0 g55 B0
N1060 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N1065 REGIME(16,6,2,0.073)
N1070 G0 G55 X-11.1 Y-109 m8 D1 M3 
N1075 CYCLE81(5,0,5,,8.5)
N1080 x17  y=-(139-8)
N1085 CYCLE83(5,0,5,,34.5,,15,10,0,0,1,1)
N1090 X0 Y-77
N1095 CYCLE83(5,0,5,,50.5,,15,10,0,0,1,1)     ;NOV!!!
N1100 SMENA_Z
N1105 ST11: WORK_STEP(11)
N1110 T13 M6
N1115 MSG("T13(2/13)SVERLO D=10.8* L=17 D=10.7+0.2.WORK_STEP(11)")
N1120 ;*************************************************** T13
N1125 G0 g55 B0
N1130 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N1135 REGIME(21,10.8,2,0.073)
N1140 G0 G55 X-145 Y-110 D1 M3
N1145 Z8 M8
N1150 G1 Z-17 F=r93
N1155 G0 Z30 M9
N1160 SMENA_Z
N1165 ST12: WORK_STEP(12)
N1170 T14 M6
N1175 MSG("T14(2/14)SVERLO D=8.3*NA L=20 D=8.43+0.2*WORK_STEP(12)")
N1180 ;*************************************************** T14
N1185 G0 g55 B0
N1190 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N1195 REGIME(18,8.3,2,0.073)
N1200 G0 G55 X87 Y-165 D1 M3              ;;X87 Y-97  BILO 7556
N1205 M8
N1210 CYCLE82(5,0,5,,20.5,1)
N1215 G0 G55 X0 Y-77 m8 D1 M3             ;NOV
N1220 CYCLE83(5,0,5,,16.5,,15,10,0,0,1,1)
N1225 ;;x87 y-97
N1230 ;;CYCLE82(15,-8,5,,12.5,1)
N1235 SMENA_Z
N1240 ST13: WORK_STEP(13)
N1245 T15 M6
N1250 MSG("T15(2/5)CEKOVKA D=26*L=58-0.46 D=26+0.52*WORK_STEP(13)")
N1255 ;*************************************************** T15
N1260 G0 g55 B0
N1265 TRANS X=X_B0 Z=Z_B0 Y=Y_B0           ; B0_!!!
N1270 REGIME(20,26,4,0.045)
N1275 G0 G55 X-174 Y-39 D1 M3
N1280 MCALL CYCLE82(5,0,zbez,,10,1)
N1285 X-174 Y-39 M8
N1290 Y-126
N1295 MCALL
N1300 G0 Z40 M9
N1305 SMENA_Z
N1310 ST14: WORK_STEP(14)
N1315 T6 M6
N1320 MSG("T6(1/1) FREZA chern.D=40,WORK_STEP(14) ")
N1325 R1=40/2  ;rad.frezi
N1330 ;************************************************ T6
N1335 G0 g55 B90
N1340 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N1345 REGIME(120,40,3,0.05)
N1350 X-74 Y-121 D1 M3 
N1355 Z0 M8
N1360 G1 X-43 F=r93
N1365 G0 Z40 M9
N1370 SMENA_Z
N1375 ST15: WORK_STEP(15)
N1380 T7 M6
N1385 MSG("T7(1/2) SVERLO D=16<90,WORK_STEP(15) ")
N1390 ;************************************************ T7
N1395 G0 g55 B90
N1400 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N1405 REGIME(25,16,2,0.077)
N1410 X-37 Y-123 D1 M3 
N1415 Z3 M8
N1420 G1 Z-5.3 F=r93
N1425 G0 Z30 M9
N1430 SMENA_Z
N1435 gbTOCheckAtTC = TRUE 
N1440 gbErrMsgOnToCheck = TRUE
N1445 ST16: WORK_STEP(16)
N1450 T14 M6
N1455 MSG("T14(2/14)SV.D=8.3**L=20 D=8.4+0.16-0.04,WORK_STEP(16)")
N1460 ;************************************************ T14
N1465 G0 g55 B90
N1470 TRANS X=X_B90 Z=Z_B90 Y=Y_B90           ; B90_!!!
N1475 REGIME(19,8.3,2,0.07)
N1480 WAIT_TO_CHECK 
N1485 X-37 Y-123 D1 M3 
N1490 Z7 M8
N1495 G1 Z-20 F=r93
N1500 G0 Z10 M9
N1505 SMENA_Z
N1510 ;==========================================================
N1515 
N1520 MSG("POLUCHI GOTOVUYU,GODNUYU DETAL.Nezabud podelitca!!!!")
N1525 ;M0
N1530 ;==========================================================
N1535 WORK_DONE
N1540 GOTOF _ENDE
N1545 
N1550 ST999:TO_BROKEN
N1555  _ENDE:T0 M6
N1560 M91
N1565 WORK_STEP(0)
N1570 ; MSG("PIPEC PROGRAMME *** VSE DOMOY ***")
N1575 R98=$AC_TIMER[1]
N1580 ;N68 R98=R98/60  ;cycle TIME/MIN
N1585 M30
N1590 _proverka:
N1595 ;_______1_detal___storona B0/B90____G55_______
N1600 ;*G55-X-centr STOLA,Y-PLOSKOST paleti,Z-centr STOLA
N1605 $P_UIFR[2]=CTRANS(X,0,Y,0,Z,0,B,180);  G55 B0
N1610 
N1615 
N1620 ZBEZ=3
N1625 XBEZ=10
N1630 YBEZ=7 
N1635 ;_______B0 __TRANS ___!!pripusk na oba torca 2.6
N1640 Y_B0=r200+177.8+2.6    ;OS_Y TRANS y=140+177.8+(183-177.8)/2=320.4  
N1645 X_B0=r100-(14+116)     ;OS_X TRANS ;bilo 180-14-116=50
N1650 Z_B0=r300+67.775       ;OS_Z TRANS 150+67.775=217.775 (67.8-0.05)
N1655 ;_______B90 __________________________!!!!!
N1660 Y_B90=Y_B0                 ;OS_Y TRANS
N1665 X_B90=-(Z_B0-67.775)       ;OS_X TRANS ;
N1670 Z_B90=168.958-2            ;OS_Z TRANS ;2_UST(205-3.15+16.55-49.442) 
N1675 
N1680 
N1685 STOPRE
N1690 ;**************************YSTANOV I**********
N1695 ;*poraydok obrabotki***metka***magazin/gnezdo***NALADKA INSTRUMENTA******
N1700  IF WORKING_STEP<=1   GOTOB ST1  ;T6(1/1) -FREZA D=40
N1705  M91 ;poka nezak-ca cmena palet 
N1710  IF WORKING_STEP==2   GOTOB ST2  ;T7(1/2)-SVERLO 16/90(CENTR)
N1715  IF WORKING_STEP==3   GOTOB ST3  ;T8(1/15)-SVERLO D=11
N1720  IF WORKING_STEP==4   GOTOB ST4  ;T9(1/16) ZENKER d=12.7
N1725  IF WORKING_STEP==5   GOTOB ST5  ;T10(2/15)RAZVERTKA D=13
N1730  IF WORKING_STEP==6   GOTOB ST6  ;T52(2/16)RAZVERTKA D=13.2
N1735  IF WORKING_STEP==7   GOTOB ST7  ;T59(2/6)FREZA D=10
N1740  IF WORKING_STEP==8   GOTOB ST8  ;T54(1/17)SVERLO d=16/90(CENTR) uslov.trudnie
N1745  IF WORKING_STEP==9   GOTOB ST9  ;T11(1/3) SVERLO D=13+0.27
N1750  IF WORKING_STEP==10   GOTOB ST10  ;T12(1/4) SVERLO D=6*
N1755  IF WORKING_STEP==11  GOTOB ST11 ;T13(2/13) SVERLO D=10.8
N1760  IF WORKING_STEP==12  GOTOB ST12 ;T14(2/14)SVERLO D=8.3
N1765  IF WORKING_STEP==13  GOTOB ST13 ;T15(2/15) CEKOVKA D=26**
N1770  IF WORKING_STEP==14  GOTOB ST14 ;T6(1/1) FREZA chern.D=40
N1775  IF WORKING_STEP==15  GOTOB ST15 ;T7(1/2) SVERLO D=16<90
N1780  IF WORKING_STEP==16  GOTOB ST16 ;T14(2/14) SVERLO D=8.3*
N1785  IF WORKING_STEP==999  GOTOB ST999
N1790 ENDIF
N1795 
N1800 AA: MSG("Neverniy etap obrabotki.Ti ne prav,poshevili mozgami!!!")
N1805 M0
N1810 GOTOB AA
N1815 GOTOB START_1
N1820 ; NE UDOLAYT VSE RABOTAET
N1825 
