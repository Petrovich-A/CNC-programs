N1 ;DETAL 75570-1712094 PLITA
N2 ;OPER 100  YSTANOV I - DETALI A1-A2
N3 ;YSTANOV II - DETALI A3-A4
N4 ;PRISPOSOBLENIE 7274-6447
N5 ;STANOK NDH-6 INV. N 12506 INV.ZAV. A.10003135.06
N6 ;PETROVICH A.V. 11.10.2014-15.12.2014
N7 ;TC=_MIN (NA 4 DETALI A1,...,A4)
N8 DEF REAL POM_Y,FUS=3000,ZBEZ,ZZBEZ,DPR,KP,ZPRIPUSK,XBEZ,YBEZ,ZAG,RO,Y_B180,X_B180,Z_B180,Y_B0,X_B0,Z_B0,X_BB0,Z_BB0,Y_BB0,X_BB180,Z_BB180,Y_BB180
N9 DEFINE SMENA_Z AS G0 G53 Z930 D0 M9 M5 
N10 $AC_TIMER[1]=0  ;cikl starta time/min
N11 ;***********NASTROUKA OBRABOTKI************************
N12 R1=0 ;ESLI =1 - B180+B0, ESLI =0 - OBRABOTKA TOLKO NA B0
N13 R2=0 ;ESLI =1 - NAREZAEM REZBY, ESLI =0 - BEZ REZBI
N14 ;******************************************************
N15 ;DETAL A1 YST I STORONA B0
N16 R11=149.985-0.01        ;OS Y
N17 R12=-315+275.548        ;OS X
N18 R13=580-315-0.092-0.07  ;OS Z
N19 ;DETAL A2 YST I STORONA B180
N20 R21=149.96              ;OS Y
N21 R22=315-355+0.206       ;OS X
N22 R23=315-50.15-0.07      ;OS Z
N23 ;DETAL A3 YST II STORONA B0
N24 R31=164.531             ;OS Y
N25 R32=345.48-315          ;OS X
N26 R33=580-315-0.137       ;OS Z
N27 ;DETAL A4 YST II STORONA B180
N28 R41=164.510             ;OS Y
N29 R42=315-285+0.070       ;OS X
N30 R43=315-50.054          ;OS Z
N31 ;*G54: X-CENTR STOLA, Y-PLOSKOST PALETI, Z-CENTR STOLA
N32 $P_UIFR[1]=CTRANS(X,0,Y,0,Z,0,B,0);  G54 
N33 ZBEZ=3
N34 XBEZ=10
N35 YBEZ=7
N36 GOTOF _PROVERKA
N37 START_:
N38 ;****************YSTANOV I - DETAL A1***********
N39 ST1: WORK_STEP(1)
N40 SMENA_Z
N41 G0 G54 G17 G40 G90 G94
N42 T="7.1" M6
N43 MSG("T=7.1 SVERLO CENTR. D=4 WORK_STEP(1) ")
N44 G0 G54 B0
N45 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N46 STEP_1:
N47 REGIME(16,4,2,0.02)
N48 G0 G54 X=-15 Y=14.5 D1 M3 ;GRUPPA OTV. NA 13
N49 Z=ZBEZ M8
N50 MCALL CYCLE82(3,0,3,,3,1)
N51 X=-15 Y=14.5         ;1
N52 X=-15-130 Y=14.5     ;2
N53 X=-15-130 Y=14.5+72  ;3
N54 X=-15-130 Y=14.5+131 ;4
N55 X=-15 Y=14.5+131     ;5
N56 X=-15 Y=14.5+72      ;6
N57 MCALL
N58 X=-15-25 Y=14.5-4.5 ;GRUPPA OTV. NA 8
N59 MCALL CYCLE82(3,0,3,,3,1)
N60 X=-15-25 Y=14.5-4.5        ;1
N61 X=-15-85 Y=14.5-4.5        ;2
N62 X=-15-69 Y=14.5+18.5       ;3
N63 X=-15-69-50 Y=14.5+18.5    ;4
N64 X=-15-69-50 Y=14.5+18.5+35 ;5
N65 X=-15-69 Y=14.5+18.5+35    ;6
N66 X=-15-85 Y=14.5-4.5+140    ;7
N67 X=-15-25 Y=14.5-4.5+140    ;8
N68 MCALL
N69 X=-15-108 Y=14.5+101 ;OTV. NA 8.5
N70 CYCLE82(3,0,3,,3,1)
N71 X=-15-80 Y=29+14 ;ZASVERLOVKA POD FREZY
N72 MCALL CYCLE82(3,0,3,,3,1)
N73 X=-15-80 Y=29+14 ;PRAVII
N74 X=-15-94 Y=29+14 ;CENTR
N75 X=-15-108 Y=43+14 ;LEVII VVERHY
N76 MCALL
N77 SMENA_Z
N78 IF R1==0 GOTOF END_1
N79 G0 G54 B180
N80 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N81 REPEAT STEP_1 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N82 END_1:
N83 ;***************************************************
N84 ST2: WORK_STEP(2)
N85 T="10.1" M6
N86 MSG("T=10.1 SVERLO D=13.2 WORK_STEP(2) ")
N87 G0 G54 B0
N88 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N89 STEP_2:
N90 REGIME(18,13.2,2,0.11)
N91 X=-15-130 Y=14.5 D1 M3 ;GRUPPA OTV. NA 13
N92 Z=ZBEZ*3 M8
N93 MCALL CYCLE83(15,0,ZBEZ*3,,27,,10,4,,,1,1)
N94 X=-15-130 Y=14.5+72  ;3
N95 X=-15 Y=14.5+131     ;5
N96 X=-15 Y=14.5+72      ;6
N97 MCALL
N98 SMENA_Z
N99 IF R1==0 GOTOF END_2
N100 G0 G54 B180
N101 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N102 REPEAT STEP_2 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N103 END_2:
N104 ;***************************************************
N105 ST3: WORK_STEP(3)
N106 T="10.2" M6
N107 MSG("T=10.2 SVERLO D=13 WORK_STEP(3) ")
N108 G0 G54 B0
N109 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N110 STEP_3:
N111 REGIME(16,13,2,0.1) 
N112 X=-15 Y=14.5 D1 M3 ;GRUPPA OTV. NA 13
N113 Z=ZBEZ*3 M8
N114 MCALL CYCLE83(15,0,ZBEZ*3,,26.5,,10,4,,,1,1) 
N115 X=-15 Y=14.5         ;1
N116 X=-15-130 Y=14.5     ;2
N117 X=-15-130 Y=14.5+131 ;4
N118 MCALL
N119 SMENA_Z
N120 IF R1==0 GOTOF END_3
N121 G0 G54 B180
N122 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N123 REPEAT STEP_3 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N124 END_3:
N125 ;***************************************************
N126 ST4: WORK_STEP(4)
N127 T="6.2" M6
N128 MSG("T=6.2 ZENKER D=13.16 WORK_STEP(4) ")
N129 G0 G54 B0
N130 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N131 STEP_4:
N132 REGIME(10,13.16,3,0.05) 
N133 X=-15 Y=14.5 D1 M3 ;GRUPPA OTV. NA 13
N134 Z=ZBEZ*3 M8
N135 MCALL CYCLE85(8,0,ZBEZ*3,,26.5,,R93,R93*3)
N136 X=-15 Y=14.5         ;1
N137 X=-15-130 Y=14.5     ;2
N138 X=-15-130 Y=14.5+131 ;4
N139 MCALL
N140 SMENA_Z
N141 IF R1==0 GOTOF END_4
N142 G0 G54 B180
N143 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N144 REPEAT STEP_4 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N145 END_4:
N146 ;***************************************************
N147 ST5: WORK_STEP(5)
N148 T="11.2" M6
N149 MSG("T=11.2 RAZVERTKA D=13.23 WORK_STEP(5) ")
N150 G0 G54 B0
N151 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N152 STEP_5:
N153 REGIME(10,13.23,8,0.036) 
N154 X=-15 Y=14.5 D1 M3 ;1
N155 Z=ZBEZ*2 M8
N156 G1 Z-32 F=r93
N157 Z6 F=R93*5
N158 X=-15-130 Y=14.5     ;2
N159 Z=ZBEZ*2
N160 G1 Z-32 F=r93
N161 Z6 F=R93*5
N162 G0 X=-15-130 Y=14.5+131 D1 M3 ;4
N163 Z=ZBEZ*2
N164 G1 Z-32 F=r93
N165 Z6 F=R93*5
N166 SMENA_Z
N167 IF R1==0 GOTOF END_5
N168 G0 G54 B180
N169 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N170 REPEAT STEP_5 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N171 END_5:
N172 ;***************************************************
N173 ST6: WORK_STEP(6)
N174 T="12.2" M6
N175 MSG("T=12.2 SVERLO D=6.8 WORK_STEP(6) ")
N176 G0 G54 B0
N177 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N178 STEP_6:
N179 REGIME(14,6.8,2,0.11) 
N180 X=-15-25 Y=14.5-4.5 D1 M3  ;GRUPPA OTV. NA 8
N181 Z=ZBEZ*2 M8
N182 MCALL CYCLE83(20,0,ZBEZ*2,,26.5,,6,3,,,1,1)
N183 X=-15-25 Y=14.5-4.5        ;1
N184 X=-15-85 Y=14.5-4.5        ;2
N185 X=-15-69 Y=14.5+18.5       ;3
N186 X=-15-69-50 Y=14.5+18.5    ;4
N187 X=-15-69-50 Y=14.5+18.5+35 ;5
N188 X=-15-69 Y=14.5+18.5+35    ;6
N189 X=-15-85 Y=14.5-4.5+140    ;7
N190 X=-15-25 Y=14.5-4.5+140    ;8
N191 MCALL
N192 X=-15-80 Y=29+14 M8 ;ZASVERLOVKA POD FREZY
N193 MCALL CYCLE83(15,0,ZBEZ*2,,26.5,,6,4,,,1,1)
N194 X=-15-80 Y=29+14 ;PRAVII
N195 X=-15-94 Y=29+14 ;CENTR
N196 X=-15-108 Y=43+14 ;LEVII VVERHY
N197 MCALL
N198 SMENA_Z
N199 IF R1==0 GOTOF END_6
N200 G0 G54 B180
N201 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N202 REPEAT STEP_6 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N203 END_6:
N204 ;***************************************************
N205 ST7: WORK_STEP(7)
N206 T="7.2" M6
N207 MSG("T=7.2 SVERLO CENTR. D=16 WORK_STEP(7) ")
N208 G0 G54 B0
N209 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N210 STEP_7:
N211 REGIME(18,16,2,0.12)
N212 G0 G54 X=-15-25 Y=14.5-4.5 D1 M3 ;GRUPPA OTV. NA 8
N213 Z=ZBEZ M8
N214 MCALL CYCLE82(3,0,3,,6.75/2+1.6,1)
N215 X=-15-25 Y=14.5-4.5        ;1
N216 X=-15-85 Y=14.5-4.5        ;2
N217 X=-15-69 Y=14.5+18.5       ;3
N218 X=-15-69-50 Y=14.5+18.5    ;4
N219 X=-15-69-50 Y=14.5+18.5+35 ;5
N220 X=-15-69 Y=14.5+18.5+35    ;6
N221 X=-15-85 Y=14.5-4.5+140    ;7
N222 X=-15-25 Y=14.5-4.5+140    ;8
N223 MCALL
N224 Z=30 M8
N225 SMENA_Z
N226 IF R1==0 GOTOF END_7
N227 G0 G54 B180
N228 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N229 REPEAT STEP_7 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N230 END_7:
N231 SMENA_Z
N232 G0 G54 B0
N233 TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0    ;TRANS DETAL A3 YST II STORONA B0
N234 STEP_77:
N235 REGIME(25,16,2,0.2)
N236 G0 G54 X0 Y0 D1 M3 ;GRUPPA OTV. NA 13.2
N237 Z=30 M8
N238 MCALL CYCLE82(30,0,3,,13.2/2+0.25,1)
N239 X0 Y0        ;1
N240 X0 Y72       ;2
N241 X0 Y131      ;3
N242 X130 Y0      ;4
N243 X130 Y72     ;5
N244 X130 Y131    ;6
N245 MCALL
N246 X25 Y-4.5  ;GRUPPA OTV. NA 8
N247 MCALL CYCLE82(30,0,3,,6.8/2+0.25,1)
N248 X25 Y-4.5          ;1
N249 X69 Y18.5          ;3
N250 X69 Y=18.5+35      ;4
N251 X=69+50 Y=18.5+35  ;5
N252 X=69+50 Y=18.5     ;6
N253 X25 Y=-4.5+140     ;7
N254 MCALL
N255 SMENA_Z
N256 IF R1==0 GOTOF END_77
N257 G0 G54 B180
N258 TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180    ;TRANS DETAL A4 YST II STORONA B180
N259 REPEAT STEP_77 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N260 END_77:
N261 ;***************************************************
N262 ST8: WORK_STEP(8)
N263 T="12.1" M6
N264 MSG("T=12.1 SVERLO D=8.5 WORK_STEP(8) ")
N265 G0 G54 B0
N266 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N267 STEP_8:
N268 REGIME(12,8.5,2,0.06) 
N269 X=-15-108 Y=14.5+101 D1 M3    ;OTV. NA 8.5
N270 Z=ZBEZ*2 M8
N271 CYCLE83(15,0,ZBEZ*2,,26.5,,8,4,,,1,1)
N272 SMENA_Z
N273 IF R1==0 GOTOF END_8
N274 G0 G54 B180
N275 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N276 REPEAT STEP_8 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N277 END_8:
N278 ;***************************************************
N279 IF R2==0 GOTOF END_A
N280 ST9: WORK_STEP(9)
N281 T="20.1" M6
N282 MSG("T=20.1 METCHIK M8*1.25  ,WORK_STEP(9) ")
N283 G0 G54 B0
N284 MSG("OCHISTIT OTVERSTIE OT STRUGKI!")
N285 M0
N286 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N287 STEP_9:
N288 REGIME(5,8,1,1.25) 
N289 X=-15-25 Y=14.5-4.5 D1 M3    ;GRUPPA OTV. NA 8
N290 Z=ZBEZ*3 M8
N291 MCALL CYCLE840(8,0,ZBEZ*3,,29,,,3,1)
N292 X=-15-25 Y=14.5-4.5        ;1
N293 X=-15-85 Y=14.5-4.5        ;2
N294 X=-15-69 Y=14.5+18.5       ;3
N295 X=-15-69-50 Y=14.5+18.5    ;4
N296 X=-15-69-50 Y=14.5+18.5+35 ;5
N297 X=-15-69 Y=14.5+18.5+35    ;6
N298 X=-15-85 Y=14.5-4.5+140    ;7
N299 X=-15-25 Y=14.5-4.5+140    ;8
N300 MCALL
N301 SMENA_Z
N302 MSG ("PROVER REZBU")
N303 M0
N304 IF R1==0 GOTOF END_9
N305 G0 G54 B180
N306 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N307 REPEAT STEP_9 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N308 END_9:
N309 END_A:
N310 ;***************************************************
N311 ST10: WORK_STEP(10)
N312 T="21.1" M6
N313 MSG("T=21.1 FREZA D=8(3_zub),WORK_STEP(10)")
N314 G0 G54 B0
N315 TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 LEVO STORONA B0
N316 STEP_10:
N317 REGIME(80,8,4,0.01)
N318 X=-15-80 Y=29+14 D1 M3 ;PRAVII
N319 Z=ZBEZ M8
N320 G1 Z0 F=FUS
N321 DPR=10.85 KP=5 ZZBEZ=DPR+ZBEZ
N322 FR_10:G1Z=IC(-DPR/KP) F=R93/2
N323 G1 Y=43+14 F=R93
N324 G0 Z=IC(ZZBEZ)
N325 Y=29+14
N326 G1 Z=IC(-ZZBEZ) F=FUS/2
N327 REPEAT FR_10 P=KP-1
N328 G0 Z=ZBEZ*2
N329 ;***************************************************
N330 G0 G54 X=-15-94 Y=29+14 D1 M3 ;CENTR
N331 Z=ZBEZ M8
N332 G1 Z0 F=FUS
N333 DPR=10.85 KP=5 ZZBEZ=DPR+ZBEZ
N334 FFR_10:G1Z=IC(-DPR/KP) F=R93/2
N335 G1 Y=43+14 F=R93
N336 G0 Z=IC(ZZBEZ)
N337 Y=29+14
N338 G1 Z=IC(-ZZBEZ) F=FUS/2
N339 REPEAT FFR_10 P=KP-1
N340 G0 Z=ZBEZ*2
N341 ;***************************************************
N342 G0 G54 X=-15-108 Y=43+14 D1 M3 ;LEVII
N343 Z=ZBEZ M8
N344 G1 Z0 F=FUS
N345 DPR=10.85 KP=5 ZZBEZ=DPR+ZBEZ
N346 FFFR_10:G1Z=IC(-DPR/KP) F=R93/2
N347 G4 F2
N348 G1 Y=29+14 F=R93
N349 G4 F2
N350 G0 Z=IC(ZZBEZ)
N351 Y=43+14
N352 G1 Z=IC(-ZZBEZ) F=FUS/2
N353 REPEAT FFFR_10 P=KP-1
N354 G0 Z=ZBEZ*2
N355 SMENA_Z
N356 IF R1==0 GOTOF END_10
N357 G0 G54 B180
N358 TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N359 REPEAT STEP_10 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N360 END_10:
N361 ;***************************************************
N362 ;****************YSTANOV II - DETAL A3***********
N363 ST11: WORK_STEP(11)
N364 T="21.1" M6
N365 MSG("T=21.1 FREZA D=8(4_zub),WORK_STEP(11)")
N366 G0 G54 B0
N367 TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0    ;TRANS DETAL A3 YST II STORONA B0
N368 STEP_11:
N369 REGIME(80,8,4,0.01)
N370 X80 Y29 D1 M3 ;LEVII
N371 Z=ZBEZ M8
N372 G1 Z0 F=FUS
N373 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N374 FR_11:G1Z=IC(-DPR/KP) F=R93/2
N375 G1 Y36 F=R93
N376 X77
N377 X80
N378 Y43
N379 G0 Z=IC(ZZBEZ)
N380 X80 Y29
N381 G1 Z=IC(-ZZBEZ) F=FUS/2
N382 REPEAT FR_11 P=KP-1
N383 G0 Z=ZBEZ*2
N384 ;***************************************************
N385 G0 G54 X94 Y29 D1 M3 ;CENTR
N386 Z=ZBEZ M8
N387 G1 Z0 F=FUS
N388 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N389 FFR_11:G1Z=IC(-DPR/KP) F=R93/2
N390 G1 Y72 F=R93
N391 G0 Z=IC(ZZBEZ)
N392 Y29
N393 G1 Z=IC(-ZZBEZ) F=FUS/2
N394 REPEAT FFR_11 P=KP-1
N395 G0 Z=ZBEZ*2
N396 ;***************************************************
N397 G0 G54 X108 Y43 D1 M3 ;PRAVII
N398 Z=ZBEZ M8
N399 G1 Z0 F=FUS
N400 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N401 FFFR_11:G1Z=IC(-DPR/KP) F=R93/2
N402 G4 F2
N403 G1 Y11 F=R93
N404 G4 F2
N405 G0 Z=IC(ZZBEZ)
N406 Y43
N407 G1 Z=IC(-ZZBEZ) F=FUS/2
N408 REPEAT FFFR_11 P=KP-1
N409 G0 Z=ZBEZ*2
N410 SMENA_Z
N411 IF R1==0 GOTOF END_11
N412 G0 G54 B180
N413 TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180    ;TRANS DETAL A4 YST II STORONA B180
N414 REPEAT STEP_11 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N415 END_11:
N416 ;***************************************************
N417 ST12: WORK_STEP(12)
N418 T="28.1" M6
N419 MSG("T=28.1 FREZA D=12(5_zub),WORK_STEP(12)")
N420 G0 G54 B0
N421 TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0    ;TRANS DETAL A3 YST II STORONA B0
N422 STEP_12:
N423 REGIME(20,12,5,0.01)
N424 G0 G54 X108 Y11 D1 M3
N425 Z=ZBEZ M8
N426 G1 Z0 F=FUS
N427 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N428 FR_12:G1Z=IC(-DPR/KP) F=R93*2
N429 G4 F2
N430 G1 Y0 F=R93
N431 G4 F2
N432 G0 Z=IC(ZZBEZ)
N433 X108 Y11
N434 G1 Z=IC(-ZZBEZ) F=FUS/2
N435 REPEAT FR_12 P=KP-1
N436 G0 Z=ZBEZ*2
N437 SMENA_Z
N438 IF R1==0 GOTOF END_12
N439 G0 G54 B180
N440 TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180    ;TRANS DETAL A4 YST II STORONA B180
N441 REPEAT STEP_12 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N442 END_12:
N443 ;***************************************************
N444 ST13: WORK_STEP(13)
N445 T="23.1" M6
N446 MSG("T=23.1 FREZA D=14(5_zub),WORK_STEP(13)")
N447 G0 G54 B0
N448 TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0    ;TRANS DETAL A3 YST II STORONA B0
N449 STEP_13:
N450 REGIME(30,14,4,0.01)
N451 G0 G54 X=77-0.2 Y=29+7 D1 M3 ;NIZHNII
N452 Z=ZBEZ M8
N453 G1 Z0 F=FUS
N454 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N455 FR_13:G1Z=IC(-DPR/KP) F=R93*2
N456 G1 X70 F=R93
N457 G0 Z=IC(ZZBEZ)
N458 X=77-0.2 Y=29+7
N459 G1 Z=IC(-ZZBEZ) F=FUS/2
N460 REPEAT FR_13 P=KP-1
N461 G0 Z=ZBEZ*2
N462 G0 G54 X94 Y72 D1 M3 ;VERHNII
N463 Z=ZBEZ M8
N464 G1 Z0 F=FUS
N465 DPR=15-0.43/2 KP=7 ZZBEZ=DPR+ZBEZ
N466 FFR_13:G1Z=IC(-DPR/KP) F=R93*2
N467 G4 F2
N468 G1 X108 F=R93
N469 G4 F2
N470 Y122.5
N471 G4 F2
N472 G0 Z=IC(ZZBEZ)
N473 X94 Y72
N474 G1 Z=IC(-ZZBEZ) F=FUS/2
N475 REPEAT FFR_13 P=KP-1
N476 G0 Z=ZBEZ*2
N477 SMENA_Z
N478 IF R1==0 GOTOF END_13
N479 G0 G54 B180
N480 TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180    ;TRANS DETAL A4 YST II STORONA B180
N481 REPEAT STEP_13 P=1    ;POVTOR OBR-KI DETAL A2 STORONA B180
N482 END_13:
N483 ;***************************************************
N484 MSG("PEREUSTONOVI DETAL A1,A2 NA A3,A4")
N485 T0 M6
N486 M0
N487 M192
N488 M0
N489 M193
N490 WORK_DONE
N491 M91
N492 WORK_STEP(0)
N493 M2
N494 M30
N495 _PROVERKA:
N496 ;*************************************************** 
N497 ;TRANS X=X_B0 Z=Z_B0 Y=Y_B0    ;TRANS DETAL A1 YST I STORONA B0
N498 ;TRANS X=X_BB0 Z=Z_BB0 Y=Y_BB0    ;TRANS DETAL A3 YST II STORONA B0
N499 ;TRANS X=X_B180 Z=Z_B180 Y=Y_B180    ;TRANS DETAL A2 YST I STORONA B180
N500 ;TRANS X=X_BB180 Z=Z_BB180 Y=Y_BB180    ;TRANS DETAL A4 YST II STORONA B180
N501 _PROVERKA:
N502 ;************TRANS DETAL A1 YST I STORONA B0***********
N503 Y_B0=R11                ;OS Y TRANS
N504 X_B0=R12                ;OS X TRANS
N505 Z_B0=R13+24.975         ;OS_Z TRANS R13+TOLCHINA DET.
N506 ;************TRANS DETAL A2 YST I STORONA B180***********
N507 Y_B180=R21              ;OS Y TRANS
N508 X_B180=R22              ;OS X TRANS
N509 Z_B180=R23+24.975       ;OS_Z TRANS R13+TOLCHINA DET.
N510 ;************TRANS DETAL A3 YST II STORONA B0***********
N511 Y_BB0=R31               ;OS Y TRANS
N512 X_BB0=R32               ;OS X TRANS
N513 Z_BB0=R33+24.975        ;OS_Z TRANS R13+TOLCHINA DET.
N514 ;************TRANS DETAL A4 YST II STORONA B180***********
N515 Y_BB180=R41             ;OS Y TRANS
N516 X_BB180=R42             ;OS X TRANS
N517 Z_BB180=R43+24.975      ;OS_Z TRANS R13+TOLCHINA DET.
N518 ;************************************************************
N519 STOPRE
N520 ;*******************NALADKA INSTRUMENTA**********************
N521  IF WORKING_STEP<=1   GOTOB ST1  ;T= SVERLO CENTR. D=4 
N522  IF WORKING_STEP==2   GOTOB ST2  ;T= SVERLO D=13.2
N523  IF WORKING_STEP==3   GOTOB ST3  ;T= SVERLO D=13
N524  IF WORKING_STEP==4   GOTOB ST4  ;T= ZENKER D=13.16
N525  IF WORKING_STEP==5   GOTOB ST5  ;T= RAZVERTKA D=13.23
N526  IF WORKING_STEP==6   GOTOB ST6  ;T= SVERLO D=6.8
N527  IF WORKING_STEP==7   GOTOB ST7  ;T= SVERLO CENTR. D=16/90
N528  IF WORKING_STEP==8   GOTOB ST8  ;T= SVERLO D=8.5
N529  IF WORKING_STEP==9   GOTOB ST9  ;T= METCHIK M8*1.25
N530  IF WORKING_STEP==10   GOTOB ST10  ;T= FREZA D=8
N531  IF WORKING_STEP==11   GOTOB ST11  ;T= FREZA D=8
N532  IF WORKING_STEP==12   GOTOB ST12  ;T= FREZA D=12
N533  IF WORKING_STEP==13   GOTOB ST13  ;T= FREZA D=14
N534  IF WORKING_STEP==999  GOTOB ST999
N535 ENDIF
N536 GOTOB START_
